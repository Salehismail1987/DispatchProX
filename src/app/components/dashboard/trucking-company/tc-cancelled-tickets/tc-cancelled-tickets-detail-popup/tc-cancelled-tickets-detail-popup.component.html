<div class="modal fade  come-from-modal right" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content modal-ticket modal-bg-white ">
            <div class="modal-body">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <div class="title-9 text-grey-shade2 mb-3px">Ticket IDs</div>
                        <div class="dashboard-title">{{this.getTicket(this.requestDetail?.tickets_cancelled)}}</div>
                    </div>
                    <div>
                        <img (click)="showTicketImage()" *ngIf="this.requestDetail?.ticket?.required_paper_ticket_id=='YES'" src="../assets/icons/driver-paperticket-icon.svg" height="20" class="mr-1" />
                        <button [ngClass]="this.getStatusClass(this.requestDetail?.ticket?.status)">{{this.requestDetail?.ticket?.status}}</button>
                    </div>
                </div>
                <br>
                <nav class="d-flex justify-content-between ">
                    <div class="nav nav-pills nav-fill width-fit-content" id="nav-tab" role="tablist">
                        <a class="nav-item nav-link text-left active" id="nav-home-tab" data-toggle="tab" href="#ticket-detail" role="tab" aria-controls="nav-home" aria-selected="true">Ticket details</a>
                        <a class="nav-item nav-link text-left ml-3" id="nav-profile-tab" data-toggle="tab" href="#round-detail" role="tab" aria-controls="nav-profile" aria-selected="false">Job details</a>
                    </div>
                    <div class="" align="right">
                        <div class="title-52 text-grey-shade2 text-right">Date</div>
                        <div class="title-5-new">{{this.requestDetail?.ticket.ticket_date}}</div>
                    </div>
                </nav>
                <div class="tab-content" id="nav-tabContent" *ngIf="this.requestDetail && !this.requestDetail.tc_ticket">
                    <div class="tab-pane fade show active" id="ticket-detail" role="tabpanel" aria-labelledby="nav-home-tab">
                        <div class="ticket-detail-div bg-white" *ngIf="this.requestDetail?.ticket.status == 'Cancelled'">
                            <div class="p-10px">
                                <div class="row">
                                    <div class="col-6">
                                        <div class="title-5">Cancelled by</div>
                                        <div class="title-5-new">{{this.requestDetail?.ticket && this.requestDetail?.ticket?.cancelled_by ? this.requestDetail?.ticket?.cancelled_by.full_name:''}}  </div>
                                    </div>
                                    <div class="col-6">

                                    </div>
                                </div>

                            </div>
                            <div class="myhr"></div>
                            <div class="p-10px">
                                <div class="row">
                                    <div class="col-12">
                                        <div class="title-5">Reason for cancellation</div>
                                        <div class="title-5-new">{{this.requestDetail?.ticket && this.requestDetail?.ticket?.cancel_reason ? this.requestDetail?.ticket?.cancel_reason:''}}</div>
                                    </div>

                                </div>

                            </div>

                        </div>
                        <div class="ticket-detail-div bg-light-yellow2 no-border" >
                            <div class="p-10px">
                                <div class="row">
                                    <div class="col-6">
                                        <div class="mb-8"></div>
                                        <div class="title-1 text-black-shade2">{{this.requestDetail?.ticket?.user?.company_name}}</div>
                                    </div>
                                    <div class="col-6" align="right">
                                        <div class="title-52 text-grey-shade2 text-right">Project</div>
                                        <div class="title-5-new">{{this.requestDetail?.project?.project_name}}</div>
                                    </div>
                                </div>
                            </div>

                            <div class="myhr"></div>
                            <div class="p-10px">
                                <div class="row">
                                    <div class="col-6">
                                        <div class="title-52 text-grey-shade2">Job number</div>
                                        <div class="title-5-new">{{this.requestDetail?.project?.job_number}}</div>
                                    </div>
                                    <div class="col-6" align="right">
                                        <div class="title-5 text-grey-shade2 text-right">Project address</div>
                                        <div class="title-5-new">{{this.requestDetail?.project?.project_location}}</div>
                                    </div>
                                </div>
                            </div>
                            <div class="myhr"></div>
                            <div class="p-10px">
                                <div class="row">
                                    <div class="col-6">
                                        <div class="title-52 text-grey-shade2">Job Approver</div>
                                        <div class="title-5-new">{{this.requestDetail?.approver?.full_name}} </div>
                                    </div>
                                    <div class="col-6" >
                                        <div *ngIf="this.requestDetail?.ticket?.status == 'Accepted'">

                                        </div>
                                        <div *ngIf="this.requestDetail?.ticket?.status == 'Approved'">
                                            <div class="title-5 text-right">Approved: Date / Time / Rate</div>
                                            <div class="title-5-new text-right">{{this.requestDetail?.ticket?.driver_ticket?.approved_at | date:'shortDate'}} / {{this.requestDetail?.ticket?.driver_ticket?.approved_at | date:'shortTime'}} / {{this.requestDetail?.rate_per_hour ? '$'+this.requestDetail?.rate_per_hour : ''}}</div>
                                        </div>
                                        <div *ngIf=" this.requestDetail?.ticket?.status != 'Approved' && this.requestDetail?.dispatch_by?.account_type =='Customer' && this.requestDetail?.dispatch_by?.id == this.requestDetail?.ticket?.user_id">
                                            <div class="title-5 text-right">Hour Rate</div>
                                            <div class="title-5-new text-right">
                                                {{this.requestDetail?.rate_per_hour ?  '$'+this.requestDetail?.rate_per_hour : ''}}/hr
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div *ngIf="this.requestDetail?.dispatch_by?.account_type =='Customer' && this.requestDetail?.dispatch_by?.id == this.requestDetail?.ticket?.user_id" >
                                <div class="myhr"></div>
                                    <div class="p-10px">
                                        <div class="row">
                                            <div class="col-6">
                                                <div class="title-52 text-grey-shade2">Dispatcher</div>
                                                <div class="title-5-new">{{this.requestDetail?.dispatch_by?.full_name}} </div>
                                            </div>
                                            <div class="col-6">
                                                <div class="title-52 text-grey-shade2 text-right">Contact #</div>
                                                <div class="title-5-new text-right">{{this.requestDetail?.dispatch_by?.contact_number}}</div>
                                            </div>
                                        </div>
                                    </div>
                            </div>

                            <div class="myhr"></div>
                            <div class="p-10px">
                                <div class="row">
                                    <div class="col-12">
                                        <div class="title-5">Description</div>
                                        <div class="stats-status">{{this.requestDetail?.ticket?.description}}</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <ng-container *ngIf="this.requestDetail?.ticket?.trucking_company_requests && this.requestDetail?.ticket?.trucking_company_requests.length>0">
                            <ng-container *ngFor="let reqDetail of this.requestDetail?.ticket?.trucking_company_requests">
                                <!--Customer-->
                                <div class="ticket-detail-div bg-white" *ngIf="reqDetail.dispatch_by !== null && reqDetail.dispatch_by?.account_type !='Customer' && reqDetail.dispatch_to_id == this.user_id " >

                                    <div class="p-10px">
                                        <div class="row">
                                            <div class="col-6">
                                                <div class="title-52 text-grey-shade2">Customer </div>
                                                <div class="title-5-new">{{reqDetail?.dispatch_by?.company_name}} </div>
                                            </div>
                                            <div class="col-6" align="right">
                                                <div class="title-52 text-grey-shade2 text-grey-shade2 text-right">Hour rate</div>
                                                <div class="title-5-new text-right">${{reqDetail?.rate_per_hour}}/hr</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="myhr"></div>
                                    <div class="p-10px">
                                        <div class="row">
                                            <div class="col-6">
                                                <div class="title-52 text-grey-shade2">Dispatcher</div>
                                                <div class="title-5-new">{{reqDetail?.dispatch_by?.full_name}} </div>
                                            </div>
                                            <div class="col-6">
                                                <div class="title-52 text-grey-shade2 text-right">Contact #</div>
                                                <div class="title-5-new text-right">{{reqDetail?.dispatch_by?.contact_number}}</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </ng-container>
                        </ng-container>

                        <ng-container *ngIf="this.requestDetail?.ticket?.trucking_company_requests && this.requestDetail?.ticket?.trucking_company_requests.length>0">
                            <ng-container *ngFor="let reqDetail of this.requestDetail?.ticket?.trucking_company_requests">

                                <!-- vendor -->
                                <div class="ticket-detail-div bg-white" *ngIf="reqDetail.id !== this.requestDetail?.id && reqDetail.dispatch_by_id == this.user_id" >
                                    <div class="p-10px">
                                        <div class="row">
                                            <div class="col-6">
                                                <div class="title-52 text-grey-shade2">Vendor</div>
                                                <div class="title-5-new">{{reqDetail?.dispatch_to?.company_name}}</div>
                                            </div>
                                            <div class="col-6" align="right">
                                                <div class="title-52 text-grey-shade2 text-grey-shade2 text-right">Hour rate</div>
                                                <div class="title-5-new text-right">${{reqDetail?.rate_per_hour}}/hr</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="myhr"></div>
                                    <div class="p-10px">
                                        <div class="row">
                                            <div class="col-6">
                                                <div class="title-52 text-grey-shade2">Accepted by:</div>
                                                <div class="title-5-new" >
                                                    <ng-container *ngIf="reqDetail?.is_accepted == 1">
                                                        {{reqDetail?.accepted_by?.full_name}}
                                                    </ng-container>
                                                </div>
                                            </div>
                                            <div class="col-6">
                                                <div class="title-52 text-grey-shade2 text-right">Contact #</div>
                                                <div class="title-5-new text-right">{{reqDetail?.accepted_by?.contact_number}}</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </ng-container>
                        </ng-container>

                        <!-- driver/truck -->
                        <div class="ticket-detail-div mybtn-back-pink no-border">

                            <!-- For Pending Status-->
                            <ng-container *ngIf="this.requestDetail?.ticket?.status == 'Pending' && !this.requestDetail?.ticket?.driver_ticket">
                                  <!-- truck detail -->
                                  <div class="p-10px">
                                    <div class="row">
                                        <div class="col-6">
                                            <div class="title-52 text-grey-shade2">Truck type</div>
                                            <div class="title-5-new">{{this.requestDetail?.ticket_truck_type?.project_combination && this.requestDetail?.ticket_truck_type?.project_combination?.truck ? this.requestDetail?.ticket_truck_type?.project_combination?.truck?.name :(this.requestDetail?.ticket_truck_type?.project_truck? this.requestDetail?.ticket_truck_type?.project_truck.name :'' )}}</div>
                                        </div>

                                        <div class="col-6" align="right">
                                            <div class="title-52 text-grey-shade2 text-right">Trailer type</div>
                                            <div class="title-5-new">{{ (this.requestDetail?.ticket_truck_type?.project_trailer? this.requestDetail?.ticket_truck_type?.project_trailer.name :'' )}}</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="myhr"></div>
                                <div class="p-10px">
                                    <div class="row">
                                        <div class="col-6">
                                            <div class="title-52 text-grey-shade2">Start time</div>
                                            <div class="title-5-new"><img src="../../assets/icons/time-squar.svg" width="11px" class="mt-minus-3px" > {{this.requestDetail?.ticket_truck_type?.ticket_truck_type_rounds && this.requestDetail?.ticket_truck_type?.ticket_truck_type_rounds[0] ? this.requestDetail?.ticket_truck_type?.ticket_truck_type_rounds[0]?.start_time :'' }}</div>
                                        </div>

                                        <div class="col-6" align="right">
                                            <div class="title-52 text-grey-shade2 text-right">Truck interval</div>
                                            <div class="title-5-new">{{this.requestDetail?.ticket_truck_type?.ticket_truck_type_rounds && this.requestDetail?.ticket_truck_type?.ticket_truck_type_rounds[0] ? this.requestDetail?.ticket_truck_type?.ticket_truck_type_rounds[0]?.interval_between_truck :'' }}<img src="../../assets/icons/time-squar.svg" width="11px" class="mt-minus-3px" > </div>
                                        </div>
                                    </div>
                                </div>
                            </ng-container>


                           <!-- truck detail -->
                            <ng-container *ngIf="(this.requestDetail?.ticket?.status == 'Pending' && this.requestDetail?.ticket?.driver_ticket) || this.requestDetail?.ticket?.status == 'Accepted' || this.requestDetail?.ticket?.status == 'Driving' || this.requestDetail?.ticket?.status == 'Cancelled'" >

                                <div class="p-10px">
                                    <div class="row">
                                        <div class="col-4">
                                            <div class="title-52 text-grey-shade2">Truck name</div>
                                            <div class="title-5-new">{{this.requestDetail?.ticket?.driver_ticket?.truck?.truck_nickname}}</div>
                                        </div>
                                        <div class="col-4" align="center">
                                            <div class="title-52 text-grey-shade2 text-center">Truck type</div>
                                            <div class="title-5-new text-center">{{this.requestDetail?.ticket?.driver_ticket?.truck?.truck_type}}</div>
                                        </div>
                                        <div class="col-4" align="right">
                                            <div class="title-52 text-grey-shade2 text-right">License plate</div>
                                            <div class="title-5-new">{{this.requestDetail?.ticket?.driver_ticket?.truck?.truck_license_plate}}</div>
                                        </div>
                                    </div>
                                </div>
                                <ng-container *ngIf="this.requestDetail?.ticket?.driver_ticket?.trailer && this.requestDetail?.ticket?.driver_ticket?.trailer?.trailer_nickname">

                                    <div class="myhr"></div>
                                    <div class="p-10px" >
                                        <div class="row">
                                            <div class="col-4">
                                                <div class="title-52 text-grey-shade2">Trailer name</div>
                                                <div class="title-5-new">{{this.requestDetail?.ticket?.driver_ticket?.trailer?.trailer_nickname}}</div>
                                            </div>
                                            <div class="col-4" align="center">
                                                <div class="title-52 text-grey-shade2 text-center">Trailer type</div>
                                                <div class="title-5-new text-center">{{this.requestDetail?.ticket?.driver_ticket?.trailer?.trailer_type}}</div>
                                            </div>
                                            <div class="col-4" align="right">
                                                <div class="title-52 text-grey-shade2 text-right">License plate</div>
                                                <div class="title-5-new">{{this.requestDetail?.ticket?.driver_ticket?.trailer?.trailer_license_plate}}</div>
                                            </div>
                                        </div>
                                    </div>
                                </ng-container>


                                <!-- driver detail -->
                                <div class="myhr"></div>
                                <div class="p-10px">
                                    <div class="row">
                                        <div class="col-4">
                                            <div class="title-52 text-grey-shade2">Driver</div>
                                            <div class="title-5-new">{{this.requestDetail?.ticket?.driver_ticket?.driver?.full_name}} </div>
                                        </div>
                                        <div class="col-4" align="center">
                                            <div class="title-52 text-grey-shade2 text-center">{{this.requestDetail?.ticket?.status == 'Driving' ? 'Job started' : 'Start time'}}</div>
                                            <div class="title-5-new text-center" *ngIf="this.requestDetail?.ticket?.status == 'Accepted' || (this.requestDetail?.ticket?.status == 'Pending' && this.requestDetail?.ticket?.driver_ticket) ">
                                                <img src="../../assets/icons/time-squar.svg" width="11px" class="mt-minus-3px" > {{this.requestDetail?.ticket?.ticket_time}}
                                            </div>
                                            <div class="title-5-new text-center" *ngIf="this.requestDetail?.ticket?.status == 'Driving'">
                                                <img src="../../assets/icons/time-squar.svg" width="11px" class="mt-minus-3px" > {{this.requestDetail?.ticket?.driver_ticket?.started_at | date:'shortTime'}}
                                            </div>
                                        </div>
                                        <div class="col-4" align="right">
                                            <div class="title-52 text-grey-shade2 text-right">Rounds</div>
                                            <div class="title-5-new"><img src="../../assets/icons/restart.svg" width="15px" class="mt-minus-3px"> {{this.total_rounds}}</div>
                                        </div>
                                    </div>
                                </div>
                            </ng-container>
                            <ng-container *ngIf="this.requestDetail?.ticket?.status == 'Approved' || this.requestDetail?.ticket?.status == 'Completed'" >
                                <div class="p-10px">
                                    <div class="row">
                                        <div class="col-6" align="left">
                                            <div class="title-52 text-grey-shade2 ">Job started</div>
                                            <div class="title-5-new ">{{this.requestDetail?.ticket?.driver_ticket?.started_at | date:'shortTime'}}</div>
                                        </div>
                                        <div class="col-6" align="right">
                                            <div class="title-52 text-grey-shade2 text-right">Job total</div>
                                            <div class="title-5-new"> {{this.parseJobTotal(this.requestDetail?.ticket?.driver_ticket?.total_time)}} </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="myhr"></div>
                                <div class="p-10px">
                                    <div class="row">
                                        <div class="col-6" align="left">
                                            <div class="title-52 text-grey-shade2 ">Driver</div>
                                            <div class="title-5-new ">{{this.requestDetail?.ticket?.driver_ticket?.driver?.full_name}} </div>
                                        </div>
                                        <div class="col-6" align="right">
                                            <div class="title-52 text-grey-shade2 text-right">Driver total</div>
                                            <div class="title-5-new"> {{parseDriverTime( this.requestDetail?.ticket?.driver_ticket?.driver_hours, this.requestDetail?.ticket?.driver_ticket?.driver_minutes)}}</div>
                                        </div>
                                    </div>
                                </div>
                            </ng-container>

                        </div>


                        <!-- <div class="ticket-detail-div">
                            <div class="p-10px">
                                <div class="row">
                                    <div class="col-4">
                                        <div class="title-5">Truck name</div>
                                        <div class="title-5-new">

                                            {{this.requestDetail?.ticket?.driver_ticket?.truck?.truck_nickname}}

                                        </div>
                                    </div>
                                    <div class="col-4" align="center">
                                        <div class="title-5 text-center">No. of rounds</div>
                                        <div class="title-5-new text-center">{{this.requestDetail?.ticket?.ticket_truck_type_rounds.length}}</div>
                                    </div>
                                    <div class="col-4" align="right">
                                        <div class="title-5 text-right">Truck type</div>
                                        <div class="title-5-new">    {{this.requestDetail?.ticket?.driver_ticket?.truck?.truck_type}}
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="myhr"></div>
                            <ng-container *ngIf="this.requestDetail?.ticket?.status == 'Accepted' || this.requestDetail?.ticket?.status == 'Driving' || this.requestDetail?.ticket?.status == 'Completed'">
                                <div class="p-10px">
                                    <div class="row">
                                        <div class="col-6">
                                            <div class="title-5">Date</div>
                                            <div class="title-5-new">{{this.requestDetail?.ticket?.driver_ticket?.started_at | date:'shortDate'}}</div>
                                        </div>
                                        <div class="col-6" align="right">
                                            <div class="title-5 text-right">Time</div>
                                            <div class="title-5-new">{{this.requestDetail?.ticket?.driver_ticket?.started_at | date:'shortTime'}}</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="myhr"></div>
                                <div class="p-10px">
                                    <div class="row">
                                        <div class="col-6">
                                            <div class="title-5">Driver</div>
                                            <div class="title-5-new">{{this.requestDetail?.ticket?.driver_ticket?.driver?.full_name}} </div>
                                        </div>
                                        <div class="col-6" align="right">
                                            <div class="title-5 text-right">Truck License </div>
                                            <div class="title-5-new">{{this.requestDetail?.ticket?.driver_ticket?.truck?.truck_license_plate}}</div>
                                        </div>
                                    </div>
                                </div>

                            </ng-container>

                        </div> -->
                    </div>
                    <div class="tab-pane fade" id="round-detail" role="tabpanel" aria-labelledby="nav-profile-tab">

                        <div class="ticket-detail-div " *ngIf="this.requestDetail?.ticket?.status == 'Approved' || this.requestDetail?.ticket?.status == 'Completed'">

                            <div class="p-10px">
                                <div class="row">
                                    <div class="col-4">
                                        <div class="title-52 text-grey-shade2">Truck name</div>
                                        <div class="title-5-new">{{this.requestDetail?.ticket?.driver_ticket?.truck?.truck_nickname}}</div>
                                    </div>
                                    <div class="col-4" align="center">
                                        <div class="title-52 text-grey-shade2 text-center">Truck type</div>
                                        <div class="title-5-new text-center">{{this.requestDetail?.ticket?.driver_ticket?.truck?.truck_type}}</div>
                                    </div>
                                    <div class="col-4" align="right">
                                        <div class="title-52 text-grey-shade2 text-right">License plate</div>
                                        <div class="title-5-new">{{this.requestDetail?.ticket?.driver_ticket?.truck?.truck_license_plate}}</div>
                                    </div>
                                </div>
                            </div>
                            <ng-container *ngIf="this.requestDetail?.ticket?.driver_ticket?.trailer && this.requestDetail?.ticket?.driver_ticket?.trailer?.trailer_nickname">

                                <div class="myhr"></div>
                                <div class="p-10px">
                                    <div class="row">
                                        <div class="col-4">
                                            <div class="title-52 text-grey-shade2">Trailer name</div>
                                            <div class="title-5-new">{{this.requestDetail?.ticket?.driver_ticket?.trailer?.trailer_nickname}}</div>
                                        </div>
                                        <div class="col-4" align="center">
                                            <div class="title-52 text-grey-shade2 text-center">Trailer type</div>
                                            <div class="title-5-new text-center">{{this.requestDetail?.ticket?.driver_ticket?.trailer?.trailer_type}}</div>
                                        </div>
                                        <div class="col-4" align="right">
                                            <div class="title-52 text-grey-shade2 text-right">License plate</div>
                                            <div class="title-5-new">{{this.requestDetail?.ticket?.driver_ticket?.trailer?.trailer_license_plate}}</div>
                                        </div>
                                    </div>
                                </div>
                            </ng-container>

                            <div class="myhr"></div>

                            <div class="p-10px">
                                <div class="row">

                                    <div class="col-4" >
                                        <div class="title-52 text-grey-shade2">Job started</div>
                                        <div class="title-5-new">{{this.requestDetail?.ticket?.driver_ticket?.started_at | date:'shortTime'}}</div>
                                    </div>
                                    <div class="col-4" align="center">
                                        <div class="title-52 text-grey-shade2 text-center">Rounds</div>
                                        <div class="title-5-new text-center"><img src="../../assets/icons/restart.svg" width="15px" class="mt-minus-3px"> {{this.total_rounds}}</div>
                                    </div>
                                    <div class="col-4" align="right">
                                        <div class="title-52 text-grey-shade2 text-right">Job total</div>
                                        <div class="title-5-new text-right">{{this.parseJobTotal2(this.requestDetail?.ticket?.driver_ticket?.total_time)}}</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <br>
                        <ng-container *ngFor="let round of (this.requestDetail?.ticket?.ticket_truck_type_rounds.length>0 ? this.requestDetail?.ticket?.ticket_truck_type_rounds: (this.requestDetail?.ticket_truck_type?.ticket_truck_type_rounds ? this.requestDetail?.ticket_truck_type?.ticket_truck_type_rounds : []) )">

                            <ng-container *ngIf="(
                                this.requestDetail?.ticket?.status != 'Completed' &&
                                this.requestDetail?.ticket?.status != 'Approved'
                            ) || (
                                (this.requestDetail?.ticket?.status == 'Completed' ||
                                this.requestDetail?.ticket?.status == 'Approved') &&
                                round.driver_start_time  &&
                                round.round_time
                            )">
                                <div [class]="this.requestDetail?.ticket?.status == 'Driving' && round.driver_start_time !='' && round.driver_start_time && round.driver_start_time !=null && (round.end_time=='' || !round.end_time || round.end_time == null) ? 'title-5 mybtn bg-dark-yellow  width-fit-content btn-text-very-small2 text-white':'title-5'" >Round {{round.round_no}}</div>
                                <div class="ticket-detail-div mb-16">
                                    <div class="p-10px">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="title-52 text-grey-shade2">Material taken out</div>
                                                <div class="title-5-new">{{round.material_taken_out}}</div>
                                            </div>
                                            <div class="col-md-6" align="right">
                                                <div class="title-52 text-grey-shade2 text-right">Dump site</div>
                                                <div class="title-5-new">{{round.dump_site}}</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="myhr"></div>
                                    <div class="p-10px">
                                        <div class="row">
                                            <div class="col-6">
                                                <div class="title-52 text-grey-shade2">Round started</div>
                                                <div class="title-5-new">{{round.driver_start_time| date:'shortTime'}}</div>
                                            </div>
                                            <div class="col-6" align="right">
                                                <div class="title-52 text-grey-shade2 text-right">Round total</div>
                                                <div class="title-5-new text-right">{{round.round_time && round.round_time !==null ? round.round_time+'m':''}}</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="myhr"></div>
                                    <div class="p-10px">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="title-52 text-grey-shade2">Notes :</div>
                                                <div class="title-5-new">{{round?.driver_notes}}</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <br>
                            </ng-container>

                        </ng-container>
                        <div class="" *ngIf="this.requestDetail?.ticket?.status == 'Approved' || this.requestDetail?.ticket?.status == 'Completed'">
                            <br>
                            <div class="p-10px ">
                                <div class="row">
                                    <div class="col-4">
                                        <div class="title-52 text-grey-shade2">Driver Total</div>
                                        <div class="title-5-new">
                                            <b>
                                                {{parseDriverTime( this.requestDetail?.ticket?.driver_ticket?.driver_hours, this.requestDetail?.ticket?.driver_ticket?.driver_minutes)}}
                                            </b></div>
                                    </div>
                                    <div class="col-8 ticket-detail-div min-height-50" >
                                        <div class="title-52 text-grey-shade2 pt-1">Driver Notes: </div>
                                        <div class="title-5-new">{{this.requestDetail?.ticket?.driver_ticket?.notes_for_approver}}</div>
                                    </div>

                                </div>
                            </div>
                            <div class="myhr"></div>
                            <div class="p-10px">
                                <div class="row">
                                    <div class="col-4">
                                        <div class="title-52 text-grey-shade2">Approved hours</div>
                                        <div class="title-5-new"> <b *ngIf="this.requestDetail?.ticket?.status == 'Completed'">
                                            Waiting for {{this.requestDetail?.approver?.full_name}}
                                        </b>
                                        <b *ngIf="this.requestDetail?.ticket?.status == 'Approved'">
                                            <span *ngIf="this.requestDetail?.ticket?.status == 'Approved' && this.requestDetail?.ticket?.driver_ticket?.approver_time !=''">
                                                {{this.requestDetail?.ticket?.driver_ticket?.approver_time ? parseHour(this.requestDetail?.ticket?.driver_ticket?.approver_time): ''}}
                                            </span>

                                            <span *ngIf="this.requestDetail?.ticket?.status == 'Approved' && (this.requestDetail?.ticket?.driver_ticket?.approver_time =='' || this.requestDetail?.ticket?.driver_ticket?.approver_time =='null' || this.requestDetail?.ticket?.driver_ticket?.approver_time ==null)">
                                                {{parseDriverTime( this.requestDetail?.ticket?.driver_ticket?.driver_hours, this.requestDetail?.ticket?.driver_ticket?.driver_minutes)}}
                                            </span>
                                        </b>
                                    </div>
                                    </div>
                                    <div class="col-8 ticket-detail-div min-height-50" >
                                        <div class="title-52 text-grey-shade2 pt-1">Notes From Approver:</div>
                                        <div class="title-5-new"> {{this.requestDetail?.ticket?.driver_ticket?.approver_notes}}</div>
                                    </div>

                                </div>
                            </div>


                        </div>
                        <ng-container *ngIf="this.requestDetail?.ticket?.ticket_truck_type_rounds && this.requestDetail?.ticket?.ticket_truck_type_rounds.length<1">
                            <div class="ticket-detail-div">
                                <div class="p-10px">

                                    <div class="row">
                                        <div class="col-12">
                                            <b class="p-3">
                                                No rounds
                                            </b>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </ng-container>
                    </div>
                </div>
                <div class="tab-content" id="nav-tabContent" *ngIf="this.requestDetail?.tc_ticket && this.requestDetail?.tc_ticket=='YES'">
                    <div class="tab-pane fade show active" id="ticket-detail" role="tabpanel" aria-labelledby="nav-home-tab">
                        <div class="ticket-detail-div bg-white" *ngIf="this.requestDetail?.ticket.status == 'Cancelled'">
                            <div class="p-10px">
                                <div class="row">
                                    <div class="col-6">
                                        <div class="title-5">Cancelled by</div>
                                        <div class="title-5-new">{{this.requestDetail?.ticket && this.requestDetail?.ticket?.cancelled_by ? this.requestDetail?.ticket?.cancelled_by.full_name:''}}  </div>
                                    </div>
                                    <div class="col-6">

                                    </div>
                                </div>

                            </div>
                            <div class="myhr"></div>
                            <div class="p-10px">
                                <div class="row">
                                    <div class="col-12">
                                        <div class="title-5">Reason for cancellation</div>
                                        <div class="title-5-new">{{this.requestDetail?.ticket && this.requestDetail?.ticket?.cancel_reason ? this.requestDetail?.ticket?.cancel_reason:''}}</div>
                                    </div>

                                </div>

                            </div>

                        </div>
                        <div class="ticket-detail-div bg-light-yellow2 no-border" >
                            <div class="p-10px">
                                <div class="row">
                                    <div class="col-6">
                                        <div class="mb-8"></div>
                                        <div class="title-1 text-black-shade2">{{this.requestDetail?.ticket?.customer ? this.requestDetail?.ticket?.customer?.company_name : this.requestDetail?.ticket?.tc_customer?.company_name}}</div>
                                    </div>
                                    <div class="col-6" align="right">
                                        <div class="title-52 text-grey-shade2 text-right">Project</div>
                                        <div class="title-5-new">{{this.requestDetail.ticket?.project ? this.requestDetail.ticket?.project?.project_name: this.requestDetail.ticket?.tc_project?.project_name}}</div>
                                    </div>
                                </div>
                            </div>

                            <div class="myhr"></div>
                            <div class="p-10px">
                                <div class="row">
                                    <div class="col-6">
                                        <div class="title-52 text-grey-shade2">Job number</div>
                                        <div class="title-5-new">{{this.requestDetail?.ticket?.project ? this.requestDetail.ticket?.project?.job_number: this.requestDetail?.ticket?.tc_project?.job_number}}</div>
                                    </div>
                                    <div class="col-6" align="right">
                                        <div class="title-5 text-grey-shade2 text-right">Project address</div>
                                        <div class="title-5-new">{{this.requestDetail.ticket?.project ? this.requestDetail.ticket?.project?.project_location: this.requestDetail.ticket?.tc_project?.project_location}}</div>
                                    </div>
                                </div>
                            </div>
                            <div class="myhr"></div>
                            <div class="p-10px">
                                <div class="row">
                                    <div class="col-6">
                                        <div class="title-52 text-grey-shade2">Job Approver</div>
                                        <div class="title-5-new">{{this.requestDetail?.ticket?.approver ? this.requestDetail?.ticket?.approver?.full_name:this.requestDetail?.ticket?.tc_approver?.full_name}} </div>
                                    </div>
                                    <div class="col-6" >
                                        <div *ngIf="this.requestDetail?.ticket?.status == 'Accepted'">

                                        </div>
                                        <div *ngIf="this.requestDetail?.ticket?.status == 'Approved'">
                                            <div class="title-5 text-right">Approved: Date / Time / Rate</div>
                                            <div class="title-5-new text-right">{{this.requestDetail?.ticket?.driver_ticket?.approved_at | date:'shortDate'}} / {{this.requestDetail?.ticket?.driver_ticket?.approved_at | date:'shortTime'}} / {{this.requestDetail?.rate_per_hour ? '$'+this.requestDetail?.rate_per_hour : ''}}</div>
                                        </div>
                                        <div *ngIf=" this.requestDetail?.ticket?.status != 'Approved'  && ((this.requestDetail?.dispatch_by?.id == this.loggedinUser.id))">
                                            <div class="title-5 text-right">Hour Rate</div>
                                            <div class="title-5-new text-right">
                                                {{this.requestDetail?.rate_per_hour ?  '$'+this.requestDetail?.rate_per_hour : ''}}/hr
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div *ngIf="this.requestDetail?.dispatch_by && this.requestDetail?.dispatch_by?.id == this.requestDetail?.ticket?.trucking_company_id" >
                                <div class="myhr"></div>
                                    <div class="p-10px">
                                        <div class="row">
                                            <div class="col-6">
                                                <div class="title-52 text-grey-shade2">Dispatcher</div>
                                                <div class="title-5-new">{{this.requestDetail?.dispatch_by?.full_name}} </div>
                                            </div>
                                            <div class="col-6">
                                                <div class="title-52 text-grey-shade2 text-right">Contact #</div>
                                                <div class="title-5-new text-right">{{this.requestDetail?.dispatch_by?.contact_number}}</div>
                                            </div>
                                        </div>
                                    </div>
                            </div>

                            <div class="myhr"></div>
                            <div class="p-10px">
                                <div class="row">
                                    <div class="col-12">
                                        <div class="title-5">Description</div>
                                        <div class="stats-status">{{this.requestDetail?.ticket?.description}}</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <ng-container *ngIf="this.requestDetail?.ticket?.trucking_company_requests && this.requestDetail?.ticket?.trucking_company_requests.length>0">
                            <ng-container *ngFor="let reqDetail of this.requestDetail?.ticket?.trucking_company_requests">

                                <!--Customer-->

                                <div class="ticket-detail-div bg-white" *ngIf="reqDetail.dispatch_by !== null && reqDetail.dispatch_by?.account_type !='Customer' && reqDetail.dispatch_by_id != this.user_id && reqDetail.dispatch_to_id == this.user_id " >

                                    <div class="p-10px">
                                        <div class="row">
                                            <div class="col-6">
                                                <div class="title-52 text-grey-shade2">Customer </div>
                                                <div class="title-5-new">{{reqDetail?.dispatch_by?.company_name}} </div>
                                            </div>
                                            <div class="col-6" align="right">
                                                <div class="title-52 text-grey-shade2 text-grey-shade2 text-right">Hour rate</div>
                                                <div class="title-5-new text-right">${{reqDetail?.rate_per_hour}}/hr</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="myhr"></div>
                                    <div class="p-10px">
                                        <div class="row">
                                            <div class="col-6">
                                                <div class="title-52 text-grey-shade2">Dispatcher</div>
                                                <div class="title-5-new">{{reqDetail?.dispatch_by?.full_name}} </div>
                                            </div>
                                            <div class="col-6">
                                                <div class="title-52 text-grey-shade2 text-right">Contact #</div>
                                                <div class="title-5-new text-right">{{reqDetail?.dispatch_by?.contact_number}}</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </ng-container>
                        </ng-container>
                        <ng-container *ngIf="this.requestDetail?.ticket?.trucking_company_requests && this.requestDetail?.ticket?.trucking_company_requests.length>0">
                            <ng-container *ngFor="let reqDetail of this.requestDetail?.ticket?.trucking_company_requests">

                                <!-- vendor -->
                                <div class="ticket-detail-div bg-white" *ngIf="reqDetail.id !== this.requestDetail?.id && reqDetail.dispatch_by_id == this.user_id" >
                                    <div class="p-10px">
                                        <div class="row">
                                            <div class="col-6">
                                                <div class="title-52 text-grey-shade2">Vendor</div>
                                                <div class="title-5-new">{{reqDetail?.dispatch_to?.company_name}}</div>
                                            </div>
                                            <div class="col-6" align="right">
                                                <div class="title-52 text-grey-shade2 text-grey-shade2 text-right">Hour rate</div>
                                                <div class="title-5-new text-right">${{reqDetail?.rate_per_hour}}/hr</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="myhr"></div>
                                    <div class="p-10px">
                                        <div class="row">
                                            <div class="col-6">
                                                <div class="title-52 text-grey-shade2">Accepted by:</div>
                                                <div class="title-5-new" >
                                                    <ng-container *ngIf="reqDetail?.is_accepted == 1">
                                                        {{reqDetail?.accepted_by?.full_name}}
                                                    </ng-container>
                                                </div>
                                            </div>
                                            <div class="col-6">
                                                <div class="title-52 text-grey-shade2 text-right">Contact #</div>
                                                <div class="title-5-new text-right">{{reqDetail?.accepted_by?.contact_number}}</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </ng-container>
                        </ng-container>

                        <!-- driver/truck -->
                        <div class="ticket-detail-div mybtn-back-pink no-border">

                            <!-- For Pending Status-->
                            <ng-container *ngIf="this.requestDetail?.ticket?.status == 'Pending' && !this.requestDetail?.ticket?.driver_ticket">
                                  <!-- truck detail -->
                                  <div class="p-10px">
                                    <div class="row">
                                        <div class="col-6">
                                            <div class="title-52 text-grey-shade2">Truck type</div>
                                            <div class="title-5-new">{{this.requestDetail?.ticket?.ticket_truck_type}}</div>
                                        </div>

                                        <div class="col-6" align="right">
                                            <div class="title-52 text-grey-shade2 text-right">Trailer type</div>
                                            <div class="title-5-new">{{ this.requestDetail?.ticket?.ticket_trailer_type}}</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="myhr"></div>
                                <div class="p-10px">
                                    <div class="row">
                                        <div class="col-6">
                                            <div class="title-52 text-grey-shade2">Start time</div>
                                            <div class="title-5-new"><img src="../../assets/icons/time-squar.svg" width="11px" class="mt-minus-3px" > {{this.requestDetail?.ticket?.ticket_truck_type_rounds && this.requestDetail?.ticket?.ticket_truck_type_rounds[0] ? this.requestDetail?.ticket?.ticket_truck_type_rounds[0]?.start_time :'' }}</div>
                                        </div>

                                        <div class="col-6" align="right">
                                            <div class="title-52 text-grey-shade2 text-right">Truck interval</div>
                                            <div class="title-5-new">{{this.requestDetail?.ticket?.interval_between_truck }}<img src="../../assets/icons/time-squar.svg" width="11px" class="mt-minus-3px" > </div>
                                        </div>
                                    </div>
                                </div>
                            </ng-container>


                           <!-- truck detail -->
                            <ng-container *ngIf="(this.requestDetail?.ticket?.status == 'Pending' && this.requestDetail?.ticket?.driver_ticket) || this.requestDetail?.ticket?.status == 'Accepted' || this.requestDetail?.ticket?.status == 'Driving' || this.requestDetail?.ticket?.status == 'Cancelled'" >

                                <div class="p-10px">
                                    <div class="row">
                                        <div class="col-4">
                                            <div class="title-52 text-grey-shade2">Truck name</div>
                                            <div class="title-5-new">{{this.requestDetail?.ticket?.driver_ticket?.truck?.truck_nickname}}</div>
                                        </div>
                                        <div class="col-4" align="center">
                                            <div class="title-52 text-grey-shade2 text-center">Truck type</div>
                                            <div class="title-5-new text-center">{{this.requestDetail?.ticket?.driver_ticket?.truck?.truck_type}}</div>
                                        </div>
                                        <div class="col-4" align="right">
                                            <div class="title-52 text-grey-shade2 text-right">License plate</div>
                                            <div class="title-5-new">{{this.requestDetail?.ticket?.driver_ticket?.truck?.truck_license_plate}}</div>
                                        </div>
                                    </div>
                                </div>
                                <ng-container *ngIf="this.requestDetail?.ticket?.driver_ticket?.trailer && this.requestDetail?.ticket?.driver_ticket?.trailer?.trailer_nickname">

                                    <div class="myhr"></div>
                                    <div class="p-10px" >
                                        <div class="row">
                                            <div class="col-4">
                                                <div class="title-52 text-grey-shade2">Trailer name</div>
                                                <div class="title-5-new">{{this.requestDetail?.ticket?.driver_ticket?.trailer?.trailer_nickname}}</div>
                                            </div>
                                            <div class="col-4" align="center">
                                                <div class="title-52 text-grey-shade2 text-center">Trailer type</div>
                                                <div class="title-5-new text-center">{{this.requestDetail?.ticket?.driver_ticket?.trailer?.trailer_type}}</div>
                                            </div>
                                            <div class="col-4" align="right">
                                                <div class="title-52 text-grey-shade2 text-right">License plate</div>
                                                <div class="title-5-new">{{this.requestDetail?.ticket?.driver_ticket?.trailer?.trailer_license_plate}}</div>
                                            </div>
                                        </div>
                                    </div>
                                </ng-container>


                                <!-- driver detail -->
                                <div class="myhr"></div>
                                <div class="p-10px">
                                    <div class="row">
                                        <div class="col-4">
                                            <div class="title-52 text-grey-shade2">Driver</div>
                                            <div class="title-5-new">{{this.requestDetail?.ticket?.driver_ticket?.driver?.full_name}} </div>
                                        </div>
                                        <div class="col-4" align="center">
                                            <div class="title-52 text-grey-shade2 text-center">{{this.requestDetail?.ticket?.status == 'Driving' ? 'Job started' : 'Start time'}}</div>
                                            <div class="title-5-new text-center" *ngIf="this.requestDetail?.ticket?.status == 'Accepted' || (this.requestDetail?.ticket?.status == 'Pending' && this.requestDetail?.ticket?.driver_ticket) ">
                                                <img src="../../assets/icons/time-squar.svg" width="11px" class="mt-minus-3px" > {{this.requestDetail?.ticket?.ticket_time}}
                                            </div>
                                            <div class="title-5-new text-center" *ngIf="this.requestDetail?.ticket?.status == 'Driving'">
                                                <img src="../../assets/icons/time-squar.svg" width="11px" class="mt-minus-3px" > {{this.requestDetail?.ticket?.driver_ticket?.started_at | date:'shortTime'}}
                                            </div>
                                        </div>
                                        <div class="col-4" align="right">
                                            <div class="title-52 text-grey-shade2 text-right">Rounds</div>
                                            <div class="title-5-new"><img src="../../assets/icons/restart.svg" width="15px" class="mt-minus-3px"> {{this.total_rounds}}</div>
                                        </div>
                                    </div>
                                </div>
                            </ng-container>
                            <ng-container *ngIf="this.requestDetail?.ticket?.status == 'Approved' || this.requestDetail?.ticket?.status == 'Completed'" >
                                <div class="p-10px">
                                    <div class="row">
                                        <div class="col-6" align="left">
                                            <div class="title-52 text-grey-shade2 ">Job started</div>
                                            <div class="title-5-new ">{{this.requestDetail?.ticket?.driver_ticket?.started_at | date:'shortTime'}}</div>
                                        </div>
                                        <div class="col-6" align="right">
                                            <div class="title-52 text-grey-shade2 text-right">Job total</div>
                                            <div class="title-5-new"> {{this.parseJobTotal(this.requestDetail?.ticket?.driver_ticket?.total_time)}} </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="myhr"></div>
                                <div class="p-10px">
                                    <div class="row">
                                        <div class="col-6" align="left">
                                            <div class="title-52 text-grey-shade2 ">Driver</div>
                                            <div class="title-5-new ">{{this.requestDetail?.ticket?.driver_ticket?.driver?.full_name}} </div>
                                        </div>
                                        <div class="col-6" align="right">
                                            <div class="title-52 text-grey-shade2 text-right">Driver total</div>
                                            <div class="title-5-new"> {{parseDriverTime( this.requestDetail?.ticket?.driver_ticket?.driver_hours, this.requestDetail?.ticket?.driver_ticket?.driver_minutes)}}</div>
                                        </div>
                                    </div>
                                </div>
                            </ng-container>

                        </div>


                        <!-- <div class="ticket-detail-div">
                            <div class="p-10px">
                                <div class="row">
                                    <div class="col-4">
                                        <div class="title-5">Truck name</div>
                                        <div class="title-5-new">

                                            {{this.requestDetail?.ticket?.driver_ticket?.truck?.truck_nickname}}

                                        </div>
                                    </div>
                                    <div class="col-4" align="center">
                                        <div class="title-5 text-center">No. of rounds</div>
                                        <div class="title-5-new text-center">{{this.requestDetail?.ticket?.ticket_truck_type_rounds.length}}</div>
                                    </div>
                                    <div class="col-4" align="right">
                                        <div class="title-5 text-right">Truck type</div>
                                        <div class="title-5-new">    {{this.requestDetail?.ticket?.driver_ticket?.truck?.truck_type}}
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="myhr"></div>
                            <ng-container *ngIf="this.requestDetail?.ticket?.status == 'Accepted' || this.requestDetail?.ticket?.status == 'Driving' || this.requestDetail?.ticket?.status == 'Completed'">
                                <div class="p-10px">
                                    <div class="row">
                                        <div class="col-6">
                                            <div class="title-5">Date</div>
                                            <div class="title-5-new">{{this.requestDetail?.ticket?.driver_ticket?.started_at | date:'shortDate'}}</div>
                                        </div>
                                        <div class="col-6" align="right">
                                            <div class="title-5 text-right">Time</div>
                                            <div class="title-5-new">{{this.requestDetail?.ticket?.driver_ticket?.started_at | date:'shortTime'}}</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="myhr"></div>
                                <div class="p-10px">
                                    <div class="row">
                                        <div class="col-6">
                                            <div class="title-5">Driver</div>
                                            <div class="title-5-new">{{this.requestDetail?.ticket?.driver_ticket?.driver?.full_name}} </div>
                                        </div>
                                        <div class="col-6" align="right">
                                            <div class="title-5 text-right">Truck License </div>
                                            <div class="title-5-new">{{this.requestDetail?.ticket?.driver_ticket?.truck?.truck_license_plate}}</div>
                                        </div>
                                    </div>
                                </div>

                            </ng-container>

                        </div> -->
                    </div>
                    <div class="tab-pane fade" id="round-detail" role="tabpanel" aria-labelledby="nav-profile-tab">

                        <div class="ticket-detail-div " *ngIf="this.requestDetail?.ticket?.status == 'Approved' || this.requestDetail?.ticket?.status == 'Completed'">

                            <div class="p-10px">
                                <div class="row">
                                    <div class="col-4">
                                        <div class="title-52 text-grey-shade2">Truck name</div>
                                        <div class="title-5-new">{{this.requestDetail?.ticket?.driver_ticket?.truck?.truck_nickname}}</div>
                                    </div>
                                    <div class="col-4" align="center">
                                        <div class="title-52 text-grey-shade2 text-center">Truck type</div>
                                        <div class="title-5-new text-center">{{this.requestDetail?.ticket?.driver_ticket?.truck?.truck_type}}</div>
                                    </div>
                                    <div class="col-4" align="right">
                                        <div class="title-52 text-grey-shade2 text-right">License plate</div>
                                        <div class="title-5-new">{{this.requestDetail?.ticket?.driver_ticket?.truck?.truck_license_plate}}</div>
                                    </div>
                                </div>
                            </div>
                            <ng-container *ngIf="this.requestDetail?.ticket?.driver_ticket?.trailer && this.requestDetail?.ticket?.driver_ticket?.trailer?.trailer_nickname">

                                <div class="myhr"></div>
                                <div class="p-10px">
                                    <div class="row">
                                        <div class="col-4">
                                            <div class="title-52 text-grey-shade2">Trailer name</div>
                                            <div class="title-5-new">{{this.requestDetail?.ticket?.driver_ticket?.trailer?.trailer_nickname}}</div>
                                        </div>
                                        <div class="col-4" align="center">
                                            <div class="title-52 text-grey-shade2 text-center">Trailer type</div>
                                            <div class="title-5-new text-center">{{this.requestDetail?.ticket?.driver_ticket?.trailer?.trailer_type}}</div>
                                        </div>
                                        <div class="col-4" align="right">
                                            <div class="title-52 text-grey-shade2 text-right">License plate</div>
                                            <div class="title-5-new">{{this.requestDetail?.ticket?.driver_ticket?.trailer?.trailer_license_plate}}</div>
                                        </div>
                                    </div>
                                </div>
                            </ng-container>

                            <div class="myhr"></div>

                            <div class="p-10px">
                                <div class="row">

                                    <div class="col-4" >
                                        <div class="title-52 text-grey-shade2">Job started</div>
                                        <div class="title-5-new">{{this.requestDetail?.ticket?.driver_ticket?.started_at | date:'shortTime'}}</div>
                                    </div>
                                    <div class="col-4" align="center">
                                        <div class="title-52 text-grey-shade2 text-center">Rounds</div>
                                        <div class="title-5-new text-center"><img src="../../assets/icons/restart.svg" width="15px" class="mt-minus-3px"> {{this.total_rounds}}</div>
                                    </div>
                                    <div class="col-4" align="right">
                                        <div class="title-52 text-grey-shade2 text-right">Job total</div>
                                        <div class="title-5-new text-right">{{this.parseJobTotal2(this.requestDetail?.ticket?.driver_ticket?.total_time)}}</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <br>

                      <br />
                        <ng-container *ngFor="let round of (this.requestDetail?.ticket?.ticket_truck_type_rounds.length>0 ? this.requestDetail?.ticket?.ticket_truck_type_rounds: (this.requestDetail?.ticket_truck_type?.ticket_truck_type_rounds ? this.requestDetail?.ticket_truck_type?.ticket_truck_type_rounds : []) )">

                            <ng-container *ngIf="(
                                this.requestDetail?.ticket?.status != 'Completed' &&
                                this.requestDetail?.ticket?.status != 'Approved'
                            ) || (
                                (this.requestDetail?.ticket?.status == 'Completed' ||
                                this.requestDetail?.ticket?.status == 'Approved') &&
                                round.driver_start_time  &&
                                round.round_time
                            )">
                                <div [class]="this.requestDetail?.ticket?.status == 'Driving' && round.driver_start_time !='' && round.driver_start_time && round.driver_start_time !=null && (round.end_time=='' || !round.end_time || round.end_time == null) ? 'title-5 mybtn bg-dark-yellow  width-fit-content btn-text-very-small2 text-white':'title-5'" >Round {{round.round_no}}</div>
                                <div class="ticket-detail-div mb-16">
                                    <div class="p-10px">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="title-52 text-grey-shade2">Material taken out</div>
                                                <div class="title-5-new">{{round.material_taken_out}}</div>
                                            </div>
                                            <div class="col-md-6" align="right">
                                                <div class="title-52 text-grey-shade2 text-right">Dump site</div>
                                                <div class="title-5-new">{{round.dump_site}}</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="myhr"></div>
                                    <div class="p-10px">
                                        <div class="row">
                                            <div class="col-6">
                                                <div class="title-52 text-grey-shade2">Round started</div>
                                                <div class="title-5-new">{{round.driver_start_time| date:'shortTime'}}</div>
                                            </div>
                                            <div class="col-6" align="right">
                                                <div class="title-52 text-grey-shade2 text-right">Round total</div>
                                                <div class="title-5-new text-right">{{round.round_time && round.round_time !==null ? round.round_time+'m':''}}</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="myhr"></div>
                                    <div class="p-10px">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="title-52 text-grey-shade2">Notes :</div>
                                                <div class="title-5-new">{{round?.driver_notes}}</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <br>
                            </ng-container>

                        </ng-container>
                        <div class="" *ngIf="this.requestDetail?.ticket?.status == 'Approved' || (this.requestDetail?.ticket?.status == 'Completed'  && !(this.requestDetail?.ticket?.approver_id == this.loggedinUser.id ))">
                            <br>
                            <div class="p-10px ">
                                <div class="row">
                                    <div class="col-4">
                                        <div class="title-52 text-grey-shade2">Driver Total</div>
                                        <div class="title-5-new">
                                            <b>
                                                {{parseDriverTime( this.requestDetail?.ticket?.driver_ticket?.driver_hours, this.requestDetail?.ticket?.driver_ticket?.driver_minutes)}}
                                            </b></div>
                                    </div>
                                    <div class="col-8 ticket-detail-div min-height-50" >
                                        <div class="title-52 text-grey-shade2 pt-1">Driver Notes: </div>
                                        <div class="title-5-new">{{this.requestDetail?.ticket?.driver_ticket?.notes_for_approver}}</div>
                                    </div>

                                </div>
                            </div>
                            <div class="myhr"></div>
                            <div class="p-10px">
                                <div class="row">
                                    <div class="col-4">
                                        <div class="title-52 text-grey-shade2">Approved hours</div>
                                        <div class="title-5-new"> <b *ngIf="this.requestDetail?.ticket?.status == 'Completed'">
                                            Waiting for {{this.requestDetail?.approver?this.requestDetail?.approver?.full_name:this.requestDetail?.tc_approver?.full_name}}
                                        </b>
                                        <b *ngIf="this.requestDetail?.ticket?.status == 'Approved'">
                                            <span *ngIf="this.requestDetail?.ticket?.status == 'Approved' && this.requestDetail?.ticket?.driver_ticket?.approver_time !=''">
                                                {{this.requestDetail?.ticket?.driver_ticket?.approver_time ? parseHour(this.requestDetail?.ticket?.driver_ticket?.approver_time): ''}}
                                            </span>

                                            <span *ngIf="this.requestDetail?.ticket?.status == 'Approved' && (this.requestDetail?.ticket?.driver_ticket?.approver_time =='' || this.requestDetail?.ticket?.driver_ticket?.approver_time =='null' || this.requestDetail?.ticket?.driver_ticket?.approver_time ==null)">
                                                {{parseDriverTime( this.requestDetail?.ticket?.driver_ticket?.driver_hours, this.requestDetail?.ticket?.driver_ticket?.driver_minutes)}}
                                            </span>
                                        </b>
                                    </div>
                                    </div>
                                    <div class="col-8 ticket-detail-div min-height-50" >
                                        <div class="title-52 text-grey-shade2 pt-1">Notes From Approver:</div>
                                        <div class="title-5-new"> {{this.requestDetail?.ticket?.driver_ticket?.approver_notes}}</div>
                                    </div>

                                </div>
                            </div>


                        </div>
                        <ng-container *ngIf="this.requestDetail?.ticket?.ticket_truck_type_rounds && this.requestDetail?.ticket?.ticket_truck_type_rounds.length<1">
                            <div class="ticket-detail-div">
                                <div class="p-10px">

                                    <div class="row">
                                        <div class="col-12">
                                            <b class="p-3">
                                                No rounds
                                            </b>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </ng-container>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade  come-from-modal right" id="myModalGetCamera" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content modal-image">
            <div class="modal-body">
                <div class="d-flex justify-content-between align-items-center mb-17">
                    <div class="d-flex align-items-center">
                        <input type="checkbox" name="" [checked]="this.loggedinUser?.open_paper_ticket_photo=='YES'?true:false" id="" value="1" (change)="checkOpenTicketPhoto($event)">
                        <div class="title-5-new4 ml-15">Open as defaut option</div>
                    </div>

                    <div class="d-flex align-items-center">
                        <div>
                            <img src="../../assets/icons/camera-grey.png" alt="">
                        </div>
                        <div class="div-4 ml-15">
                            <img src="../../assets/icons/arrow-right-blue.png" alt="" data-dismiss="modal">
                        </div>
                    </div>
                </div>
                <img [src]="this.paperImageURL+this.requestDetail?.ticket?.paper_ticket_photo" alt=""  width="100%">
            </div>
        </div>
    </div>
</div>
