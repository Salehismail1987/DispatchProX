<div class="wrapper">
  <app-dashboard-header [active_menu]="this.active_menu"></app-dashboard-header>
  <div id="content">
    <app-dashboard-top-header></app-dashboard-top-header>
    <div class="body-content">
      <div class="setting-content-page border-div inner_main_shadow">
        <div class="row">
          <div class="col-lg-7">

            <div class="d-flex align-items-center mb-21">
              <svg width="23" height="25" viewBox="0 0 23 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M14.9332 9.93299C14.9332 11.8292 13.396 13.3664 11.4998 13.3664C9.60366 13.3664 8.0665 11.8292 8.0665 9.93299C8.0665 8.03678 9.60366 6.49961 11.4998 6.49961C13.396 6.49961 14.9332 8.03678 14.9332 9.93299Z" stroke="black" stroke-width="0.8"/>
                <rect x="1" y="4.0332" width="21" height="19.4669" rx="2" stroke="black" stroke-width="2"/>
                <path d="M4.59961 8.07227V1.50091" stroke="black" stroke-width="1.5" stroke-linecap="round"/>
                <path d="M18.4004 8.07227V1.50091" stroke="black" stroke-width="1.5" stroke-linecap="round"/>
                <path d="M3.06641 13.7656H6.89974" stroke="black" stroke-width="1.5" stroke-linecap="round"/>
                <path d="M10.7334 7.63281L11.6425 10.3437L13.4504 11.2507" stroke="black" stroke-linecap="round"/>
                <path d="M15.333 13.7656H19.1663" stroke="black" stroke-width="1.5" stroke-linecap="round"/>
                <path d="M3.06641 16.834H6.89974" stroke="black" stroke-width="1.5" stroke-linecap="round"/>
                <path d="M9.2002 16.834H13.0335" stroke="black" stroke-width="1.5" stroke-linecap="round"/>
                <path d="M15.333 16.834H19.1663" stroke="black" stroke-width="1.5" stroke-linecap="round"/>
                <path d="M3.06641 19.9004H6.89974" stroke="black" stroke-width="1.5" stroke-linecap="round"/>
                <path d="M9.2002 19.9004H13.0335" stroke="black" stroke-width="1.5" stroke-linecap="round"/>
                <path d="M15.333 19.9004H19.1663" stroke="black" stroke-width="1.5" stroke-linecap="round"/>
                </svg>

                <div class="title-8-2 ml-2 " >Job Schedule</div>
            </div>
          </div>

          <!-- <div class="col-md-3">
                        <div class="position-relative">
                            <label class="field text-field">
                                <input class="field__input height-43px" placeholder="Search" (change)="searchBy(searchby.value)"  type="text" [(ngModel)]="this.search_by" #searchby>
                                <span class="field__label-wrap">
                                <span class="field__label field__label2">Search tickets</span>
                                </span>
                            </label>
                            <div class="topright">
                                <img src="../assets/icons/search.svg" style="margin-top: -13px;
                                width: 17px;" (click)="searchBy(searchby.value)">
                            </div>
                        </div>
                    </div> -->

          <div class="col-lg-1"></div>
          <div class="col-lg-4" align="right">
            <button
              class="mybtn2 mybtn-back-pink"
              (click)="getDataCreateTicket()"
              data-toggle="modal"
              data-target="#myModalCreateTicket"
            >
              Create a ticket
            </button>
          </div>
        </div>

        <div class="break-div mb-21"></div>

        <!-- <div class="row">
          <div class="col-lg-4 col-md-6">
            <label class="field text-field">
              <input
                class="field__input height-43px"
                placeholder=""
                (change)="changeDate($event)"
                type="month"
              />
              <span class="field__label-wrap">
                <span class="field__label field__label2">Sort by month</span>
              </span>
            </label>
          </div>
          <div class="col-lg-3 col-md-6">

          </div>

        </div> -->
        <div class="row">
          <div class="col-lg-2">
            <div class="title-8-2  " >Ticket status</div>
            <div class="title-7-1">Click for details</div>
          </div>
          <div class="col-lg-3">
            <label class="field text-field">
              <select
                class="field__input icon-none"
                (ngModel)="(this.project_id)"
                (change)="onProjectChange($event)"
              >
                <option value="">Select</option>
                <option
                  *ngFor="let item of this.projects_list"
                  [value]="item.id"
                >
                  {{ item.project_name }}
                </option>
              </select>
              <i
                class="fa fa-caret-down input-icon-right"
                aria-hidden="true"
              ></i>
              <span class="field__label-wrap">
                <span class="field__label">Filter by project</span>
              </span>
            </label>
          </div>
          <div class="col-lg-5">
            <div class="legend-div mb-10px">
              <div class="text-center label-legend">
                Legend
              </div>
              <div class="d-flex align-items-center justify-content-center">
                <div class="legend-item bg-pending  text-black cursor-pointer" (click)="filterByStatus('Pending')">
                  Pending
                </div>
                <div class="legend-item bg-accepted text-black  cursor-pointer" (click)="filterByStatus('Accepted')">
                  Accepted
                </div>
                <div class="legend-item bg-inprogress text-white  cursor-pointer" (click)="filterByStatus('Driving')">
                  Driving
                </div>
                <div class="legend-item bg-completed text-white  cursor-pointer"  (click)="filterByStatus('Completed')">
                  Completed
                </div>
                <div class="legend-item bg-approved text-white  cursor-pointer" (click)="filterByStatus('Approved')">
                  Approved
                </div>
              </div>
            </div>
          </div>
          <div class="col-lg-1"></div>
        </div>
        <div class="d-flex align-items-center justify-content-center">
          <div
            id="pnlEventCalendar"

            class="driver-desktop"
            (click)="getVal()"
          ></div>
          <div id="jobs-data" style="display: none">
            {{ this.datejobs | json }}
          </div>
        </div>

      </div>
    </div>
  </div>
</div>
<div
  class="modal fade come-from-modal right"
  id="myModalCancelled"
  tabindex="-1"
  role="dialog"
  aria-labelledby="myModalLabel"
>
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-body modal-body-padding">
        <div class="d-flex justify-content-between align-items-center">
          <div>
            <div class="welcome-text">Ticket IDs</div>
            <div class="dashboard-title">
              {{ this.ticket_detail?.ticket?.ticket_no }}
            </div>
          </div>
          <div>
            <img
              *ngIf="
                this.ticket_detail?.ticket?.required_paper_ticket_id == 'YES'
              "
              src="../assets/icons/driver-paperticket-icon.svg"
              height="20"
              class="mr-1"
            />
            <button
              class="mybtn mybtn-back-red width-fit-content btn-text-very-small2 text-color-white"
            >
              Cancelled
            </button>
          </div>
        </div>
        <br />

        <div class="row">
          <div class="col-md-9">
            <nav>
              <div
                class="nav nav-pills nav-fill ticket-tabs mb-20"
                id="nav-tab"
                role="tablist"
              >
                <a
                  class="nav-item nav-link active"
                  id="nav-home-tab"
                  data-toggle="tab"
                  href="#ticket-detail-pending"
                  role="tab"
                  aria-controls="nav-home"
                  aria-selected="true"
                  >Ticket details</a
                >
                <a
                  class="nav-item nav-link"
                  id="nav-profile-tab"
                  data-toggle="tab"
                  href="#round-detail-pending"
                  role="tab"
                  aria-controls="nav-profile"
                  aria-selected="false"
                  >Job details</a
                >
              </div>
            </nav>
          </div>
          <div class="col-md-3">
            <div align="right">
              <div class="title-5-new2">Date</div>
              <div class="title-5-new">
                {{
                  this.time_conversion(this.ticket_detail, 1).convertedDate
                    ? this.time_conversion(this.ticket_detail, 1).convertedDate
                    : this.ticket_detail?.ticket?.ticket_date
                }}
              </div>
            </div>
          </div>
        </div>
        <div class="tab-content" id="nav-tabContent">
          <div
            *ngIf="!this.ticket_detail?.tc_ticket"
            class="tab-pane fade show active"
            id="ticket-detail-pending"
            role="tabpanel"
            aria-labelledby="nav-home-tab"
          >
            <div
              class="ticket-detail-div"
              *ngIf="this.ticket_detail?.ticket?.status == 'Cancelled'"
            >
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5">Cancelled by</div>
                    <div class="title-5-new">
                      {{
                        this.ticket_detail?.ticket &&
                        this.ticket_detail?.ticket?.cancelled_by
                          ? this.ticket_detail?.ticket?.cancelled_by.full_name
                          : ""
                      }}
                    </div>
                  </div>
                  <div class="col-6"></div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-12">
                    <div class="title-5">Reason for cancellation</div>
                    <div class="title-5-new">
                      {{
                        this.ticket_detail?.ticket &&
                        this.ticket_detail?.ticket?.cancel_reason
                          ? this.ticket_detail?.ticket?.cancel_reason
                          : ""
                      }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="ticket-detail-div bg-light-yellow2">
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="mb-2"></div>
                    <div class="title-17 text-color-black-shade6">
                      {{ this.ticket_detail?.ticket?.user?.company_name }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2 text-right">Project</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.ticket?.project?.project_name }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Job number</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.ticket?.project?.job_number }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2 text-right">Project address</div>
                    <div class="title-5-new">
                      {{
                        this.ticket_detail?.ticket?.project?.project_location
                      }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Job Approver</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.ticket?.approver?.full_name }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">Contact #</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.ticket?.approver?.contact_number }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-12">
                    <div class="title-5-new2">Description</div>
                    <div class="title-11 text-color-black-shade">
                      {{ this.ticket_detail?.ticket?.description }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="ticket-detail-div">
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Trucking Company</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trucking_company?.company_name }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">
                      {{
                        this.ticket_detail?.ticket?.ticket_truck_type
                          ?.rate_type == "hour"
                          ? "Hour rate"
                          : this.ticket_detail?.ticket?.ticket_truck_type
                              ?.rate_type == "round"
                          ? "Round rate"
                          : "Hour rate"
                      }}
                    </div>
                    <div class="title-5-new">
                      <div
                        class="border-pink"
                        style="
                          border-radius: 5px;
                          text-align: right;
                          width: 90px;
                        "
                      >
                        ${{ this.ticket_detail?.rate_per_hour }}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Dispatcher</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trucking_company?.full_name }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">Contact #</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trucking_company?.contact_number }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <br />
            <!-- <div class="title-5 ">Truck details</div> -->
            <div class="ticket-detail-div mybtn-back-pink mb-29">
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Truck name</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.truck?.truck_nickname }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">Trailer Name</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.truck?.truck_nickname }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Start time</div>
                    <div class="title-5-new">
                      <img
                        src="../../assets/icons/time.svg"
                        class="mt-minus-3px"
                      />
                      {{
                        this.time_conversion(this.ticket_detail, 1)
                          .convertedTime
                          ? this.time_conversion(this.ticket_detail, 1)
                              .convertedTime
                          : this.ticket_detail?.ticket?.ticket_time
                      }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">Rounds</div>
                    <div class="title-5-new">
                      <img
                        src="../../assets/icons/restart.svg"
                        class="mt-minus-3px"
                      />
                      {{
                        this.ticket_detail?.ticket?.ticket_truck_type_rounds
                          .length
                      }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div
            *ngIf="
              this.ticket_detail?.tc_ticket &&
              this.ticket_detail?.tc_ticket == 'YES'
            "
            class="tab-pane fade show active"
            id="ticket-detail-pending"
            role="tabpanel"
            aria-labelledby="nav-home-tab"
          >
            <div
              class="ticket-detail-div"
              *ngIf="this.ticket_detail?.ticket?.status == 'Cancelled'"
            >
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5">Cancelled by</div>
                    <div class="title-5-new">
                      {{
                        this.ticket_detail?.ticket &&
                        this.ticket_detail?.ticket?.cancelled_by
                          ? this.ticket_detail?.ticket?.cancelled_by.full_name
                          : ""
                      }}
                    </div>
                  </div>
                  <div class="col-6"></div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-12">
                    <div class="title-5">Reason for cancellation</div>
                    <div class="title-5-new">
                      {{
                        this.ticket_detail?.ticket &&
                        this.ticket_detail?.ticket?.cancel_reason
                          ? this.ticket_detail?.ticket?.cancel_reason
                          : ""
                      }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="ticket-detail-div bg-light-yellow2">
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="mb-2"></div>
                    <div class="title-17 text-color-black-shade6">
                      {{
                        this.ticket_detail?.ticket?.customer
                          ? this.ticket_detail?.ticket?.customer?.company_name
                          : this.ticket_detail?.ticket?.tc_customer
                              ?.company_name
                      }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2 text-right">Project</div>
                    <div class="title-5-new">
                      {{
                        this.ticket_detail?.ticket?.project
                          ? this.ticket_detail?.ticket?.project?.project_name
                          : this.ticket_detail?.ticket?.tc_project?.project_name
                      }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Job number</div>
                    <div class="title-5-new">
                      {{
                        this.ticket_detail?.ticket?.project
                          ? this.ticket_detail?.ticket?.project?.job_number
                          : this.ticket_detail?.ticket?.tc_project?.job_number
                      }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2 text-right">Project address</div>
                    <div class="title-5-new">
                      {{
                        this.ticket_detail?.ticket?.project
                          ? this.ticket_detail?.ticket?.project
                              ?.project_location
                          : this.ticket_detail?.ticket?.tc_project
                              ?.project_location
                      }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Job Approver</div>
                    <div class="title-5-new">
                      {{
                        this.ticket_detail?.ticket?.approver
                          ? this.ticket_detail?.ticket?.approver?.full_name
                          : this.ticket_detail?.ticket?.tc_approver?.full_name
                      }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">Contact #</div>
                    <div class="title-5-new">
                      {{
                        this.ticket_detail?.ticket?.approver
                          ? this.ticket_detail?.ticket?.approver?.contact_number
                          : this.ticket_detail?.ticket?.tc_approver
                              ?.contact_number
                      }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-12">
                    <div class="title-5-new2">Description</div>
                    <div class="title-11 text-color-black-shade">
                      {{ this.ticket_detail?.ticket?.description }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="ticket-detail-div">
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Trucking Company</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trucking_company?.company_name }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">
                      {{
                        this.ticket_detail?.ticket?.ticket_truck_type
                          ?.rate_type == "hour"
                          ? "Hour rate"
                          : this.ticket_detail?.ticket?.ticket_truck_type
                              ?.rate_type == "round"
                          ? "Round rate"
                          : "Hour rate"
                      }}
                    </div>
                    <div class="title-5-new">
                      <div
                        class="border-pink"
                        style="
                          border-radius: 5px;
                          text-align: right;
                          width: 90px;
                        "
                      >
                        ${{ this.ticket_detail?.rate_per_hour }}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Dispatcher</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trucking_company?.full_name }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">Contact #</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trucking_company?.contact_number }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <br />
            <!-- <div class="title-5 ">Truck details</div> -->
            <div class="ticket-detail-div mybtn-back-pink mb-29">
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Truck name</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.truck?.truck_nickname }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">Trailer Name</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.truck?.truck_nickname }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Start time</div>
                    <div class="title-5-new">
                      <img
                        src="../../assets/icons/time.svg"
                        class="mt-minus-3px"
                      />
                      {{
                        this.time_conversion(this.ticket_detail, 1)
                          .convertedTime
                          ? this.time_conversion(this.ticket_detail, 1)
                              .convertedTime
                          : this.ticket_detail?.ticket?.ticket_time
                      }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">Rounds</div>
                    <div class="title-5-new">
                      <img
                        src="../../assets/icons/restart.svg"
                        class="mt-minus-3px"
                      />
                      {{
                        this.ticket_detail?.ticket?.ticket_truck_type_rounds
                          .length
                      }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div
            class="tab-pane fade"
            id="round-detail-pending"
            role="tabpanel"
            aria-labelledby="nav-profile-tab"
          >
            <ng-container
              *ngFor="
                let round of this.ticket_detail?.ticket
                  ?.ticket_truck_type_rounds.length > 0
                  ? this.ticket_detail?.ticket?.ticket_truck_type_rounds
                  : []
              "
            >
              <br />

              <div class="title-5">Round {{ round.round_no }}</div>
              <div class="ticket-detail-div">
                <div class="p-10px">
                  <div class="row">
                    <div class="col-md-6">
                      <div class="title-5">Material out</div>
                      <div class="title-5-new">
                        {{ round.material_taken_out }}
                      </div>
                    </div>
                    <div class="col-md-6" align="right">
                      <div class="title-5 text-right">Dump site</div>
                      <div class="title-5-new">{{ round.dump_site }}</div>
                    </div>
                  </div>
                </div>
                <div class="myhr"></div>
                <div class="p-10px">
                  <div class="row">
                    <div class="col-6">
                      <div class="title-5">Round started</div>
                      <div class="title-5-new">
                        {{ round.driver_start_time | date : "shortTime" }}
                      </div>
                    </div>
                    <div class="col-6" align="right">
                      <div class="title-5 text-right">Round total</div>
                      <div class="title-5-new text-right">
                        {{
                          round.round_time && round.round_time !== null
                            ? round.round_time + "m"
                            : ""
                        }}
                      </div>
                    </div>
                  </div>
                </div>
                <ng-container *ngIf="round?.haulback">
                  <div class="myhr"></div>
                  <div class="p-10px pt-1 grey-div">
                    <div class="row">
                      <div class="col-6">
                        <div class="title-5 text-grey-shade2 pb-1">
                          Haul back - pickup site
                        </div>
                        <div class="title-5-new">
                          {{
                            round?.haulback?.pickup_location_address
                              ? round?.haulback?.pickup_location_address
                              : round?.haulback?.pickup_location_name
                          }}
                        </div>
                      </div>
                      <div class="col-6" align="right">
                        <div class="title-5 text-grey-shade2 text-right pb-1">
                          Material in
                        </div>
                        <div class="title-5-new text-right">
                          {{ round?.haulback?.material_in }}
                        </div>
                      </div>
                    </div>
                  </div>
                </ng-container>
                <div class="myhr"></div>
                <div class="p-10px">
                  <div class="row">
                    <div class="col-md-6">
                      <ng-container *ngIf="round?.haulback">
                        <div class="title-5 text-black font-size-14 pb-1">
                          Haul back notes: {{ round?.haulback?.haulback_notes }}
                        </div>
                      </ng-container>
                      <div class="title-5 text-black font-size-14 pb-1">
                        Driver: {{ round?.driver_notes }}
                      </div>
                      <div class="title-5-new"></div>
                    </div>
                  </div>
                </div>
              </div>
              <br />
            </ng-container>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div
  class="modal fade come-from-modal right"
  id="myModalPending"
  tabindex="-1"
  role="dialog"
  aria-labelledby="myModalLabel"
>
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-body modal-body-padding">
        <div class="d-flex justify-content-between align-items-center">
          <div>
            <div class="welcome-text">Ticket IDs</div>
            <div class="dashboard-title">
              {{ this.ticket_detail?.ticket?.ticket_no }}
            </div>
          </div>
          <div>
            <img
              *ngIf="
                this.ticket_detail?.ticket?.required_paper_ticket_id == 'YES'
              "
              src="../assets/icons/driver-paperticket-icon.svg"
              height="20"
              class="mr-1"
            />
            <button
              class="mybtn bg-light-grey2 width-fit-content btn-text-very-small"
            >
              Pending
            </button>
          </div>
        </div>
        <br />

        <div class="row">
          <div class="col-md-9">
            <nav>
              <div
                class="nav nav-pills nav-fill ticket-tabs mb-20"
                id="nav-tab"
                role="tablist"
              >
                <a
                  class="nav-item nav-link active"
                  id="nav-home-tab"
                  data-toggle="tab"
                  href="#ticket-detail"
                  role="tab"
                  aria-controls="nav-home"
                  aria-selected="true"
                  >Ticket details</a
                >
                <a
                  class="nav-item nav-link"
                  id="nav-profile-tab"
                  data-toggle="tab"
                  href="#round-detail"
                  role="tab"
                  aria-controls="nav-profile"
                  aria-selected="false"
                  >Job details</a
                >
              </div>
            </nav>
          </div>
          <div class="col-md-3">
            <div align="right">
              <div class="title-5-new2">Date</div>
              <div class="title-5-new">
                {{
                  this.time_conversion(this.ticket_detail, 1).convertedDate
                    ? this.time_conversion(this.ticket_detail, 1).convertedDate
                    : this.ticket_detail?.ticket?.ticket_date
                }}
              </div>
            </div>
          </div>
        </div>
        <div class="tab-content" id="nav-tabContent">
          <div
            *ngIf="!this.ticket_detail?.tc_ticket"
            class="tab-pane fade show active"
            id="ticket-detail"
            role="tabpanel"
            aria-labelledby="nav-home-tab"
          >
            <div class="ticket-detail-div bg-light-yellow2">
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="mb-2"></div>
                    <div class="title-17 text-color-black-shade6">
                      {{ this.ticket_detail?.ticket?.user?.company_name }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2 text-right">Project</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.ticket?.project?.project_name }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Job number</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.ticket?.project?.job_number }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2 text-right">Project address</div>
                    <div class="title-5-new">
                      {{
                        this.ticket_detail?.ticket?.project?.project_location
                      }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Job Approver</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.ticket?.approver?.full_name }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">Contact #</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.ticket?.approver?.contact_number }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-12">
                    <div class="title-5-new2">Description</div>
                    <div class="title-11 text-color-black-shade">
                      {{ this.ticket_detail?.ticket?.description }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="ticket-detail-div">
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Trucking Company</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trucking_company?.company_name }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">
                      {{
                        this.ticket_detail?.ticket?.ticket_truck_type
                          ?.rate_type == "hour"
                          ? "Hour rate"
                          : this.ticket_detail?.ticket?.ticket_truck_type
                              ?.rate_type == "round"
                          ? "Round rate"
                          : "Hour rate"
                      }}
                    </div>
                    <div class="title-5-new">
                      <div
                        class="border-pink"
                        style="
                          border-radius: 5px;
                          text-align: right;
                          width: 90px;
                        "
                      >
                        ${{ this.ticket_detail?.rate_per_hour }}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Dispatcher</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trucking_company?.full_name }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">Contact #</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trucking_company?.contact_number }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <br />
            <!-- <div class="title-5 ">Truck details</div> -->
            <div class="ticket-detail-div mybtn-back-pink mb-29">
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Truck name</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.truck?.truck_nickname }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">Trailer Name</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.truck?.truck_nickname }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Start time</div>
                    <div class="title-5-new">
                      <img
                        src="../../assets/icons/time.svg"
                        class="mt-minus-3px"
                      />
                      {{
                        this.time_conversion(this.ticket_detail, 1)
                          .convertedTime
                          ? this.time_conversion(this.ticket_detail, 1)
                              .convertedTime
                          : this.ticket_detail?.ticket?.ticket_time
                      }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">Rounds</div>
                    <div class="title-5-new">
                      <img
                        src="../../assets/icons/restart.svg"
                        class="mt-minus-3px"
                      />
                      {{
                        this.ticket_detail?.ticket?.ticket_truck_type_rounds
                          .length
                      }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="d-flex justify-content-between">
              <div></div>
              <button
                class="mybtn mybtn-default mybtn-box-shadow w-auto"
                data-toggle="modal"
                data-target="#declinereasonModal"
              >
                Decline
              </button>
              <div></div>
              <button
                class="mybtn mybtn-back-pink mybtn-box-shadow w-auto"
                (click)="handleAcceptTicket(this.ticket_detail)"
              >
                Accept
              </button>
              <div></div>
            </div>
          </div>
          <div
            *ngIf="
              this.ticket_detail?.tc_ticket &&
              this.ticket_detail?.tc_ticket == 'YES'
            "
            class="tab-pane fade show active"
            id="ticket-detail"
            role="tabpanel"
            aria-labelledby="nav-home-tab"
          >
            <div class="ticket-detail-div bg-light-yellow2">
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="mb-2"></div>
                    <div class="title-17 text-color-black-shade6">
                      {{
                        this.ticket_detail?.ticket?.customer
                          ? this.ticket_detail?.ticket?.customer?.company_name
                          : this.ticket_detail?.ticket?.tc_customer
                              ?.company_name
                      }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2 text-right">Project</div>
                    <div class="title-5-new">
                      {{
                        this.ticket_detail?.ticket?.project
                          ? this.ticket_detail?.ticket?.project?.project_name
                          : this.ticket_detail?.ticket?.tc_project?.project_name
                      }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Job number</div>
                    <div class="title-5-new">
                      {{
                        this.ticket_detail?.ticket?.project
                          ? this.ticket_detail?.ticket?.project?.job_number
                          : this.ticket_detail?.ticket?.tc_project?.job_number
                      }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2 text-right">Project address</div>
                    <div class="title-5-new">
                      {{
                        this.ticket_detail?.ticket?.project
                          ? this.ticket_detail?.ticket?.project
                              ?.project_location
                          : this.ticket_detail?.ticket?.tc_project
                              ?.project_location
                      }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Job Approver</div>
                    <div class="title-5-new">
                      {{
                        this.ticket_detail?.ticket?.approver
                          ? this.ticket_detail?.ticket?.approver?.full_name
                          : this.ticket_detail?.ticket?.tc_approver?.full_name
                      }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">Contact #</div>
                    <div class="title-5-new">
                      {{
                        this.ticket_detail?.ticket?.approver
                          ? this.ticket_detail?.ticket?.approver?.contact_number
                          : this.ticket_detail?.ticket?.tc_approver
                              ?.contact_number
                      }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-12">
                    <div class="title-5-new2">Description</div>
                    <div class="title-11 text-color-black-shade">
                      {{ this.ticket_detail?.ticket?.description }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="ticket-detail-div">
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Trucking Company</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trucking_company?.company_name }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">
                      {{
                        this.ticket_detail?.ticket?.ticket_truck_type
                          ?.rate_type == "hour"
                          ? "Hour rate"
                          : this.ticket_detail?.ticket?.ticket_truck_type
                              ?.rate_type == "round"
                          ? "Round rate"
                          : "Hour rate"
                      }}
                    </div>
                    <div class="title-5-new">
                      <div
                        class="border-pink"
                        style="
                          border-radius: 5px;
                          text-align: right;
                          width: 90px;
                        "
                      >
                        ${{ this.ticket_detail?.rate_per_hour }}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Dispatcher</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trucking_company?.full_name }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">Contact #</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trucking_company?.contact_number }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <br />
            <!-- <div class="title-5 ">Truck details</div> -->
            <div class="ticket-detail-div mybtn-back-pink mb-29">
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Truck name</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.truck?.truck_nickname }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">Trailer Name</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.truck?.truck_nickname }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Start time</div>
                    <div class="title-5-new">
                      <img
                        src="../../assets/icons/time.svg"
                        class="mt-minus-3px"
                      />
                      {{
                        this.time_conversion(this.ticket_detail, 1)
                          .convertedTime
                          ? this.time_conversion(this.ticket_detail, 1)
                              .convertedTime
                          : this.ticket_detail?.ticket?.ticket_time
                      }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">Rounds</div>
                    <div class="title-5-new">
                      <img
                        src="../../assets/icons/restart.svg"
                        class="mt-minus-3px"
                      />
                      {{
                        this.ticket_detail?.ticket?.ticket_truck_type_rounds
                          .length
                      }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="d-flex justify-content-between">
              <div></div>
              <button
                class="mybtn mybtn-default mybtn-box-shadow w-auto"
                data-toggle="modal"
                data-target="#declinereasonModal"
              >
                Decline
              </button>
              <div></div>
              <button
                class="mybtn mybtn-back-pink mybtn-box-shadow w-auto"
                (click)="handleAcceptTicket(this.ticket_detail)"
              >
                Accept
              </button>
              <div></div>
            </div>
          </div>
          <div
            class="tab-pane fade"
            id="round-detail"
            role="tabpanel"
            aria-labelledby="nav-profile-tab"
          >
            <ng-container
              *ngFor="
                let round of this.ticket_detail?.ticket
                  ?.ticket_truck_type_rounds.length > 0
                  ? this.ticket_detail?.ticket?.ticket_truck_type_rounds
                  : []
              "
            >
              <br />

              <div class="title-5">Round {{ round.round_no }}</div>
              <div class="ticket-detail-div">
                <div class="p-10px">
                  <div class="row">
                    <div class="col-md-6">
                      <div class="title-5">Material out</div>
                      <div class="title-5-new">
                        {{ round.material_taken_out }}
                      </div>
                    </div>
                    <div class="col-md-6" align="right">
                      <div class="title-5 text-right">Dump site</div>
                      <div class="title-5-new">{{ round.dump_site }}</div>
                    </div>
                  </div>
                </div>
                <div class="myhr"></div>
                <div class="p-10px">
                  <div class="row">
                    <div class="col-6">
                      <div class="title-5">Round started</div>
                      <div class="title-5-new">
                        {{ round.driver_start_time | date : "shortTime" }}
                      </div>
                    </div>
                    <div class="col-6" align="right">
                      <div class="title-5 text-right">Round total</div>
                      <div class="title-5-new text-right">
                        {{
                          round.round_time && round.round_time !== null
                            ? round.round_time + "m"
                            : ""
                        }}
                      </div>
                    </div>
                  </div>
                </div>
                <ng-container *ngIf="round?.haulback">
                  <div class="myhr"></div>
                  <div class="p-10px pt-1 grey-div">
                    <div class="row">
                      <div class="col-6">
                        <div class="title-5 text-grey-shade2 pb-1">
                          Haul back - pickup site
                        </div>
                        <div class="title-5-new">
                          {{
                            round?.haulback?.pickup_location_address
                              ? round?.haulback?.pickup_location_address
                              : round?.haulback?.pickup_location_name
                          }}
                        </div>
                      </div>
                      <div class="col-6" align="right">
                        <div class="title-5 text-grey-shade2 text-right pb-1">
                          Material in
                        </div>
                        <div class="title-5-new text-right">
                          {{ round?.haulback?.material_in }}
                        </div>
                      </div>
                    </div>
                  </div>
                </ng-container>
                <div class="myhr"></div>
                <div class="p-10px">
                  <div class="row">
                    <div class="col-md-6">
                      <ng-container *ngIf="round?.haulback">
                        <div class="title-5 text-black font-size-14 pb-1">
                          Haul back notes: {{ round?.haulback?.haulback_notes }}
                        </div>
                      </ng-container>
                      <div class="title-5 text-black font-size-14 pb-1">
                        Driver: {{ round?.driver_notes }}
                      </div>
                      <div class="title-5-new"></div>
                    </div>
                  </div>
                </div>
              </div>
              <br />
            </ng-container>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div
  class="modal fade come-from-modal right"
  id="myModalAccepted"
  tabindex="-1"
  role="dialog"
  aria-labelledby="myModalLabel"
>
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-body modal-body-padding" *ngIf="!is_self_dispatched">
        <div class="d-flex justify-content-between align-items-center">
          <div>
            <div class="welcome-text">Ticket IDs</div>
            <div class="dashboard-title">
              {{ this.ticket_detail?.ticket?.ticket_no }}
            </div>
          </div>
          <div>
            <img
              *ngIf="
                this.ticket_detail?.ticket?.required_paper_ticket_id == 'YES'
              "
              src="../assets/icons/driver-paperticket-icon.svg"
              height="20"
              class="mr-1"
            />
            <button
              class="mybtn bg-light-yellow2 width-fit-content btn-text-very-small"
            >
              Accepted
            </button>
          </div>
        </div>
        <br />

        <div class="row">
          <div class="col-md-9">
            <nav>
              <div
                class="nav nav-pills nav-fill ticket-tabs mb-20"
                id="nav-tab"
                role="tablist"
              >
                <a
                  class="nav-item nav-link active"
                  id="nav-home-tab"
                  data-toggle="tab"
                  href="#ticket-detail-accepted"
                  role="tab"
                  aria-controls="nav-home"
                  aria-selected="true"
                  >Ticket details</a
                >
                <a
                  class="nav-item nav-link"
                  id="nav-profile-tab"
                  data-toggle="tab"
                  href="#round-detail-accepted"
                  role="tab"
                  aria-controls="nav-profile"
                  aria-selected="false"
                  >Job details</a
                >
              </div>
            </nav>
          </div>
          <div class="col-md-3">
            <div class="text-danger" *ngIf="this.ticket_date_error != ''">
              {{ this.ticket_date_error }}
            </div>
            <div align="right">
              <div class="title-5-new2">Date</div>
              <div class="title-5-new">
                {{
                  this.time_conversion(this.ticket_detail, 1).convertedDate
                    ? this.time_conversion(this.ticket_detail, 1).convertedDate
                    : this.ticket_detail?.ticket?.ticket_date
                }}
              </div>
            </div>
          </div>
        </div>
        <div class="tab-content" id="nav-tabContent">
          <div
            *ngIf="!this.ticket_detail?.tc_ticket"
            class="tab-pane fade show active"
            id="ticket-detail-accepted"
            role="tabpanel"
            aria-labelledby="nav-home-tab"
          >
            <div class="ticket-detail-div bg-light-yellow2">
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="mb-2"></div>
                    <div class="title-17 text-color-black-shade6">
                      {{ this.ticket_detail?.ticket?.user?.company_name }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2 text-right">Project</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.ticket?.project?.project_name }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Job number</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.ticket?.project?.job_number }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2 text-right">Project address</div>
                    <div class="title-5-new">
                      {{
                        this.ticket_detail?.ticket?.project?.project_location
                      }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Job Approver</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.ticket?.approver?.full_name }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">Contact #</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.ticket?.approver?.contact_number }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-12">
                    <div class="title-5-new2">Description</div>
                    <div class="title-11 text-color-black-shade">
                      {{ this.ticket_detail?.ticket?.description }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="ticket-detail-div">
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Trucking Company</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trucking_company?.company_name }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">
                      {{
                        this.ticket_detail?.ticket?.ticket_truck_type
                          ?.rate_type == "hour"
                          ? "Hour rate"
                          : this.ticket_detail?.ticket?.ticket_truck_type
                              ?.rate_type == "round"
                          ? "Round rate"
                          : "Hour rate"
                      }}
                    </div>
                    <div class="title-5-new">
                      <div
                        class="border-pink"
                        style="
                          border-radius: 5px;
                          text-align: right;
                          width: 90px;
                        "
                      >
                        ${{ this.ticket_detail?.rate_per_hour }}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Dispatcher</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trucking_company?.full_name }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">Contact #</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trucking_company?.contact_number }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <br />
            <!-- <div class="title-5 ">Truck details</div> -->
            <div class="ticket-detail-div mybtn-back-pink mb-29">
              <div class="p-10px">
                <div class="row">
                  <div class="col-4">
                    <div class="title-5-new2">Truck name</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.truck?.truck_nickname }}
                    </div>
                  </div>
                  <div class="col-4" align="center">
                    <div class="title-5-new2">Truck type</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.truck?.truck_type }}
                    </div>
                  </div>
                  <div class="col-4" align="right">
                    <div class="title-5-new2">License plate</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.truck?.truck_license_plate }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-4">
                    <div class="title-5-new2">Trailer name</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trailer?.trailer_nickname }}
                    </div>
                  </div>
                  <div class="col-4" align="center">
                    <div class="title-5-new2">Trailer type</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trailer?.trailer_type }}
                    </div>
                  </div>
                  <div class="col-4" align="right">
                    <div class="title-5-new2">License plate</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trailer?.trailer_license_plate }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-4">
                    <div class="title-5-new2">Driver</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.driver?.full_name }}
                    </div>
                  </div>
                  <div class="col-4" align="center">
                    <div class="title-5-new2">Start time</div>
                    <div class="title-5-new">
                      <img
                        src="../../assets/icons/time.svg"
                        class="mt-minus-3px"
                      />
                      {{
                        this.time_conversion(this.ticket_detail, 1)
                          .convertedTime
                          ? this.time_conversion(this.ticket_detail, 1)
                              .convertedTime
                          : this.ticket_detail?.ticket?.ticket_time
                      }}
                    </div>
                  </div>
                  <div class="col-4" align="right">
                    <div class="title-5-new2">Rounds</div>
                    <div class="title-5-new">
                      <img
                        src="../../assets/icons/restart.svg"
                        class="mt-minus-3px"
                      />
                      {{
                        this.ticket_detail?.ticket?.ticket_truck_type_rounds
                          .length
                      }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div
            *ngIf="
              this.ticket_detail?.tc_ticket &&
              this.ticket_detail?.tc_ticket == 'YES'
            "
            class="tab-pane fade show active"
            id="ticket-detail-accepted"
            role="tabpanel"
            aria-labelledby="nav-home-tab"
          >
            <div class="ticket-detail-div bg-light-yellow2">
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="mb-2"></div>
                    <div class="title-17 text-color-black-shade6">
                      {{
                        this.ticket_detail?.ticket?.customer
                          ? this.ticket_detail?.ticket?.customer?.company_name
                          : this.ticket_detail?.ticket?.tc_customer
                              ?.company_name
                      }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2 text-right">Project</div>
                    <div class="title-5-new">
                      {{
                        this.ticket_detail?.ticket?.project
                          ? this.ticket_detail?.ticket?.project?.project_name
                          : this.ticket_detail?.ticket?.tc_project?.project_name
                      }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Job number</div>
                    <div class="title-5-new">
                      {{
                        this.ticket_detail?.ticket?.project
                          ? this.ticket_detail?.ticket?.project?.job_number
                          : this.ticket_detail?.ticket?.tc_project?.job_number
                      }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2 text-right">Project address</div>
                    <div class="title-5-new">
                      {{
                        this.ticket_detail?.ticket?.project
                          ? this.ticket_detail?.ticket?.project
                              ?.project_location
                          : this.ticket_detail?.ticket?.tc_project
                              ?.project_location
                      }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Job Approver</div>
                    <div class="title-5-new">
                      {{
                        this.ticket_detail?.ticket?.approver
                          ? this.ticket_detail?.ticket?.approver?.full_name
                          : this.ticket_detail?.ticket?.tc_approver?.full_name
                      }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">Contact #</div>
                    <div class="title-5-new">
                      {{
                        this.ticket_detail?.ticket?.approver
                          ? this.ticket_detail?.ticket?.approver?.contact_number
                          : this.ticket_detail?.ticket?.tc_approver
                              ?.contact_number
                      }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-12">
                    <div class="title-5-new2">Description</div>
                    <div class="title-11 text-color-black-shade">
                      {{ this.ticket_detail?.ticket?.description }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="ticket-detail-div">
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Trucking Company</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trucking_company?.company_name }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">
                      {{
                        this.ticket_detail?.ticket?.ticket_truck_type
                          ?.rate_type == "hour"
                          ? "Hour rate"
                          : this.ticket_detail?.ticket?.ticket_truck_type
                              ?.rate_type == "round"
                          ? "Round rate"
                          : "Hour rate"
                      }}
                    </div>
                    <div class="title-5-new">
                      <div
                        class="border-pink"
                        style="
                          border-radius: 5px;
                          text-align: right;
                          width: 90px;
                        "
                      >
                        ${{ this.ticket_detail?.rate_per_hour }}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Dispatcher</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trucking_company?.full_name }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">Contact #</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trucking_company?.contact_number }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <br />
            <!-- <div class="title-5 ">Truck details</div> -->
            <div class="ticket-detail-div mybtn-back-pink mb-29">
              <div class="p-10px">
                <div class="row">
                  <div class="col-4">
                    <div class="title-5-new2">Truck name</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.truck?.truck_nickname }}
                    </div>
                  </div>
                  <div class="col-4" align="center">
                    <div class="title-5-new2">Truck type</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.truck?.truck_type }}
                    </div>
                  </div>
                  <div class="col-4" align="right">
                    <div class="title-5-new2">License plate</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.truck?.truck_license_plate }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-4">
                    <div class="title-5-new2">Trailer name</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trailer?.trailer_nickname }}
                    </div>
                  </div>
                  <div class="col-4" align="center">
                    <div class="title-5-new2">Trailer type</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trailer?.trailer_type }}
                    </div>
                  </div>
                  <div class="col-4" align="right">
                    <div class="title-5-new2">License plate</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trailer?.trailer_license_plate }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-4">
                    <div class="title-5-new2">Driver</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.driver?.full_name }}
                    </div>
                  </div>
                  <div class="col-4" align="center">
                    <div class="title-5-new2">Start time</div>
                    <div class="title-5-new">
                      <img
                        src="../../assets/icons/time.svg"
                        class="mt-minus-3px"
                      />
                      {{
                        this.time_conversion(this.ticket_detail, 1)
                          .convertedTime
                          ? this.time_conversion(this.ticket_detail, 1)
                              .convertedTime
                          : this.ticket_detail?.ticket?.ticket_time
                      }}
                    </div>
                  </div>
                  <div class="col-4" align="right">
                    <div class="title-5-new2">Rounds</div>
                    <div class="title-5-new">
                      <img
                        src="../../assets/icons/restart.svg"
                        class="mt-minus-3px"
                      />
                      {{
                        this.ticket_detail?.ticket?.ticket_truck_type_rounds
                          .length
                      }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div
            class="tab-pane fade"
            id="round-detail-accepted"
            role="tabpanel"
            aria-labelledby="nav-profile-tab"
          >
            <ng-container
              *ngFor="
                let round of this.ticket_detail?.ticket
                  ?.ticket_truck_type_rounds.length > 0
                  ? this.ticket_detail?.ticket?.ticket_truck_type_rounds
                  : []
              "
            >
              <br />

              <div class="title-5">Round {{ round.round_no }}</div>
              <div class="ticket-detail-div">
                <div class="p-10px">
                  <div class="row">
                    <div class="col-md-6">
                      <div class="title-5">Material out</div>
                      <div class="title-5-new">
                        {{ round.material_taken_out }}
                      </div>
                    </div>
                    <div class="col-md-6" align="right">
                      <div class="title-5 text-right">Dump site</div>
                      <div class="title-5-new">{{ round.dump_site }}</div>
                    </div>
                  </div>
                </div>
                <div class="myhr"></div>
                <div class="p-10px">
                  <div class="row">
                    <div class="col-6">
                      <div class="title-5">Round started</div>
                      <div class="title-5-new">
                        {{ round.driver_start_time | date : "shortTime" }}
                      </div>
                    </div>
                    <div class="col-6" align="right">
                      <div class="title-5 text-right">Round total</div>
                      <div class="title-5-new text-right">
                        {{
                          round.round_time && round.round_time !== null
                            ? round.round_time + "m"
                            : ""
                        }}
                      </div>
                    </div>
                  </div>
                </div>
                <ng-container *ngIf="round?.haulback">
                  <div class="myhr"></div>
                  <div class="p-10px pt-1 grey-div">
                    <div class="row">
                      <div class="col-6">
                        <div class="title-5 text-grey-shade2 pb-1">
                          Haul back - pickup site
                        </div>
                        <div class="title-5-new">
                          {{
                            round?.haulback?.pickup_location_address
                              ? round?.haulback?.pickup_location_address
                              : round?.haulback?.pickup_location_name
                          }}
                        </div>
                      </div>
                      <div class="col-6" align="right">
                        <div class="title-5 text-grey-shade2 text-right pb-1">
                          Material in
                        </div>
                        <div class="title-5-new text-right">
                          {{ round?.haulback?.material_in }}
                        </div>
                      </div>
                    </div>
                  </div>
                </ng-container>
                <div class="myhr"></div>
                <div class="p-10px">
                  <div class="row">
                    <div class="col-md-6">
                      <ng-container *ngIf="round?.haulback">
                        <div class="title-5 text-black font-size-14 pb-1">
                          Haul back notes: {{ round?.haulback?.haulback_notes }}
                        </div>
                      </ng-container>
                      <div class="title-5 text-black font-size-14 pb-1">
                        Driver: {{ round?.driver_notes }}
                      </div>
                      <div class="title-5-new"></div>
                    </div>
                  </div>
                </div>
              </div>
              <br />
            </ng-container>
          </div>
        </div>
      </div>
      <div class="modal-body modal-body-padding" *ngIf="is_self_dispatched">
        <div class="d-flex justify-content-between align-items-center">
          <div>
            <div class="welcome-text">Ticket IDs</div>
            <div class="dashboard-title">
              {{ this.ticket_detail?.ticket_no }}
            </div>
          </div>
          <div>
            <img
              src="../assets/icons/driver-paperticket-icon.svg"
              height="20"
              class="mr-1"
            />
            <button
              class="mybtn bg-light-yellow2 width-fit-content btn-text-very-small"
            >
              Accepted
            </button>
          </div>
        </div>
        <br />

        <div class="row">
          <div class="col-md-9">
            <nav>
              <div
                class="nav nav-pills nav-fill ticket-tabs mb-20"
                id="nav-tab"
                role="tablist"
              >
                <a
                  class="nav-item nav-link active"
                  id="nav-home-tab"
                  data-toggle="tab"
                  href="#ticket-detail-accepted"
                  role="tab"
                  aria-controls="nav-home"
                  aria-selected="true"
                  >Ticket details</a
                >
                <a
                  class="nav-item nav-link"
                  id="nav-profile-tab"
                  data-toggle="tab"
                  href="#round-detail-accepted"
                  role="tab"
                  aria-controls="nav-profile"
                  aria-selected="false"
                  >Job details</a
                >
              </div>
            </nav>
          </div>
          <div class="col-md-3">
            <div align="right">
              <div class="title-5-new2">Date</div>
              <div class="title-5-new">
                {{
                  this.time_conversion(this.ticket_detail, 2).convertedDate
                    ? this.time_conversion(this.ticket_detail, 2).convertedDate
                    : this.ticket_detail?.ticket_date
                }}
              </div>
            </div>
          </div>
        </div>
        <div class="tab-content" id="nav-tabContent">
          <div
            class="tab-pane fade show active"
            id="ticket-detail-accepted"
            role="tabpanel"
            aria-labelledby="nav-home-tab"
          >
            <div class="ticket-detail-div bg-light-yellow2">
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="mb-2"></div>
                    <div class="title-17 text-color-black-shade6">
                      {{
                        this.ticket_detail?.construction_company?.company_name
                      }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2 text-right">Project</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.project?.project_name }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Job number</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.project?.job_number }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2 text-right">Project address</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.project?.street }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Job Approver</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.approver?.name }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">Contact #</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.approver?.contact_number }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-12">
                    <div class="title-5-new2">Description</div>
                    <div class="title-11 text-color-black-shade">
                      {{ this.ticket_detail?.description }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="ticket-detail-div">
              <div class="p-10px">
                <div class="row">
                  <div class="col-4">
                    <div class="title-5-new2">Trucking Company</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trucking_company?.company_name }}
                    </div>
                  </div>
                  <div class="col-4" align="center">
                    <div class="title-5-new2">Hour rate</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trucking_company?.hour_rate }}
                    </div>
                  </div>
                  <div class="col-4" align="right">
                    <div class="title-5-new2">Paper ticket ID</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.paper_ticket_id }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Dispatcher</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.dispatcher?.name }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">Contact #</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.dispatcher?.contact_number }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <br />
            <!-- <div class="title-5 ">Truck details</div> -->
            <div class="ticket-detail-div mybtn-back-pink mb-29">
              <div class="p-10px">
                <div class="row">
                  <div class="col-4">
                    <div class="title-5-new2">Truck name</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.truck?.name }}
                    </div>
                  </div>
                  <div class="col-4" align="center">
                    <div class="title-5-new2">Truck type</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.truck?.type }}
                    </div>
                  </div>
                  <div class="col-4" align="right">
                    <div class="title-5-new2">License plate</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.truck?.license_plate }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-4">
                    <div class="title-5-new2">Trailer name</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trailer?.name }}
                    </div>
                  </div>
                  <div class="col-4" align="center">
                    <div class="title-5-new2">Trailer type</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trailer?.type }}
                    </div>
                  </div>
                  <div class="col-4" align="right">
                    <div class="title-5-new2">License plate</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trailer?.license_plate }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-4">
                    <div class="title-5-new2">Driver</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.driver?.full_name }}
                    </div>
                  </div>
                  <div class="col-4" align="center">
                    <div class="title-5-new2">Start time</div>
                    <div class="title-5-new">
                      <img
                        src="../../assets/icons/time.svg"
                        class="mt-minus-3px"
                      />
                      {{
                        this.time_conversion(this.ticket_detail, 2)
                          .convertedTime
                          ? this.time_conversion(this.ticket_detail, 2)
                              .convertedTime
                          : this.ticket_detail?.ticket_time
                      }}
                    </div>
                  </div>
                  <div class="col-4" align="right">
                    <div class="title-5-new2">Rounds</div>
                    <div class="title-5-new">
                      <img
                        src="../../assets/icons/restart.svg"
                        class="mt-minus-3px"
                      />
                      {{ this.ticket_detail?.rounds.length }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div
            class="tab-pane fade"
            id="round-detail-accepted"
            role="tabpanel"
            aria-labelledby="nav-profile-tab"
          >
            <ng-container
              *ngFor="
                let round of this.ticket_detail?.rounds.length > 0
                  ? this.ticket_detail?.rounds
                  : []
              "
            >
              <br />

              <div class="title-5">Round {{ round.round_no }}</div>
              <div class="ticket-detail-div">
                <div class="p-10px">
                  <div class="row">
                    <div class="col-md-6">
                      <div class="title-5">Material out</div>
                      <div class="title-5-new">
                        {{ round.material_taken_out }}
                      </div>
                    </div>
                    <div class="col-md-6" align="right">
                      <div class="title-5 text-right">Dump site</div>
                      <div class="title-5-new">{{ round.dump_site_name }}</div>
                    </div>
                  </div>
                </div>
                <div class="myhr"></div>
                <div class="p-10px">
                  <div class="row">
                    <div class="col-6">
                      <div class="title-5">Round started</div>
                      <div class="title-5-new">
                        {{ round.driver_start_time | date : "shortTime" }}
                      </div>
                    </div>
                    <div class="col-6" align="right">
                      <div class="title-5 text-right">Round total</div>
                      <div class="title-5-new text-right">
                        {{
                          round.round_time && round.round_time !== null
                            ? round.round_time + "m"
                            : ""
                        }}
                      </div>
                    </div>
                  </div>
                </div>
                <ng-container *ngIf="round?.haulback">
                  <div class="myhr"></div>
                  <div class="p-10px pt-1 grey-div">
                    <div class="row">
                      <div class="col-6">
                        <div class="title-5 text-grey-shade2 pb-1">
                          Haul back - pickup site
                        </div>
                        <div class="title-5-new">
                          {{
                            round?.haulback?.pickup_location_address
                              ? round?.haulback?.pickup_location_address
                              : round?.haulback?.pickup_location_name
                          }}
                        </div>
                      </div>
                      <div class="col-6" align="right">
                        <div class="title-5 text-grey-shade2 text-right pb-1">
                          Material in
                        </div>
                        <div class="title-5-new text-right">
                          {{ round?.haulback?.material_in }}
                        </div>
                      </div>
                    </div>
                  </div>
                </ng-container>
                <div class="myhr"></div>
                <div class="p-10px">
                  <div class="row">
                    <div class="col-md-6">
                      <ng-container *ngIf="round?.haulback">
                        <div class="title-5 text-black font-size-14 pb-1">
                          Haul back notes: {{ round?.haulback?.haulback_notes }}
                        </div>
                      </ng-container>
                      <div class="title-5 text-black font-size-14 pb-1">
                        Driver: {{ round?.driver_notes }}
                      </div>
                      <div class="title-5-new"></div>
                    </div>
                  </div>
                </div>
              </div>
              <br />
            </ng-container>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div
  class="modal fade come-from-modal right"
  id="myModalInprogress"
  tabindex="-1"
  role="dialog"
  aria-labelledby="myModalLabel"
>
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div
        class="modal-body modal-body-padding"
        *ngIf="!this.is_self_dispatched"
      >
        <div class="d-flex justify-content-between align-items-center">
          <div>
            <div class="welcome-text">Ticket IDs</div>
            <div class="dashboard-title">
              {{ this.ticket_detail?.ticket?.ticket_no }}
            </div>
          </div>
          <div>
            <img
              *ngIf="
                this.ticket_detail?.ticket?.required_paper_ticket_id == 'YES'
              "
              src="../assets/icons/driver-paperticket-icon.svg"
              height="20"
              class="mr-1"
            />
            <button
              class="mybtn bg-dark-yellow width-fit-content btn-text-very-small text-white"
            >
              Driving
            </button>
          </div>
        </div>
        <br />

        <div class="row">
          <div class="col-md-9">
            <nav>
              <div
                class="nav nav-pills nav-fill ticket-tabs mb-20"
                id="nav-tab"
                role="tablist"
              >
                <a
                  class="nav-item nav-link active"
                  id="nav-home-tab"
                  data-toggle="tab"
                  href="#ticket-detail-inprogress"
                  role="tab"
                  aria-controls="nav-home"
                  aria-selected="true"
                  >Ticket details</a
                >
                <a
                  class="nav-item nav-link"
                  id="nav-profile-tab"
                  data-toggle="tab"
                  href="#round-detail-inprogress"
                  role="tab"
                  aria-controls="nav-profile"
                  aria-selected="false"
                  >Job details</a
                >
              </div>
            </nav>
          </div>
          <div class="col-md-3">
            <div align="right">
              <div class="title-5-new2">Date</div>
              <div class="title-5-new">
                {{
                  this.time_conversion(this.ticket_detail, 1).convertedDate
                    ? this.time_conversion(this.ticket_detail, 1).convertedDate
                    : this.ticket_detail?.ticket?.ticket_date
                }}
              </div>
            </div>
          </div>
        </div>
        <div class="tab-content" id="nav-tabContent">
          <div
            *ngIf="!this.ticket_detail?.tc_ticket"
            class="tab-pane fade show active"
            id="ticket-detail-inprogress"
            role="tabpanel"
            aria-labelledby="nav-home-tab"
          >
            <div class="ticket-detail-div bg-light-yellow2">
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="mb-2"></div>
                    <div class="title-17 text-color-black-shade6">
                      {{ this.ticket_detail?.ticket?.user?.company_name }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2 text-right">Project</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.ticket?.project?.project_name }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Job number</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.ticket?.project?.job_number }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2 text-right">Project address</div>
                    <div class="title-5-new">
                      {{
                        this.ticket_detail?.ticket?.project?.project_location
                      }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Job Approver</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.ticket?.approver?.full_name }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">Contact #</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.ticket?.approver?.contact_number }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-12">
                    <div class="title-5-new2">Description</div>
                    <div class="title-11 text-color-black-shade">
                      {{ this.ticket_detail?.ticket?.description }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="ticket-detail-div">
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Trucking Company</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trucking_company?.company_name }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">
                      {{
                        this.ticket_detail?.ticket?.ticket_truck_type
                          ?.rate_type == "hour"
                          ? "Hour rate"
                          : this.ticket_detail?.ticket?.ticket_truck_type
                              ?.rate_type == "round"
                          ? "Round rate"
                          : "Hour rate"
                      }}
                    </div>
                    <div class="title-5-new">
                      <div
                        class="border-pink"
                        style="
                          border-radius: 5px;
                          text-align: right;
                          width: 90px;
                        "
                      >
                        ${{ this.ticket_detail?.rate_per_hour }}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Dispatcher</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trucking_company?.full_name }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">Contact #</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trucking_company?.contact_number }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <br />
            <!-- <div class="title-5 ">Truck details</div> -->
            <div class="ticket-detail-div mybtn-back-pink mb-29">
              <div class="p-10px">
                <div class="row">
                  <div class="col-4">
                    <div class="title-5-new2">Truck name</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.truck?.truck_nickname }}
                    </div>
                  </div>
                  <div class="col-4" align="center">
                    <div class="title-5-new2">Truck type</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.truck?.truck_type }}
                    </div>
                  </div>
                  <div class="col-4" align="right">
                    <div class="title-5-new2">License plate</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.truck?.truck_license_plate }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-4">
                    <div class="title-5-new2">Trailer name</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trailer?.trailer_nickname }}
                    </div>
                  </div>
                  <div class="col-4" align="center">
                    <div class="title-5-new2">Trailer type</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trailer?.trailer_type }}
                    </div>
                  </div>
                  <div class="col-4" align="right">
                    <div class="title-5-new2">License plate</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trailer?.trailer_license_plate }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-4">
                    <div class="title-5-new2">Driver</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.driver?.full_name }}
                    </div>
                  </div>
                  <div class="col-4" align="center">
                    <div class="title-5-new2">Start time</div>
                    <div class="title-5-new">
                      <img
                        src="../../assets/icons/time.svg"
                        class="mt-minus-3px"
                      />
                      {{
                        this.time_conversion(this.ticket_detail, 1)
                          .convertedTime
                          ? this.time_conversion(this.ticket_detail, 1)
                              .convertedTime
                          : this.ticket_detail?.ticket?.ticket_time
                      }}
                    </div>
                  </div>
                  <div class="col-4" align="right">
                    <div class="title-5-new2">Rounds</div>
                    <div class="title-5-new">
                      <img
                        src="../../assets/icons/restart.svg"
                        class="mt-minus-3px"
                      />
                      {{
                        this.ticket_detail?.ticket?.ticket_truck_type_rounds
                          .length
                      }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div
            *ngIf="
              this.ticket_detail?.tc_ticket &&
              this.ticket_detail?.tc_ticket == 'YES'
            "
            class="tab-pane fade show active"
            id="ticket-detail-inprogress"
            role="tabpanel"
            aria-labelledby="nav-home-tab"
          >
            <div class="ticket-detail-div bg-light-yellow2">
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="mb-2"></div>
                    <div class="title-17 text-color-black-shade6">
                      {{
                        this.ticket_detail?.ticket?.customer
                          ? this.ticket_detail?.ticket?.customer?.company_name
                          : this.ticket_detail?.ticket?.tc_customer
                              ?.company_name
                      }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2 text-right">Project</div>
                    <div class="title-5-new">
                      {{
                        this.ticket_detail?.ticket?.project
                          ? this.ticket_detail?.ticket?.project?.project_name
                          : this.ticket_detail?.ticket?.tc_project?.project_name
                      }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Job number</div>
                    <div class="title-5-new">
                      {{
                        this.ticket_detail?.ticket?.project
                          ? this.ticket_detail?.ticket?.project?.job_number
                          : this.ticket_detail?.ticket?.tc_project?.job_number
                      }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2 text-right">Project address</div>
                    <div class="title-5-new">
                      {{
                        this.ticket_detail?.ticket?.project
                          ? this.ticket_detail?.ticket?.project
                              ?.project_location
                          : this.ticket_detail?.ticket?.tc_project
                              ?.project_location
                      }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Job Approver</div>
                    <div class="title-5-new">
                      {{
                        this.ticket_detail?.ticket?.approver
                          ? this.ticket_detail?.ticket?.approver?.full_name
                          : this.ticket_detail?.ticket?.tc_approver?.full_name
                      }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">Contact #</div>
                    <div class="title-5-new">
                      {{
                        this.ticket_detail?.ticket?.approver
                          ? this.ticket_detail?.ticket?.approver?.contact_number
                          : this.ticket_detail?.ticket?.tc_approver
                              ?.contact_number
                      }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-12">
                    <div class="title-5-new2">Description</div>
                    <div class="title-11 text-color-black-shade">
                      {{ this.ticket_detail?.ticket?.description }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="ticket-detail-div">
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Trucking Company</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trucking_company?.company_name }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">
                      {{
                        this.ticket_detail?.ticket?.ticket_truck_type
                          ?.rate_type == "hour"
                          ? "Hour rate"
                          : this.ticket_detail?.ticket?.ticket_truck_type
                              ?.rate_type == "round"
                          ? "Round rate"
                          : "Hour rate"
                      }}
                    </div>
                    <div class="title-5-new">
                      <div
                        class="border-pink"
                        style="
                          border-radius: 5px;
                          text-align: right;
                          width: 90px;
                        "
                      >
                        ${{ this.ticket_detail?.rate_per_hour }}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Dispatcher</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trucking_company?.full_name }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">Contact #</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trucking_company?.contact_number }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <br />
            <!-- <div class="title-5 ">Truck details</div> -->
            <div class="ticket-detail-div mybtn-back-pink mb-29">
              <div class="p-10px">
                <div class="row">
                  <div class="col-4">
                    <div class="title-5-new2">Truck name</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.truck?.truck_nickname }}
                    </div>
                  </div>
                  <div class="col-4" align="center">
                    <div class="title-5-new2">Truck type</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.truck?.truck_type }}
                    </div>
                  </div>
                  <div class="col-4" align="right">
                    <div class="title-5-new2">License plate</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.truck?.truck_license_plate }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-4">
                    <div class="title-5-new2">Trailer name</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trailer?.trailer_nickname }}
                    </div>
                  </div>
                  <div class="col-4" align="center">
                    <div class="title-5-new2">Trailer type</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trailer?.trailer_type }}
                    </div>
                  </div>
                  <div class="col-4" align="right">
                    <div class="title-5-new2">License plate</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trailer?.trailer_license_plate }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-4">
                    <div class="title-5-new2">Driver</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.driver?.full_name }}
                    </div>
                  </div>
                  <div class="col-4" align="center">
                    <div class="title-5-new2">Start time</div>
                    <div class="title-5-new">
                      <img
                        src="../../assets/icons/time.svg"
                        class="mt-minus-3px"
                      />
                      {{
                        this.time_conversion(this.ticket_detail, 1)
                          .convertedTime
                          ? this.time_conversion(this.ticket_detail, 1)
                              .convertedTime
                          : this.ticket_detail?.ticket?.ticket_time
                      }}
                    </div>
                  </div>
                  <div class="col-4" align="right">
                    <div class="title-5-new2">Rounds</div>
                    <div class="title-5-new">
                      <img
                        src="../../assets/icons/restart.svg"
                        class="mt-minus-3px"
                      />
                      {{
                        this.ticket_detail?.ticket?.ticket_truck_type_rounds
                          .length
                      }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div
            class="tab-pane fade"
            id="round-detail-inprogress"
            role="tabpanel"
            aria-labelledby="nav-profile-tab"
          >
            <ng-container
              *ngFor="
                let round of this.ticket_detail?.ticket
                  ?.ticket_truck_type_rounds.length > 0
                  ? this.ticket_detail?.ticket?.ticket_truck_type_rounds
                  : []
              "
            >
              <br />

              <div
                [ngClass]="
                  this.ticket_detail?.ticket?.status == 'Driving' &&
                  round?.driver_start_time &&
                  !round?.end_time
                    ? 'bg-dark-yellow width-fit-content btn-text-very-small mb-1 text-white'
                    : 'title-5'
                "
              >
                Round {{ round.round_no }}
              </div>
              <div class="ticket-detail-div">
                <div class="p-10px">
                  <div class="row">
                    <div class="col-md-6">
                      <div class="title-5">Material out</div>
                      <div class="title-5-new">
                        {{ round.material_taken_out }}
                      </div>
                    </div>
                    <div class="col-md-6" align="right">
                      <div class="title-5 text-right">Dump site</div>
                      <div class="title-5-new">{{ round.dump_site }}</div>
                    </div>
                  </div>
                </div>
                <div class="myhr"></div>
                <div class="p-10px">
                  <div class="row">
                    <div class="col-6">
                      <div class="title-5">Round started</div>
                      <div class="title-5-new">
                        {{ round.driver_start_time | date : "shortTime" }}
                      </div>
                    </div>
                    <div class="col-6" align="right">
                      <div class="title-5 text-right">Round total</div>
                      <div class="title-5-new text-right">
                        {{
                          round.round_time && round.round_time !== null
                            ? round.round_time + "m"
                            : ""
                        }}
                      </div>
                    </div>
                  </div>
                </div>
                <ng-container *ngIf="round?.haulback">
                  <div class="myhr"></div>
                  <div class="p-10px pt-1 grey-div">
                    <div class="row">
                      <div class="col-6">
                        <div class="title-5 text-grey-shade2 pb-1">
                          Haul back - pickup site
                        </div>
                        <div class="title-5-new">
                          {{
                            round?.haulback?.pickup_location_address
                              ? round?.haulback?.pickup_location_address
                              : round?.haulback?.pickup_location_name
                          }}
                        </div>
                      </div>
                      <div class="col-6" align="right">
                        <div class="title-5 text-grey-shade2 text-right pb-1">
                          Material in
                        </div>
                        <div class="title-5-new text-right">
                          {{ round?.haulback?.material_in }}
                        </div>
                      </div>
                    </div>
                  </div>
                </ng-container>
                <div class="myhr"></div>
                <div class="p-10px">
                  <div class="row">
                    <div class="col-md-6">
                      <ng-container *ngIf="round?.haulback">
                        <div class="title-5 text-black font-size-14 pb-1">
                          Haul back notes: {{ round?.haulback?.haulback_notes }}
                        </div>
                      </ng-container>
                      <div class="title-5 text-black font-size-14 pb-1">
                        Driver: {{ round?.driver_notes }}
                      </div>
                      <div class="title-5-new"></div>
                    </div>
                  </div>
                </div>
              </div>
              <br />
            </ng-container>
          </div>
        </div>
      </div>
      <div
        class="modal-body modal-body-padding"
        *ngIf="this.is_self_dispatched"
      >
        <div class="d-flex justify-content-between align-items-center">
          <div>
            <div class="welcome-text">Ticket IDs</div>
            <div class="dashboard-title">
              {{ this.ticket_detail?.ticket_no }}
            </div>
          </div>
          <div>
            <img
              src="../assets/icons/driver-paperticket-icon.svg"
              height="20"
              class="mr-1"
            />
            <button
              class="mybtn bg-dark-yellow width-fit-content btn-text-very-small text-white"
            >
              Driving
            </button>
          </div>
        </div>
        <br />

        <div class="row">
          <div class="col-md-9">
            <nav>
              <div
                class="nav nav-pills nav-fill ticket-tabs mb-20"
                id="nav-tab"
                role="tablist"
              >
                <a
                  class="nav-item nav-link active"
                  id="nav-home-tab"
                  data-toggle="tab"
                  href="#ticket-detail-inprogress"
                  role="tab"
                  aria-controls="nav-home"
                  aria-selected="true"
                  >Ticket details</a
                >
                <a
                  class="nav-item nav-link"
                  id="nav-profile-tab"
                  data-toggle="tab"
                  href="#round-detail-inprogress"
                  role="tab"
                  aria-controls="nav-profile"
                  aria-selected="false"
                  >Job details</a
                >
              </div>
            </nav>
          </div>
          <div class="col-md-3">
            <div align="right">
              <div class="title-5-new2">Date</div>
              <div class="title-5-new">
                {{
                  this.time_conversion(this.ticket_detail, 2).convertedDate
                    ? this.time_conversion(this.ticket_detail, 2).convertedDate
                    : this.ticket_detail?.ticket_date
                }}
              </div>
            </div>
          </div>
        </div>
        <div class="tab-content" id="nav-tabContent">
          <div
            class="tab-pane fade show active"
            id="ticket-detail-inprogress"
            role="tabpanel"
            aria-labelledby="nav-home-tab"
          >
            <div class="ticket-detail-div bg-light-yellow2">
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="mb-2"></div>
                    <div class="title-17 text-color-black-shade6">
                      {{
                        this.ticket_detail?.construction_company?.company_name
                      }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2 text-right">Project</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.project?.project_name }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Job number</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.project?.job_number }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2 text-right">Project address</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.project?.street }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Job Approver</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.approver?.name }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">Contact #</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.approver?.contact_number }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-12">
                    <div class="title-5-new2">Description</div>
                    <div class="title-11 text-color-black-shade">
                      {{ this.ticket_detail?.description }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="ticket-detail-div">
              <div class="p-10px">
                <div class="row">
                  <div class="col-4">
                    <div class="title-5-new2">Trucking Company</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trucking_company?.company_name }}
                    </div>
                  </div>
                  <div class="col-4" align="center">
                    <div class="title-5-new2">Hour rate</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trucking_company?.hour_rate }}
                    </div>
                  </div>
                  <div class="col-4" align="right">
                    <div class="title-5-new2">Paper ticket ID</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.paper_ticket_id }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Dispatcher</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.dispatcher?.name }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">Contact #</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.dispatcher?.contact_number }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <br />
            <!-- <div class="title-5 ">Truck details</div> -->
            <div class="ticket-detail-div mybtn-back-pink mb-29">
              <div class="p-10px">
                <div class="row">
                  <div class="col-4">
                    <div class="title-5-new2">Truck name</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.truck?.name }}
                    </div>
                  </div>
                  <div class="col-4" align="center">
                    <div class="title-5-new2">Truck type</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.truck?.type }}
                    </div>
                  </div>
                  <div class="col-4" align="right">
                    <div class="title-5-new2">License plate</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.truck?.license_plate }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-4">
                    <div class="title-5-new2">Trailer name</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trailer?.name }}
                    </div>
                  </div>
                  <div class="col-4" align="center">
                    <div class="title-5-new2">Trailer type</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trailer?.type }}
                    </div>
                  </div>
                  <div class="col-4" align="right">
                    <div class="title-5-new2">License plate</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trailer?.license_plate }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-4">
                    <div class="title-5-new2">Driver</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.driver?.full_name }}
                    </div>
                  </div>
                  <div class="col-4" align="center">
                    <div class="title-5-new2">Start time</div>
                    <div class="title-5-new">
                      <img
                        src="../../assets/icons/time.svg"
                        class="mt-minus-3px"
                      />
                      {{
                        this.time_conversion(this.ticket_detail, 2)
                          .convertedTime
                          ? this.time_conversion(this.ticket_detail, 2)
                              .convertedTime
                          : this.ticket_detail?.ticket_time
                      }}
                    </div>
                  </div>
                  <div class="col-4" align="right">
                    <div class="title-5-new2">Rounds</div>
                    <div class="title-5-new">
                      <img
                        src="../../assets/icons/restart.svg"
                        class="mt-minus-3px"
                      />
                      {{ this.ticket_detail?.rounds.length }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div
            class="tab-pane fade"
            id="round-detail-inprogress"
            role="tabpanel"
            aria-labelledby="nav-profile-tab"
          >
            <ng-container
              *ngFor="
                let round of this.ticket_detail?.rounds.length > 0
                  ? this.ticket_detail?.rounds
                  : []
              "
            >
              <br />

              <div
                [ngClass]="
                  this.ticket_detail?.status == 'Driving' &&
                  round?.driver_start_time &&
                  !round?.end_time
                    ? 'bg-dark-yellow width-fit-content btn-text-very-small mb-1 text-white'
                    : 'title-5'
                "
              >
                Round {{ round.round_no }}
              </div>
              <div class="ticket-detail-div">
                <div class="p-10px">
                  <div class="row">
                    <div class="col-md-6">
                      <div class="title-5">Material out</div>
                      <div class="title-5-new">
                        {{ round.material_taken_out }}
                      </div>
                    </div>
                    <div class="col-md-6" align="right">
                      <div class="title-5 text-right">Dump site</div>
                      <div class="title-5-new">{{ round.dump_site }}</div>
                    </div>
                  </div>
                </div>
                <div class="myhr"></div>
                <div class="p-10px">
                  <div class="row">
                    <div class="col-6">
                      <div class="title-5">Round started</div>
                      <div class="title-5-new">
                        {{ round.driver_start_time | date : "shortTime" }}
                      </div>
                    </div>
                    <div class="col-6" align="right">
                      <div class="title-5 text-right">Round total</div>
                      <div class="title-5-new text-right">
                        {{
                          round.round_time && round.round_time !== null
                            ? round.round_time + "m"
                            : ""
                        }}
                      </div>
                    </div>
                  </div>
                </div>
                <ng-container *ngIf="round?.haulback">
                  <div class="myhr"></div>
                  <div class="p-10px pt-1 grey-div">
                    <div class="row">
                      <div class="col-6">
                        <div class="title-5 text-grey-shade2 pb-1">
                          Haul back - pickup site
                        </div>
                        <div class="title-5-new">
                          {{
                            round?.haulback?.pickup_location_address
                              ? round?.haulback?.pickup_location_address
                              : round?.haulback?.pickup_location_name
                          }}
                        </div>
                      </div>
                      <div class="col-6" align="right">
                        <div class="title-5 text-grey-shade2 text-right pb-1">
                          Material in
                        </div>
                        <div class="title-5-new text-right">
                          {{ round?.haulback?.material_in }}
                        </div>
                      </div>
                    </div>
                  </div>
                </ng-container>
                <div class="myhr"></div>
                <div class="p-10px">
                  <div class="row">
                    <div class="col-md-6">
                      <ng-container *ngIf="round?.haulback">
                        <div class="title-5 text-black font-size-14 pb-1">
                          Haul back notes: {{ round?.haulback?.haulback_notes }}
                        </div>
                      </ng-container>
                      <div class="title-5 text-black font-size-14 pb-1">
                        Driver: {{ round?.driver_notes }}
                      </div>
                      <div class="title-5-new"></div>
                    </div>
                  </div>
                </div>
              </div>
              <br />
            </ng-container>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div
  class="modal fade come-from-modal right"
  id="myModalCompleted"
  tabindex="-1"
  role="dialog"
  aria-labelledby="myModalLabel"
>
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-body modal-body-padding">
        <div class="d-flex justify-content-between align-items-center">
          <div>
            <div class="welcome-text">Ticket IDs</div>
            <div class="dashboard-title">
              {{ this.ticket_detail?.ticket?.ticket_no }}
            </div>
          </div>
          <div>
            <img
              *ngIf="
                this.ticket_detail?.ticket?.required_paper_ticket_id == 'YES'
              "
              src="../assets/icons/driver-paperticket-icon.svg"
              height="20"
              class="mr-1"
            />
            <button
              class="mybtn bg-green text-white width-fit-content btn-text-very-small"
            >
              Completed
            </button>
          </div>
        </div>
        <br />

        <div class="row">
          <div class="col-md-9">
            <nav>
              <div
                class="nav nav-pills nav-fill ticket-tabs mb-20"
                id="nav-tab"
                role="tablist"
              >
                <a
                  class="nav-item nav-link active"
                  id="nav-home-tab"
                  data-toggle="tab"
                  href="#ticket-detail-completed"
                  role="tab"
                  aria-controls="nav-home"
                  aria-selected="true"
                  >Ticket details</a
                >
                <a
                  class="nav-item nav-link"
                  id="nav-profile-tab"
                  data-toggle="tab"
                  href="#round-detail-completed"
                  role="tab"
                  aria-controls="nav-profile"
                  aria-selected="false"
                  >Job details</a
                >
              </div>
            </nav>
          </div>
          <div class="col-md-3">
            <div align="right">
              <div class="title-5-new2">Date</div>
              <div class="title-5-new">
                {{
                  this.time_conversion(this.ticket_detail, 1).convertedDate
                    ? this.time_conversion(this.ticket_detail, 1).convertedDate
                    : this.ticket_detail?.ticket?.ticket_date
                }}
              </div>
            </div>
          </div>
        </div>
        <div class="tab-content" id="nav-tabContent">
          <div
            *ngIf="!this.ticket_detail?.tc_ticket"
            class="tab-pane fade show active"
            id="ticket-detail-completed"
            role="tabpanel"
            aria-labelledby="nav-home-tab"
          >
            <div class="ticket-detail-div bg-light-yellow2">
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="mb-2"></div>
                    <div class="title-17 text-color-black-shade6">
                      {{ this.ticket_detail?.ticket?.user?.company_name }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2 text-right">Project</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.ticket?.project?.project_name }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Job number</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.ticket?.project?.job_number }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2 text-right">Project address</div>
                    <div class="title-5-new">
                      {{
                        this.ticket_detail?.ticket?.project?.project_location
                      }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Job Approver</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.ticket?.approver?.full_name }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">Contact #</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.ticket?.approver?.contact_number }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-12">
                    <div class="title-5-new2">Description</div>
                    <div class="title-11 text-color-black-shade">
                      {{ this.ticket_detail?.ticket?.description }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="ticket-detail-div">
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Trucking Company</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trucking_company?.company_name }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">
                      {{
                        this.ticket_detail?.ticket?.ticket_truck_type
                          ?.rate_type == "hour"
                          ? "Hour rate"
                          : this.ticket_detail?.ticket?.ticket_truck_type
                              ?.rate_type == "round"
                          ? "Round rate"
                          : "Hour rate"
                      }}
                    </div>
                    <div class="title-5-new">
                      <div
                        class="border-pink"
                        style="
                          border-radius: 5px;
                          text-align: right;
                          width: 90px;
                        "
                      >
                        ${{ this.ticket_detail?.rate_per_hour }}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Dispatcher</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trucking_company?.full_name }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">Contact #</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trucking_company?.contact_number }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <br />
            <!-- <div class="title-5 ">Truck details</div> -->
            <div class="ticket-detail-div mybtn-back-pink mb-29">
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Job started</div>
                    <div class="title-5-new">
                      {{
                        this.time_conversion(this.ticket_detail, 3)
                          .convertedTime
                          ? this.time_conversion(this.ticket_detail, 3)
                              .convertedTime
                          : (this.ticket_detail?.started_at
                            | date : "shortTime")
                      }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">Job total</div>
                    <div class="title-5-new">
                      {{ parseJobTotal(this.ticket_detail?.total_time) }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Driver</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.driver?.full_name }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">Driver total</div>
                    <div class="title-5-new">
                      {{
                        parseDriverTime(
                          this.ticket_detail?.driver_hours,
                          this.ticket_detail?.driver_minutes
                        )
                      }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div
            *ngIf="
              this.ticket_detail?.tc_ticket &&
              this.ticket_detail?.tc_ticket == 'YES'
            "
            class="tab-pane fade show active"
            id="ticket-detail-completed"
            role="tabpanel"
            aria-labelledby="nav-home-tab"
          >
            <div class="ticket-detail-div bg-light-yellow2">
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="mb-2"></div>
                    <div class="title-17 text-color-black-shade6">
                      {{
                        this.ticket_detail?.ticket?.customer
                          ? this.ticket_detail?.ticket?.customer?.company_name
                          : this.ticket_detail?.ticket?.tc_customer
                              ?.company_name
                      }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2 text-right">Project</div>
                    <div class="title-5-new">
                      {{
                        this.ticket_detail?.ticket?.project
                          ? this.ticket_detail?.ticket?.project?.project_name
                          : this.ticket_detail?.ticket?.tc_project?.project_name
                      }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Job number</div>
                    <div class="title-5-new">
                      {{
                        this.ticket_detail?.ticket?.project
                          ? this.ticket_detail?.ticket?.project?.job_number
                          : this.ticket_detail?.ticket?.tc_project?.job_number
                      }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2 text-right">Project address</div>
                    <div class="title-5-new">
                      {{
                        this.ticket_detail?.ticket?.project
                          ? this.ticket_detail?.ticket?.project
                              ?.project_location
                          : this.ticket_detail?.ticket?.tc_project
                              ?.project_location
                      }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Job Approver</div>
                    <div class="title-5-new">
                      {{
                        this.ticket_detail?.ticket?.approver
                          ? this.ticket_detail?.ticket?.approver?.full_name
                          : this.ticket_detail?.ticket?.tc_approver?.full_name
                      }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">Contact #</div>
                    <div class="title-5-new">
                      {{
                        this.ticket_detail?.ticket?.approver
                          ? this.ticket_detail?.ticket?.approver?.contact_number
                          : this.ticket_detail?.ticket?.tc_approver
                              ?.contact_number
                      }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-12">
                    <div class="title-5-new2">Description</div>
                    <div class="title-11 text-color-black-shade">
                      {{ this.ticket_detail?.ticket?.description }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="ticket-detail-div">
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Trucking Company</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trucking_company?.company_name }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">
                      {{
                        this.ticket_detail?.ticket?.ticket_truck_type
                          ?.rate_type == "hour"
                          ? "Hour rate"
                          : this.ticket_detail?.ticket?.ticket_truck_type
                              ?.rate_type == "round"
                          ? "Round rate"
                          : "Hour rate"
                      }}
                    </div>
                    <div class="title-5-new">
                      <div
                        class="border-pink"
                        style="
                          border-radius: 5px;
                          text-align: right;
                          width: 90px;
                        "
                      >
                        ${{ this.ticket_detail?.rate_per_hour }}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Dispatcher</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trucking_company?.full_name }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">Contact #</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trucking_company?.contact_number }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <br />
            <!-- <div class="title-5 ">Truck details</div> -->
            <div class="ticket-detail-div mybtn-back-pink mb-29">
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Job started</div>
                    <div class="title-5-new">
                      {{
                        this.time_conversion(this.ticket_detail, 3)
                          .convertedTime
                          ? this.time_conversion(this.ticket_detail, 3)
                              .convertedTime
                          : (this.ticket_detail?.started_at
                            | date : "shortTime")
                      }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">Job total</div>
                    <div class="title-5-new">
                      {{ parseJobTotal(this.ticket_detail?.total_time) }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Driver</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.driver?.full_name }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">Driver total</div>
                    <div class="title-5-new">
                      {{
                        parseDriverTime(
                          this.ticket_detail?.driver_hours,
                          this.ticket_detail?.driver_minutes
                        )
                      }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div
            class="tab-pane fade"
            id="round-detail-completed"
            role="tabpanel"
            aria-labelledby="nav-profile-tab"
          >
            <br />
            <div class="ticket-detail-div">
              <div class="p-10px">
                <div class="row">
                  <div class="col-4">
                    <div class="title-5-new2">Truck name</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.truck?.truck_nickname }}
                    </div>
                  </div>
                  <div class="col-4" align="center">
                    <div class="title-5-new2">Truck type</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.truck?.truck_type }}
                    </div>
                  </div>
                  <div class="col-4" align="right">
                    <div class="title-5-new2">License plate</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.truck?.truck_license_plate }}
                    </div>
                  </div>
                </div>
              </div>
              <ng-container
                *ngIf="
                  this.ticket_detail?.trailer &&
                  this.ticket_detail?.trailer?.trailer_nickname
                "
              >
                <div class="myhr"></div>
                <div class="p-10px">
                  <div class="row">
                    <div class="col-4">
                      <div class="title-5-new2">Trailer Name</div>
                      <div class="title-5-new">
                        {{ this.ticket_detail?.trailer?.trailer_nickname }}
                      </div>
                    </div>
                    <div class="col-4" align="center">
                      <div class="title-5-new2">Trailer type</div>
                      <div class="title-5-new">
                        {{ this.ticket_detail?.trailer?.trailer_type }}
                      </div>
                    </div>
                    <div class="col-4" align="right">
                      <div class="title-5-new2">License plate</div>
                      <div class="title-5-new">
                        {{ this.ticket_detail?.trailer?.trailer_license_plate }}
                      </div>
                    </div>
                  </div>
                </div>
              </ng-container>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-4">
                    <div class="title-5-new2">Job started</div>
                    <div class="title-5-new">
                      {{
                        this.time_conversion(this.ticket_detail, 3)
                          .convertedTime
                          ? this.time_conversion(this.ticket_detail, 3)
                              .convertedTime
                          : (this.ticket_detail?.started_at
                            | date : "shortTime")
                      }}
                    </div>
                  </div>
                  <div class="col-4" align="center">
                    <div class="title-5-new2">Rounds</div>
                    <div class="title-5-new">
                      <img
                        src="../../assets/icons/restart.svg"
                        class="mt-minus-3px"
                      />{{ this.total_rounds }}
                    </div>
                  </div>
                  <div class="col-4" align="right">
                    <div class="title-5-new2">Job total</div>
                    <div class="title-5-new">
                      {{ this.parseJobTotal2(this.ticket_detail?.total_time) }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <br />
            <ng-container
              *ngFor="
                let round of this.ticket_detail?.ticket
                  ?.ticket_truck_type_rounds.length > 0
                  ? this.ticket_detail?.ticket?.ticket_truck_type_rounds
                  : []
              "
            >
              <ng-container
                *ngIf="
                  (this.ticket_detail?.status != 'Completed' &&
                    this.ticket_detail?.status != 'Approved') ||
                  ((this.ticket_detail?.status == 'Completed' ||
                    this.ticket_detail?.status == 'Approved') &&
                    round.driver_start_time &&
                    round.round_time)
                "
              >
                <div class="title-5">Round {{ round.round_no }}</div>
                <div class="ticket-detail-div">
                  <div class="p-10px">
                    <div class="row">
                      <div class="col-md-6">
                        <div class="title-5">Material out</div>
                        <div class="title-5-new">
                          {{ round.material_taken_out }}
                        </div>
                      </div>
                      <div class="col-md-6" align="right">
                        <div class="title-5 text-right">Dump site</div>
                        <div class="title-5-new">{{ round.dump_site }}</div>
                      </div>
                    </div>
                  </div>
                  <div class="myhr"></div>
                  <div class="p-10px">
                    <div class="row">
                      <div class="col-6">
                        <div class="title-5">Round started</div>
                        <div class="title-5-new">
                          {{ round.driver_start_time | date : "shortTime" }}
                        </div>
                      </div>
                      <div class="col-6" align="right">
                        <div class="title-5 text-right">Round total</div>
                        <div class="title-5-new text-right">
                          {{
                            round.round_time && round.round_time !== null
                              ? round.round_time + "m"
                              : ""
                          }}
                        </div>
                      </div>
                    </div>
                  </div>
                  <ng-container *ngIf="round?.haulback">
                    <div class="myhr"></div>
                    <div class="p-10px pt-1 grey-div">
                      <div class="row">
                        <div class="col-6">
                          <div class="title-5 text-grey-shade2 pb-1">
                            Haul back - pickup site
                          </div>
                          <div class="title-5-new">
                            {{
                              round?.haulback?.pickup_location_address
                                ? round?.haulback?.pickup_location_address
                                : round?.haulback?.pickup_location_name
                            }}
                          </div>
                        </div>
                        <div class="col-6" align="right">
                          <div class="title-5 text-grey-shade2 text-right pb-1">
                            Material in
                          </div>
                          <div class="title-5-new text-right">
                            {{ round?.haulback?.material_in }}
                          </div>
                        </div>
                      </div>
                    </div>
                  </ng-container>
                  <div class="myhr"></div>
                  <div class="p-10px">
                    <div class="row">
                      <div class="col-md-6">
                        <ng-container *ngIf="round?.haulback">
                          <div class="title-5 text-black font-size-14 pb-1">
                            Haul back notes:
                            {{ round?.haulback?.haulback_notes }}
                          </div>
                        </ng-container>
                        <div class="title-5 text-black font-size-14 pb-1">
                          Driver: {{ round?.driver_notes }}
                        </div>
                        <div class="title-5-new"></div>
                      </div>
                    </div>
                  </div>
                </div>
                <br />
              </ng-container>
            </ng-container>

            <div class="row">
              <div class="col-md-4">
                <br />
                <div class="title-5">Driver total</div>
                <div class="title-5-new">
                  {{
                    parseDriverTime(
                      this.ticket_detail?.driver_hours,
                      this.ticket_detail?.driver_minutes
                    )
                  }}
                </div>
              </div>
              <div class="col-8">
                <div class="p-2 ticket-detail-div min-height-50">
                  <div class="title-5">Driver notes:</div>
                  <div class="title-5-new">
                    {{ this.ticket_detail?.notes_for_approver }}
                  </div>
                </div>
              </div>
            </div>
            <br />
            <div class="myhr"></div>
            <br />
            <div class="row">
              <div class="col-md-4">
                <div class="title-5">Approved hours</div>
                <div class="title-5-new">
                  Waiting for
                  {{
                    this.ticket_detail?.ticket?.approver
                      ? this.ticket_detail?.ticket?.approver?.full_name
                      : this.ticket_detail?.ticket?.tc_approver?.full_name
                  }}
                </div>
              </div>
              <div class="col-8">
                <div class="p-2 ticket-detail-div min-height-50">
                  <div class="title-5">Notes From Approver:</div>
                  <div class="title-5-new">
                    {{ this.ticket_detail?.approver_notes }}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div
  class="modal fade come-from-modal right"
  id="myModalAapproved"
  tabindex="-1"
  role="dialog"
  aria-labelledby="myModalLabel"
>
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-body modal-body-padding" *ngIf="!is_self_dispatched">
        <div class="d-flex justify-content-between align-items-center">
          <div>
            <div class="welcome-text">Ticket IDs</div>
            <div class="dashboard-title">
              {{ this.ticket_detail?.ticket?.ticket_no }}
            </div>
          </div>
          <div>
            <img
              *ngIf="
                this.ticket_detail?.ticket?.required_paper_ticket_id == 'YES'
              "
              src="../assets/icons/driver-paperticket-icon.svg"
              height="20"
              class="mr-1"
            />
            <button
              class="mybtn bg-blue text-white width-fit-content btn-text-very-small"
            >
              Approved
            </button>
          </div>
        </div>
        <br />

        <div class="row">
          <div class="col-md-9">
            <nav>
              <div
                class="nav nav-pills nav-fill ticket-tabs mb-20"
                id="nav-tab"
                role="tablist"
              >
                <a
                  class="nav-item nav-link active"
                  id="nav-home-tab"
                  data-toggle="tab"
                  href="#ticket-detail-approved"
                  role="tab"
                  aria-controls="nav-home"
                  aria-selected="true"
                  >Ticket details</a
                >
                <a
                  class="nav-item nav-link"
                  id="nav-profile-tab"
                  data-toggle="tab"
                  href="#round-detail-approved"
                  role="tab"
                  aria-controls="nav-profile"
                  aria-selected="false"
                  >Job details</a
                >
              </div>
            </nav>
          </div>
          <div class="col-md-3">
            <div align="right">
              <div class="title-5-new2">Date</div>
              <div class="title-5-new">
                {{
                  this.time_conversion(this.ticket_detail, 1).convertedDate
                    ? this.time_conversion(this.ticket_detail, 1).convertedDate
                    : this.ticket_detail?.ticket?.ticket_date
                }}
              </div>
            </div>
          </div>
        </div>
        <div class="tab-content" id="nav-tabContent">
          <div
            *ngIf="!this.ticket_detail?.tc_ticket"
            class="tab-pane fade show active"
            id="ticket-detail-approved"
            role="tabpanel"
            aria-labelledby="nav-home-tab"
          >
            <div class="ticket-detail-div bg-light-yellow2">
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="mb-2"></div>
                    <div class="title-17 text-color-black-shade6">
                      {{ this.ticket_detail?.ticket?.user?.company_name }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2 text-right">Project</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.ticket?.project?.project_name }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Job number</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.ticket?.project?.job_number }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2 text-right">Project address</div>
                    <div class="title-5-new">
                      {{
                        this.ticket_detail?.ticket?.project?.project_location
                      }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Job Approver</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.ticket?.approver?.full_name }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">Approved: Date / Time</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.approved_at | date : "shortDate" }}
                      /
                      {{ this.ticket_detail?.approved_at | date : "shortTime" }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-12">
                    <div class="title-5-new2">Description</div>
                    <div class="title-11 text-color-black-shade">
                      {{ this.ticket_detail?.ticket?.description }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="ticket-detail-div">
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Trucking Company</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trucking_company?.company_name }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">
                      {{
                        this.ticket_detail?.ticket?.ticket_truck_type
                          ?.rate_type == "hour"
                          ? "Hour rate"
                          : this.ticket_detail?.ticket?.ticket_truck_type
                              ?.rate_type == "round"
                          ? "Round rate"
                          : "Hour rate"
                      }}
                    </div>
                    <div class="title-5-new">
                      <div
                        class="border-pink"
                        style="
                          border-radius: 5px;
                          text-align: right;
                          width: 90px;
                        "
                      >
                        ${{ this.ticket_detail?.rate_per_hour }}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Dispatcher</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trucking_company?.full_name }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">Contact #</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trucking_company?.contact_number }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <br />
            <!-- <div class="title-5 ">Truck details</div> -->
            <div class="ticket-detail-div mybtn-back-pink mb-29">
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Job started</div>
                    <div class="title-5-new">
                      {{
                        this.time_conversion(this.ticket_detail, 3)
                          .convertedTime
                          ? this.time_conversion(this.ticket_detail, 3)
                              .convertedTime
                          : (this.ticket_detail?.started_at
                            | date : "shortTime")
                      }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">Job total</div>
                    <div class="title-5-new">
                      {{ parseJobTotal(this.ticket_detail?.total_time) }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Driver</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.driver?.full_name }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">Driver total</div>
                    <div class="title-5-new">
                      {{
                        parseDriverTime(
                          this.ticket_detail?.driver_hours,
                          this.ticket_detail?.driver_minutes
                        )
                      }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div
            *ngIf="
              this.ticket_detail?.tc_ticket &&
              this.ticket_detail?.tc_ticket == 'YES'
            "
            class="tab-pane fade show active"
            id="ticket-detail-approved"
            role="tabpanel"
            aria-labelledby="nav-home-tab"
          >
            <div class="ticket-detail-div bg-light-yellow2">
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="mb-2"></div>
                    <div class="title-17 text-color-black-shade6">
                      {{
                        this.ticket_detail?.ticket?.customer
                          ? this.ticket_detail?.ticket?.customer?.company_name
                          : this.ticket_detail?.ticket?.tc_customer
                              ?.company_name
                      }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2 text-right">Project</div>
                    <div class="title-5-new">
                      {{
                        this.ticket_detail?.ticket?.project
                          ? this.ticket_detail?.ticket?.project?.project_name
                          : this.ticket_detail?.ticket?.tc_project?.project_name
                      }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Job number</div>
                    <div class="title-5-new">
                      {{
                        this.ticket_detail?.ticket?.project
                          ? this.ticket_detail?.ticket?.project?.job_number
                          : this.ticket_detail?.ticket?.tc_project?.job_number
                      }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2 text-right">Project address</div>
                    <div class="title-5-new">
                      {{
                        this.ticket_detail?.ticket?.project
                          ? this.ticket_detail?.ticket?.project
                              ?.project_location
                          : this.ticket_detail?.ticket?.tc_project
                              ?.project_location
                      }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Job Approver</div>
                    <div class="title-5-new">
                      {{
                        this.ticket_detail?.ticket?.approver
                          ? this.ticket_detail?.ticket?.approver?.full_name
                          : this.ticket_detail?.ticket?.tc_approver?.full_name
                      }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">Approved: Date / Time</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.approved_at | date : "shortDate" }}
                      /
                      {{ this.ticket_detail?.approved_at | date : "shortTime" }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-12">
                    <div class="title-5-new2">Description</div>
                    <div class="title-11 text-color-black-shade">
                      {{ this.ticket_detail?.ticket?.description }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="ticket-detail-div">
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Trucking Company</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trucking_company?.company_name }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">
                      {{
                        this.ticket_detail?.ticket?.ticket_truck_type
                          ?.rate_type == "hour"
                          ? "Hour rate"
                          : this.ticket_detail?.ticket?.ticket_truck_type
                              ?.rate_type == "round"
                          ? "Round rate"
                          : "Hour rate"
                      }}
                    </div>
                    <div class="title-5-new">
                      <div
                        class="border-pink"
                        style="
                          border-radius: 5px;
                          text-align: right;
                          width: 90px;
                        "
                      >
                        ${{ this.ticket_detail?.rate_per_hour }}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Dispatcher</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trucking_company?.full_name }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">Contact #</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trucking_company?.contact_number }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <br />
            <!-- <div class="title-5 ">Truck details</div> -->
            <div class="ticket-detail-div mybtn-back-pink mb-29">
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Job started</div>
                    <div class="title-5-new">
                      {{
                        this.time_conversion(this.ticket_detail, 3)
                          .convertedTime
                          ? this.time_conversion(this.ticket_detail, 3)
                              .convertedTime
                          : (this.ticket_detail?.started_at
                            | date : "shortTime")
                      }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">Job total</div>
                    <div class="title-5-new">
                      {{ parseJobTotal(this.ticket_detail?.total_time) }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Driver</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.driver?.full_name }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">Driver total</div>
                    <div class="title-5-new">
                      {{
                        parseDriverTime(
                          this.ticket_detail?.driver_hours,
                          this.ticket_detail?.driver_minutes
                        )
                      }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div
            class="tab-pane fade mb-5"
            id="round-detail-approved"
            role="tabpanel"
            aria-labelledby="nav-profile-tab"
          >
            <br />
            <div class="ticket-detail-div">
              <div class="p-10px">
                <div class="row">
                  <div class="col-4">
                    <div class="title-5-new2">Truck name</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.truck?.truck_nickname }}
                    </div>
                  </div>
                  <div class="col-4" align="center">
                    <div class="title-5-new2">Truck type</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.truck?.truck_type }}
                    </div>
                  </div>
                  <div class="col-4" align="right">
                    <div class="title-5-new2">License plate</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.truck?.truck_license_plate }}
                    </div>
                  </div>
                </div>
              </div>
              <ng-container
                *ngIf="
                  this.ticket_detail?.trailer &&
                  this.ticket_detail?.trailer?.trailer_nickname
                "
              >
                <div class="myhr"></div>
                <div class="p-10px">
                  <div class="row">
                    <div class="col-4">
                      <div class="title-5-new2">Trailer Name</div>
                      <div class="title-5-new">
                        {{ this.ticket_detail?.trailer?.trailer_nickname }}
                      </div>
                    </div>
                    <div class="col-4" align="center">
                      <div class="title-5-new2">Trailer type</div>
                      <div class="title-5-new">
                        {{ this.ticket_detail?.trailer?.trailer_type }}
                      </div>
                    </div>
                    <div class="col-4" align="right">
                      <div class="title-5-new2">License plate</div>
                      <div class="title-5-new">
                        {{ this.ticket_detail?.trailer?.trailer_license_plate }}
                      </div>
                    </div>
                  </div>
                </div>
              </ng-container>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-4">
                    <div class="title-5-new2">Job started</div>
                    <div class="title-5-new">
                      {{
                        this.time_conversion(this.ticket_detail, 3)
                          .convertedTime
                          ? this.time_conversion(this.ticket_detail, 3)
                              .convertedTime
                          : (this.ticket_detail?.started_at
                            | date : "shortTime")
                      }}
                    </div>
                  </div>
                  <div class="col-4" align="center">
                    <div class="title-5-new2">Rounds</div>
                    <div class="title-5-new">
                      <img
                        src="../../assets/icons/restart.svg"
                        class="mt-minus-3px"
                      />{{ this.total_rounds }}
                    </div>
                  </div>
                  <div class="col-4" align="right">
                    <div class="title-5-new2">Job total</div>
                    <div class="title-5-new">
                      {{ this.parseJobTotal2(this.ticket_detail?.total_time) }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <br />
            <ng-container
              *ngFor="
                let round of this.ticket_detail?.ticket
                  ?.ticket_truck_type_rounds.length > 0
                  ? this.ticket_detail?.ticket?.ticket_truck_type_rounds
                  : []
              "
            >
              <ng-container
                *ngIf="
                  (this.ticket_detail?.ticket?.status != 'Completed' &&
                    this.ticket_detail?.ticket?.status != 'Approved') ||
                  ((this.ticket_detail?.ticket?.status == 'Completed' ||
                    this.ticket_detail?.ticket?.status == 'Approved') &&
                    round.driver_start_time &&
                    round.round_time)
                "
              >
                <div class="title-5">Round {{ round.round_no }}</div>
                <div class="ticket-detail-div">
                  <div class="p-10px">
                    <div class="row">
                      <div class="col-md-6">
                        <div class="title-5">Material out</div>
                        <div class="title-5-new">
                          {{ round.material_taken_out }}
                        </div>
                      </div>
                      <div class="col-md-6" align="right">
                        <div class="title-5 text-right">Dump site</div>
                        <div class="title-5-new">{{ round.dump_site }}</div>
                      </div>
                    </div>
                  </div>
                  <div class="myhr"></div>
                  <div class="p-10px">
                    <div class="row">
                      <div class="col-6">
                        <div class="title-5">Round started</div>
                        <div class="title-5-new">
                          {{ round.driver_start_time | date : "shortTime" }}
                        </div>
                      </div>
                      <div class="col-6" align="right">
                        <div class="title-5 text-right">Round total</div>
                        <div class="title-5-new text-right">
                          {{
                            round.round_time && round.round_time !== null
                              ? round.round_time + "m"
                              : ""
                          }}
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="myhr"></div>
                  <div class="p-10px">
                    <div class="row">
                      <div class="col-md-12">
                        <div class="title-5">Notes :</div>
                        <div class="title-5-new">{{ round?.driver_notes }}</div>
                      </div>
                    </div>
                  </div>
                </div>
                <br />
              </ng-container>
            </ng-container>

            <div class="row">
              <div class="col-md-4">
                <br />
                <div class="title-5">Driver total</div>
                <div class="title-5-new">
                  {{
                    parseDriverTime(
                      this.ticket_detail?.driver_hours,
                      this.ticket_detail?.driver_minutes
                    )
                  }}
                </div>
              </div>

              <div class="col-8">
                <div class="p-2 ticket-detail-div min-height-50">
                  <div class="title-5">Driver notes:</div>
                  <div class="title-5-new">
                    {{ this.ticket_detail?.notes_for_approver }}
                  </div>
                </div>
              </div>
            </div>
            <br />
            <div class="myhr"></div>
            <br />
            <div class="row">
              <div class="col-md-4">
                <div class="title-5">Approved hours</div>
                <div class="title-5-new">
                  <b *ngIf="this.ticket_detail?.ticket?.status == 'Completed'">
                    Waiting for
                    {{
                      this.ticket_detail?.ticket?.approver
                        ? this.ticket_detail?.ticket?.approver?.full_name
                        : this.ticket_detail?.ticket?.tc_approver?.full_name
                    }}
                  </b>
                  <b *ngIf="this.ticket_detail?.ticket?.status == 'Approved'">
                    <span
                      *ngIf="
                        this.ticket_detail?.ticket?.status == 'Approved' &&
                        this.ticket_detail?.approver_time != ''
                      "
                    >
                      {{
                        this.ticket_detail?.approver_time
                          ? parseHour(this.ticket_detail?.approver_time)
                          : ""
                      }}
                    </span>

                    <span
                      *ngIf="
                        this.ticket_detail?.ticket?.status == 'Approved' &&
                        (this.ticket_detail?.approver_time == '' ||
                          this.ticket_detail?.approver_time == 'null' ||
                          this.ticket_detail?.approver_time == null)
                      "
                    >
                      {{
                        parseDriverTime(
                          this.ticket_detail?.driver_hours,
                          this.ticket_detail?.driver_minutes
                        )
                      }}
                    </span>
                  </b>
                </div>
              </div>
              <div class="col-8">
                <div class="p-2 ticket-detail-div min-height-50">
                  <div class="title-5">Notes From Approver:</div>
                  <div class="title-5-new">
                    {{ this.ticket_detail?.approver_notes }}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="fix-button" align="center">
          <button
            type="button"
            class="mybtn2 mybtn-back-pink mybtn-box-shadow"
            *ngIf="!is_downloading"
            (click)="handlePDFDownload(this.ticket_detail)"
          >
            Download PDF
          </button>
          <button
            type="button"
            class="mybtn2 mybtn-back-pink mybtn-box-shadow"
            *ngIf="is_downloading"
            disabled
          >
            Downloading..
          </button>
        </div>
      </div>
      <div class="modal-body modal-body-padding" *ngIf="is_self_dispatched">
        <div class="d-flex justify-content-between align-items-center">
          <div>
            <div class="welcome-text">Ticket IDs</div>
            <div class="dashboard-title">
              {{ this.ticket_detail?.ticket_no }}
            </div>
          </div>
          <div>
            <img
              src="../assets/icons/driver-paperticket-icon.svg"
              height="20"
              class="mr-1"
            />
            <button
              class="mybtn bg-blue text-white width-fit-content btn-text-very-small"
            >
              Approved
            </button>
          </div>
        </div>
        <br />

        <div class="row">
          <div class="col-md-9">
            <nav>
              <div
                class="nav nav-pills nav-fill ticket-tabs mb-20"
                id="nav-tab"
                role="tablist"
              >
                <a
                  class="nav-item nav-link active"
                  id="nav-home-tab"
                  data-toggle="tab"
                  href="#ticket-detail-approved"
                  role="tab"
                  aria-controls="nav-home"
                  aria-selected="true"
                  >Ticket details</a
                >
                <a
                  class="nav-item nav-link"
                  id="nav-profile-tab"
                  data-toggle="tab"
                  href="#round-detail-approved"
                  role="tab"
                  aria-controls="nav-profile"
                  aria-selected="false"
                  >Job details</a
                >
              </div>
            </nav>
          </div>
          <div class="col-md-3">
            <div align="right">
              <div class="title-5-new2">Date</div>
              <div class="title-5-new">
                {{
                  this.time_conversion(this.ticket_detail, 2).convertedDate
                    ? this.time_conversion(this.ticket_detail, 2).convertedDate
                    : this.ticket_detail?.ticket_date
                }}
              </div>
            </div>
          </div>
        </div>
        <div class="tab-content" id="nav-tabContent">
          <div
            class="tab-pane fade show active"
            id="ticket-detail-approved"
            role="tabpanel"
            aria-labelledby="nav-home-tab"
          >
            <div class="ticket-detail-div bg-light-yellow2">
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="mb-2"></div>
                    <div class="title-17 text-color-black-shade6">
                      {{
                        this.ticket_detail?.construction_company?.company_name
                      }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2 text-right">Project</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.project?.project_name }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Job number</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.project?.job_number }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2 text-right">Project address</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.project?.street }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Job Approver</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.approver?.name }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">Approved: Date / Time</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.approved_at | date : "shortDate" }}
                      /
                      {{ this.ticket_detail?.approved_at | date : "shortTime" }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-12">
                    <div class="title-5-new2">Description</div>
                    <div class="title-11 text-color-black-shade">
                      {{ this.ticket_detail?.description }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="ticket-detail-div">
              <div class="p-10px">
                <div class="row">
                  <div class="col-4">
                    <div class="title-5-new2">Trucking Company</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trucking_company?.company_name }}
                    </div>
                  </div>
                  <div class="col-4" align="center">
                    <div class="title-5-new2">Hour rate</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.trucking_company?.hour_rate }}
                    </div>
                  </div>
                  <div class="col-4" align="right">
                    <div class="title-5-new2">Paper ticket ID</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.paper_ticket_id }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Dispatcher</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.dispatcher?.name }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">Contact #</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.dispatcher?.contact_number }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <br />
            <!-- <div class="title-5 ">Truck details</div> -->
            <div class="ticket-detail-div mybtn-back-pink mb-29">
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Job started</div>
                    <div class="title-5-new">
                      {{
                        this.time_conversion(this.ticket_detail, 3)
                          .convertedTime
                          ? this.time_conversion(this.ticket_detail, 3)
                              .convertedTime
                          : (this.ticket_detail?.started_at
                            | date : "shortTime")
                      }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">Job total</div>
                    <div class="title-5-new">
                      {{ parseJobTotal(this.ticket_detail?.total_time) }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-6">
                    <div class="title-5-new2">Driver</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.driver?.full_name }}
                    </div>
                  </div>
                  <div class="col-6" align="right">
                    <div class="title-5-new2">Driver total</div>
                    <div class="title-5-new">
                      {{
                        parseDriverTime(
                          this.ticket_detail?.driver_hours,
                          this.ticket_detail?.driver_minutes
                        )
                      }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div
            class="tab-pane fade mb-5"
            id="round-detail-approved"
            role="tabpanel"
            aria-labelledby="nav-profile-tab"
          >
            <br />
            <div class="ticket-detail-div">
              <div class="p-10px">
                <div class="row">
                  <div class="col-4">
                    <div class="title-5-new2">Truck name</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.truck?.name }}
                    </div>
                  </div>
                  <div class="col-4" align="center">
                    <div class="title-5-new2">Truck type</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.truck?.type }}
                    </div>
                  </div>
                  <div class="col-4" align="right">
                    <div class="title-5-new2">License plate</div>
                    <div class="title-5-new">
                      {{ this.ticket_detail?.truck?.license_plate }}
                    </div>
                  </div>
                </div>
              </div>
              <ng-container
                *ngIf="
                  this.ticket_detail?.trailer &&
                  this.ticket_detail?.trailer?.name
                "
              >
                <div class="myhr"></div>
                <div class="p-10px">
                  <div class="row">
                    <div class="col-4">
                      <div class="title-5-new2">Trailer Name</div>
                      <div class="title-5-new">
                        {{ this.ticket_detail?.trailer?.name }}
                      </div>
                    </div>
                    <div class="col-4" align="center">
                      <div class="title-5-new2">Trailer type</div>
                      <div class="title-5-new">
                        {{ this.ticket_detail?.trailer?.type }}
                      </div>
                    </div>
                    <div class="col-4" align="right">
                      <div class="title-5-new2">License plate</div>
                      <div class="title-5-new">
                        {{ this.ticket_detail?.trailer?.license_plate }}
                      </div>
                    </div>
                  </div>
                </div>
              </ng-container>
              <div class="myhr"></div>
              <div class="p-10px">
                <div class="row">
                  <div class="col-4">
                    <div class="title-5-new2">Job started</div>
                    <div class="title-5-new">
                      {{
                        this.time_conversion(this.ticket_detail, 3)
                          .convertedTime
                          ? this.time_conversion(this.ticket_detail, 3)
                              .convertedTime
                          : (this.ticket_detail?.started_at
                            | date : "shortTime")
                      }}
                    </div>
                  </div>
                  <div class="col-4" align="center">
                    <div class="title-5-new2">Rounds</div>
                    <div class="title-5-new">
                      <img
                        src="../../assets/icons/restart.svg"
                        class="mt-minus-3px"
                      />{{ this.total_rounds }}
                    </div>
                  </div>
                  <div class="col-4" align="right">
                    <div class="title-5-new2">Job total</div>
                    <div class="title-5-new">
                      {{ this.parseJobTotal2(this.ticket_detail?.total_time) }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <br />
            <ng-container
              *ngFor="
                let round of this.ticket_detail?.rounds.length > 0
                  ? this.ticket_detail?.rounds
                  : []
              "
            >
              <ng-container
                *ngIf="
                  (this.ticket_detail?.status != 'Completed' &&
                    this.ticket_detail?.status != 'Approved') ||
                  ((this.ticket_detail?.status == 'Completed' ||
                    this.ticket_detail?.status == 'Approved') &&
                    round.driver_start_time &&
                    round.round_time)
                "
              >
                <div class="title-5">Round {{ round.round_no }}</div>
                <div class="ticket-detail-div">
                  <div class="p-10px">
                    <div class="row">
                      <div class="col-md-6">
                        <div class="title-5">Material out</div>
                        <div class="title-5-new">
                          {{ round.material_taken_out }}
                        </div>
                      </div>
                      <div class="col-md-6" align="right">
                        <div class="title-5 text-right">Dump site</div>
                        <div class="title-5-new">
                          {{ round.dump_site_name }}
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="myhr"></div>
                  <div class="p-10px">
                    <div class="row">
                      <div class="col-6">
                        <div class="title-5">Round started</div>
                        <div class="title-5-new">
                          {{ round.driver_start_time | date : "shortTime" }}
                        </div>
                      </div>
                      <div class="col-6" align="right">
                        <div class="title-5 text-right">Round total</div>
                        <div class="title-5-new text-right">
                          {{
                            round.round_time && round.round_time !== null
                              ? round.round_time + "m"
                              : ""
                          }}
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="myhr"></div>
                  <div class="p-10px">
                    <div class="row">
                      <div class="col-md-12">
                        <div class="title-5">Notes :</div>
                        <div class="title-5-new">{{ round?.driver_notes }}</div>
                      </div>
                    </div>
                  </div>
                </div>
              </ng-container>
            </ng-container>

            <br />
            <div class="row">
              <div class="col-md-4">
                <br />
                <div class="title-5">Driver total</div>
                <div class="title-5-new">
                  {{
                    parseDriverTime(
                      this.ticket_detail?.driver_hours,
                      this.ticket_detail?.driver_minutes
                    )
                  }}
                </div>
              </div>

              <div class="col-8">
                <div class="p-2 ticket-detail-div min-height-50">
                  <div class="title-5">Driver notes:</div>
                  <div class="title-5-new">
                    {{ this.ticket_detail?.notes_for_approver }}
                  </div>
                </div>
              </div>
            </div>
            <br />
            <div class="myhr"></div>
            <br />
            <div class="row">
              <div class="col-md-4">
                <div class="title-5">Approved hours</div>
                <div class="title-5-new">
                  <b *ngIf="this.ticket_detail?.status == 'Completed'">
                    Waiting for {{ this.ticket_detail?.approver?.name }}
                  </b>
                  <b *ngIf="this.ticket_detail?.status == 'Approved'">
                    <span
                      *ngIf="
                        this.ticket_detail?.status == 'Approved' &&
                        this.ticket_detail?.approver_time != ''
                      "
                    >
                      {{
                        this.ticket_detail?.approver_time
                          ? parseHour(this.ticket_detail?.approver_time)
                          : ""
                      }}
                    </span>

                    <span
                      *ngIf="
                        this.ticket_detail?.status == 'Approved' &&
                        (this.ticket_detail?.approver_time == '' ||
                          this.ticket_detail?.approver_time == 'null' ||
                          this.ticket_detail?.approver_time == null)
                      "
                    >
                      {{
                        parseDriverTime(
                          this.ticket_detail?.driver_hours,
                          this.ticket_detail?.driver_minutes
                        )
                      }}
                    </span>
                  </b>
                </div>
              </div>
              <div class="col-8">
                <div class="p-2 ticket-detail-div min-height-50">
                  <div class="title-5">Notes From Approver:</div>
                  <div class="title-5-new">
                    {{ this.ticket_detail?.approver_notes }}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="fix-button" align="center">
          <button
            type="button"
            class="mybtn2 mybtn-back-pink mybtn-box-shadow"
            *ngIf="!is_downloading"
            (click)="handlePDFDownloadSelf(this.ticket_detail)"
          >
            Download PDF
          </button>
          <button
            type="button"
            class="mybtn2 mybtn-back-pink mybtn-box-shadow"
            *ngIf="is_downloading"
            disabled
          >
            Downloading..
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="declinereasonModal" role="dialog">
  <div class="vertical-alignment-helper">
    <div class="modal-dialog vertical-align-center">
      <div class="modal-content">
        <div class="modal-body">
          <div class="row">
            <div class="col-md-6" style="float: left">
              <div class="ticket-label">Ticket IDs</div>
              <div class="dashboard-title2">
                {{ this.ticket_detail?.ticket?.ticket_no }}
              </div>
            </div>
            <div class="col-md-6" style="float: right">
              <div class="status-div bg-red">
                <div class="d-flex justify-content-between align-items-center">
                  <div class="title-2 title-status text-white">Declining</div>
                  <div class="title-2 title-status status-div-white ml-1">
                    1
                  </div>
                </div>
              </div>
            </div>
          </div>
          <nav class="d-flex justify-content-between mb-15">
            <div align="left" class="declining-label">Reason for declining</div>
            <div class="" align="right">
              <div class="title-5 text-grey-shade2 text-right">Date</div>
              <div class="title-5-new">
                {{
                  this.time_conversion(this.ticket_detail, 1).convertedDate
                    ? this.time_conversion(this.ticket_detail, 1).convertedDate
                    : this.ticket_detail?.ticket?.ticket_date
                }}
              </div>
            </div>
          </nav>

          <div class="agreement-div mt-2 mb-2">
            <textarea
              rows="3"
              (input)="setReason($event)"
              class="form-control"
              placeholder="Type here ..."
              >{{ this.reason_decline }}</textarea
            >
          </div>
          <div align="center">
            <div class="">
              <button
                type="button"
                style="width: max-content"
                class="btn-back gotosignup"
                (click)="declineHandler()"
              >
                Decline
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div
  class="modal fade come-from-modal right"
  id="myModalCreateTicket"
  tabindex="-1"
  role="dialog"
  aria-labelledby="myModalLabel"
>
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-body modal-body-padding">
        <div class="row mb-14">
          <div class="col-md-4 display-table">
            <div class="vertical-middle">
              <div class="title-7 text-color-black-shade5">Ticket ID</div>
              <div class="title-12 text-color-black-shade">
                {{ this.ticket_data?.ticket_no }}
              </div>
            </div>
          </div>
          <div class="col-md-4" align="center">
            <div
              class="input-div required_field getinputfield22"
              id="calendar-div"
            >
              <div class="title-5-new2 text-color-black-shade5 text-left">
                Set date
              </div>
              <div class="myinput-new text-left">{{ this.ticket_date }}</div>
              <img
                src="../../assets/icons/calendar.svg"
                class="icon-center-right"
              />
              <div class="input-popup-div22 calendar-2 calendar-width-300">
                <div
                  id="pnlEventCalendar2"
                  style="width: 100%"
                  class=""
                  (click)="getVal2()"
                ></div>
              </div>
            </div>
          </div>
          <div class="col-md-4 display-table" align="right">
            <div class="vertical-middle">
              <button
                class="mybtn bg-light-grey2 width-fit-content btn-text-very-small2 m-0"
              >
                Pending
              </button>
            </div>
          </div>
        </div>
        <div class="bg-light-yellow2 mb-8 br-8">
          <div class="custom-padding5">
            <div class="row">
              <div class="col-md-6">
                <span class="text-danger" *ngIf="this.company_error != ''">{{
                  this.company_error
                }}</span>
                <div class="input-div  required_field getinputfield {{this.ticket_construction_company?.company_name ? 'border-grey bg-transparent ':'bg-yellow '}}">
                  <div class="title-5-new2 text-color-black-shade5 text-left">
                    Construction company
                  </div>
                  <div class="myinput-new">
                    {{
                      this.ticket_construction_company?.company_name
                        ? this.ticket_construction_company?.company_name
                        : "Select"
                    }}
                  </div>
                  <img
                    src="../../assets/icons/arrow-down-grey.svg"
                    class="icon-center-right"
                  />
                  <div class="input-popup-div cc-popup" id="cc-popup">
                    <div class="title-5-new2 text-color-black-shade5 mb-15px">
                      Construction company
                    </div>
                    <ng-container
                      *ngIf="
                        this.ticket_data &&
                        this.ticket_data?.construction_companies
                      "
                    >
                      <!-- <div class="title-18 text-right mb-2px">Default</div> -->
                      <ng-container
                        *ngFor="
                          let construction of this.ticket_data
                            ?.construction_companies
                        "
                      >
                        <div
                        (click)="
                              setTicketData(
                                construction,
                                'construction_company'
                              )
                            "
                        class="d-flex justify-content-between list-item {{  this.ticket_construction_company &&
                          construction?.id ==
                            this.ticket_construction_company?.id
                            ? 'active'
                            : ''}}  ">
                          <div
                            [ngClass]="
                              this.ticket_construction_company &&
                              construction?.id ==
                                this.ticket_construction_company?.id
                                ? 'title-5-new'
                                : 'title-5-new text-color-black-shade7'
                            "

                          >
                            {{ construction?.company_name }}
                          </div>
                          <!-- <input
                            type="checkbox"
                            class="mycheckbox2 d-none"
                            value="1"
                            (click)="
                              markDefault(
                                $event,
                                'freelance_construction_company',
                                construction?.id
                              )
                            "
                            [checked]="construction?.is_default == 1"
                          /> -->
                        </div>
                      </ng-container>
                    </ng-container>
                    <!-- (click)="setVisible('cc')" -->
                    <div
                      class="position-relative getinputfield2 d-flex align-items-center justify-content-between mb-15px cursor-pointer"
                      (click)="this.redirectTo('/freelance-driver-cc-settings')"
                    >
                      <div class="myinput-new myinput3">
                        Add
                      </div>
                      <img
                        src="../../assets/icons/edit.png"
                        class="icon-bottom-right2"
                      />
                    </div>
                    <div class="d-flex align-items-center justify-content-center mb-5px">
                      <button type="button" class="btn-set" (click)="this.closePopup('construction_company')">
                        Set
                      </button>
                    </div>
                    <!-- <div class="input-popup-div2" *ngIf="is_visible == 'cc'">
                      <form [formGroup]="addCC" (ngSubmit)="onAddCC()">
                        <div class="title-3 text-center mb-19">
                          Add Construction company
                        </div>
                        <span
                          *ngIf="
                            addCC.get('company_name')?.invalid && form_clicked
                          "
                          class="text-danger"
                        >
                          Company name is required.
                        </span>
                        <div class="position-relative mb-11 required_field2">
                          <input
                            type="text"
                            class="myinput-new myinput3"
                            formControlName="company_name"
                            placeholder="Add"
                          />
                          <img
                            src="../../assets/icons/edit.png"
                            class="icon-bottom-right2"
                          />
                        </div>
                        <div align="center" class="mb-17">
                          <button
                            class="mybtn2 mybtn-back-pink custom-padding8"
                            *ngIf="
                              is_loading_add == '' || is_loading_add != 'cc'
                            "
                          >
                            Add
                          </button>
                          <button
                            class="mybtn2 mybtn-back-pink custom-padding8"
                            type="button"
                            *ngIf="
                              is_loading_add != '' && is_loading_add == 'cc'
                            "
                            disabled
                          >
                            Adding..
                          </button>
                        </div>
                      </form>
                    </div> -->
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <span class="text-danger" *ngIf="this.project_error != ''">{{
                  this.project_error
                }}</span>
                <div class="input-div  required_field getinputfield {{this.ticket_project?.project_name ? 'border-grey bg-transparent ':'bg-yellow '}}">
                  <div class="title-5-new2 text-color-black-shade5 text-left">
                    Project name
                  </div>
                  <div class="myinput-new">
                    {{
                      this.ticket_project?.project_name
                        ? this.ticket_project?.project_name
                        : "Select"
                    }}
                  </div>
                  <img
                    src="../../assets/icons/arrow-down-grey.svg"
                    class="icon-center-right"
                  />
                  <div class="input-popup-div" id="project-popup">
                    <div class="title-5-new2 text-color-black-shade5 mb-15px">
                      Project name
                    </div>
                    <ng-container
                      *ngIf="this.ticket_data && this.ticket_data?.projects"
                    >
                      <!-- <div class="title-18 text-right mb-2px">Default</div> -->
                      <ng-container
                        *ngFor="let project of this.ticket_data?.projects"
                      >
                        <div
                        (click)="setTicketData(project, 'project')"
                        class="d-flex justify-content-between list-item {{  this.ticket_project &&
                          project?.id == this.ticket_project?.id
                            ? 'active'
                            : ''}}">
                          <div
                            [ngClass]="
                              this.ticket_project &&
                              project?.id == this.ticket_project?.id
                                ? 'title-5-new'
                                : 'title-5-new text-color-black-shade7'
                            "

                          >
                            {{ project?.project_name }}
                          </div>
                          <!-- <input
                            type="checkbox"
                            class="mycheckbox2"
                            value="1"
                            (click)="
                              markDefault(
                                $event,
                                'freelance_projects',
                                project?.id
                              )
                            "
                            [checked]="project?.is_default == 1"
                          /> -->
                        </div>
                      </ng-container>
                    </ng-container>

                    <div
                      class="position-relative getinputfield2 d-flex align-items-center justify-content-between mb-15px cursor-pointer"
                      (click)="setVisible('project')"
                    >
                      <input
                        type="text"
                        class="myinput-new myinput3"
                        placeholder="Add"
                      />
                      <img
                        src="../../assets/icons/edit.png"
                        class="icon-bottom-right2"
                      />
                    </div>
                    <div class="d-flex align-items-center justify-content-center mb-5px">
                      <button type="button" class="btn-set" (click)="this.closePopup('project')">
                        Set
                      </button>
                    </div>
                    <div
                      class="input-popup-div2"
                      *ngIf="is_visible == 'project'"
                    >
                      <form
                        [formGroup]="addProject"
                        (ngSubmit)="onAddProject()"
                      >
                        <div class="title-3 text-left  text-black mb-19">Add Project</div>
                        <span
                          *ngIf="
                            addProject.get('project_name')?.invalid &&
                            form_clicked
                          "
                          class="text-danger"
                        >
                          Project name is required.
                        </span>
                        <div class="position-relative mb-15 required_field2">
                          <div
                            class="title-5-new2 text-color-black-shade5 mb-5px"
                          >
                            Project name
                          </div>
                          <input
                            type="text"
                            formControlName="project_name"
                            class="myinput-new myinput3"
                            placeholder="Add"
                          />
                          <img
                            src="../../assets/icons/edit.png"
                            class="icon-bottom-right2"
                          />
                        </div>
                        <span
                          *ngIf="
                            addProject.get('job_number')?.invalid &&
                            form_clicked
                          "
                          class="text-danger"
                        >
                          Job number is required.
                        </span>
                        <div class="position-relative mb-15 required_field2">
                          <div
                            class="title-5-new2 text-color-black-shade5 mb-5px"
                          >
                            Job number
                          </div>
                          <input
                            type="text"
                            formControlName="job_number"
                            class="myinput-new myinput3"
                            placeholder="Add"
                          />
                          <img
                            src="../../assets/icons/edit.png"
                            class="icon-bottom-right2"
                          />
                        </div>
                        <span
                          *ngIf="
                            addProject.get('job_address')?.invalid &&
                            form_clicked
                          "
                          class="text-danger"
                        >
                          Job address is required.
                        </span>
                        <div class="position-relative mb-15 required_field2">
                          <div
                            class="title-5-new2 text-color-black-shade5 mb-5px"
                          >
                            Job address
                          </div>
                          <input
                            type="text"
                            formControlName="street"
                            class="myinput-new myinput3"
                            placeholder="Add"
                            (click)="toggleAddressPopup(true)"
                          />
                          <img
                            src="../../assets/icons/edit.png"
                            class="icon-bottom-right2"
                            (click)="toggleAddressPopup(true)"
                          />
                        </div>
                        <div
                          class="d-flex justify-content-center align-items-center mb-19"
                        >
                          <input
                            type="checkbox"
                            formControlName="is_default"
                            value="1"
                            class="mycheckbox2"
                          />
                          <div class="title-7 ml-10">Set as default</div>
                        </div>
                        <div align="center" class="mb-17">
                          <button
                            class="mybtn2 mybtn-back-pink custom-padding8"
                            *ngIf="
                              is_loading_add == '' ||
                              is_loading_add != 'project'
                            "
                          >
                            Add
                          </button>
                          <button
                            class="mybtn2 mybtn-back-pink custom-padding8"
                            type="button"
                            *ngIf="
                              is_loading_add != '' &&
                              is_loading_add == 'project'
                            "
                            disabled
                          >
                            Adding..
                          </button>
                        </div>
                      </form>

                    </div>
                    <div
                      class="input-popup-div3" *ngIf="this.show_address_popup">
                      <div class="title-3 text-center mb-19">Add/update address

                        <button
                          type="button"
                          (click)="toggleAddressPopup(false)"
                          id="closeBtn"
                          class="my-modal-close border-0 bg-transparent shadow-none mr-2 float-right"
                        >
                          <img
                            src="./assets/images/cross_2.svg"
                            alt="Close"
                            style="
                              width: 14px;
                              height: 14px;
                              margin-top: -10px;
                              margin-right: -15px;
                            "
                          />
                        </button>
                      </div>

                      <div class="row plr-10px">
                        <div class="col-6  plr-0">
                          <div class="position-relative mb-15 required_field2">
                            <div
                              class="title-5-new2 text-color-black-shade5 mb-5px"
                            >
                              Street
                            </div>

                            <span class="text-danger error_text" *ngIf="this.street_error !=''">{{street_error}}</span>
                            <input
                              type="text"
                              id="street"
                              class="myinput-new myinput3"
                              placeholder="Type here"
                            />
                            <img
                              src="../../assets/icons/edit.png"
                              class="icon-bottom-right2"
                            />
                          </div>
                        </div>
                        <div class="col-6  plr-0">

                          <div class="position-relative mb-15 required_field3">
                            <div
                              class="title-5-new2 text-color-black-shade5 mb-5px text-right"
                            >
                              City/Town
                            </div>
                            <span class="text-danger error_text" *ngIf="this.city_error !=''">{{city_error}}</span>
                            <img
                              src="../../assets/icons/edit.png"
                              class="icon-bottom-left2"
                            />
                            <input
                              type="text"
                              id="city"
                              class="myinput-new myinput3 text-right"
                              placeholder="Type here"
                            />

                          </div>
                        </div>
                      </div>
                      <div class="row plr-10px">
                        <div class="col-4  plr-0">
                          <div class="position-relative mb-15 required_field2">
                            <div
                              class="title-5-new2 text-color-black-shade5 mb-5px"
                            >
                              Country
                            </div>
                            <select
                              type="text"
                              id="country"
                              class="myinput-new myinput3 text-left"
                              placeholder="Select"
                              (change)="setCountry($event)"
                            >
                            <option value="">Select</option>
                            <option value="Canada">Canada</option>
                            <option value="USA">USA</option>
                            </select>
                            <img
                              src="../../assets/icons/arrow-down-grey.svg"
                              class="icon-bottom-right-select"
                            />
                          </div>
                        </div>

                        <div class="col-4  plr-0">

                          <div class="position-relative mb-15 required_field2">
                            <div
                              class="title-5-new2 text-color-black-shade5 mb-5px text-center"
                            >
                              Province/State
                            </div>
                            <span class="text-danger error_text" *ngIf="this.province_error !=''">{{province_error}}</span>
                            <select
                              type="text"
                              id="province"
                              class="myinput-new myinput3 text-left"
                              placeholder="Select"
                            >
                            <option value="">Select</option>
                            <ng-container *ngIf="set_country == 'USA'">
                              <ng-container *ngFor="let province of this.usa_provinces">
                                <option value='{{province}}'>{{province}}</option>
                              </ng-container>
                            </ng-container>
                            <ng-container *ngIf="set_country == 'Canada'">
                              <ng-container *ngFor="let province of this.canada_provinces">
                                <option value='{{province}}'>{{province}}</option>
                              </ng-container>
                            </ng-container>
                            </select>
                            <img
                              src="../../assets/icons/arrow-down-grey.svg"
                              class="icon-bottom-right-select"
                            />
                          </div>
                        </div>
                        <div class="col-4  plr-0">
                          <div class="position-relative mb-15 ">
                            <div
                              class="title-5-new2 text-color-black-shade5 mb-5px text-right"
                            >
                             Postal code
                            </div>
                            <img
                              src="../../assets/icons/edit.png"
                              class="icon-bottom-left2"
                            />
                            <input
                              type="text"
                              id="postal_code"
                              class="myinput-new myinput3 text-right"
                              placeholder="Type here"
                            />

                          </div>
                        </div>
                      </div>
                      <div class="d-flex align-items-center justify-content-center mb-5px">
                        <button type="button" class="btn-set" (click)="this.saveAddress()">
                          Update
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="myhr2"></div>
          <div class="custom-padding6">
            <div class="row">
              <div class="col-md-6">
                <div
                  class="title-5-new2 text-color-black-shade5 text-left mb-4px"
                >
                  Job number
                </div>
                <div class="title-5-new">
                  {{ this.ticket_project?.job_number }}
                </div>
              </div>
              <div class="col-md-6" align="right">
                <div class="title-5-new2 text-color-black-shade5 mb-4px">
                  Job address
                </div>
                <div class="title-5-new">
                  {{ this.ticket_project?.street }},
                  {{ this.ticket_project?.city }}
                </div>
              </div>
            </div>
          </div>
          <div class="myhr2"></div>
          <div class="custom-padding7">
            <div class="row">
              <div class="col-md-6">
                <span class="text-danger" *ngIf="this.approver_error != ''">{{
                  this.approver_error
                }}</span>
                <div class="input-div  required_field getinputfield {{this.ticket_approver ? 'border-grey bg-transparent ':'bg-yellow '}}">
                  <div class="title-5-new2 text-color-black-shade5 text-left">
                    Job approver
                  </div>
                  <div class="myinput-new">
                    {{
                      this.ticket_approver
                        ? this.ticket_approver?.name
                        : "Select"
                    }}
                  </div>
                  <img
                    src="../../assets/icons/arrow-down-grey.svg"
                    class="icon-center-right"
                  />
                  <div class="input-popup-div" id="approver-popup">
                    <div class="title-5-new2 text-color-black-shade5  mb-15px">
                      Job approver
                    </div>
                    <ng-container *ngIf="this.ticket_data">
                      <div class="title-18 text-right mb-2px">Default</div>
                      <ng-container *ngFor="let approver of this.approvers">
                        <div class="d-flex justify-content-between list-item {{ this.ticket_approver &&
                          approver?.id == this.ticket_approver?.id
                            ? 'active'
                            : ''}}">
                          <div
                            [ngClass]="
                              this.ticket_approver &&
                              approver?.id == this.ticket_approver?.id
                                ? 'title-5-new'
                                : 'title-5-new text-color-black-shade7'
                            "
                            (click)="setTicketData(approver, 'approver')"
                          >
                            {{ approver?.name }}
                          </div>
                          <input
                            type="checkbox"
                            class="mycheckbox2"
                            (click)="
                              markDefault($event, 'approver', approver?.id)
                            "
                            [checked]="approver?.is_default == 1"
                          />
                        </div>
                      </ng-container>
                    </ng-container>

                    <div
                      class="position-relative getinputfield2 mb-10px"
                      (click)="setVisible('approver')"
                    >
                      <input
                        type="text"
                        class="myinput-new myinput3"
                        placeholder="Add"
                      />
                      <img
                        src="../../assets/icons/edit.png"
                        class="icon-bottom-right2"
                      />
                    </div>
                    <div class="d-flex align-items-center justify-content-center mb-5px">
                      <button type="button" class="btn-set" (click)="this.closePopup('approver')">
                        Set
                      </button>
                    </div>
                    <div
                      class="input-popup-div2"
                      *ngIf="is_visible == 'approver'"
                    >
                      <form
                        [formGroup]="addApprover"
                        (ngSubmit)="onAddApprover()"
                      >
                        <div class="title-3 text-left text-black mb-19">
                          Add approver
                        </div>
                        <span
                          *ngIf="
                            addApprover.get('name')?.invalid && form_clicked
                          "
                          class="text-danger"
                        >
                          Name is required.
                        </span>
                        <div class="position-relative mb-15 required_field2">
                          <div
                            class="title-5-new2 text-color-black-shade5 mb-5px"
                          >
                            Name
                          </div>
                          <input
                            type="text"
                            class="myinput-new myinput3"
                            formControlName="name"
                            placeholder="Type here"
                          />
                          <img
                            src="../../assets/icons/edit.png"
                            class="icon-bottom-right2"
                          />
                        </div>
                        <span
                          *ngIf="
                            addApprover.get('contact_number')?.invalid &&
                            form_clicked
                          "
                          class="text-danger"
                        >
                          Contact number is required.
                        </span>
                        <div class="position-relative mb-15 required_field2">
                          <div
                            class="title-5-new2 text-color-black-shade5 mb-5px"
                          >
                            Contact number
                          </div>
                          <input
                            type="text"
                            class="myinput-new myinput3"
                            formControlName="contact_number"
                            (input)="changeNumber3($event)"
                            placeholder="(---) --- ----"
                          />
                          <img
                            src="../../assets/icons/edit.png"
                            class="icon-bottom-right2"
                          />
                        </div>
                        <span
                          *ngIf="
                            addApprover.get('email')?.invalid && form_clicked
                          "
                          class="text-danger"
                        >
                          Email is required.
                        </span>
                        <div class="position-relative mb-20">
                          <div
                            class="title-5-new2 text-color-black-shade5 mb-5px"
                          >
                            Email address
                          </div>
                          <input
                            type="text"
                            class="myinput-new myinput3"
                            formControlName="email"
                            placeholder="Type here"
                          />
                          <img
                            src="../../assets/icons/edit.png"
                            class="icon-bottom-right2"
                          />
                        </div>
                        <div align="center" class="mb-17">
                          <button
                            class="mybtn2 mybtn-back-pink custom-padding8"
                            *ngIf="
                              is_loading_add == '' ||
                              is_loading_add != 'approver'
                            "
                          >
                            Add
                          </button>
                          <button
                            class="mybtn2 mybtn-back-pink custom-padding8"
                            type="button"
                            *ngIf="
                              is_loading_add != '' &&
                              is_loading_add == 'approver'
                            "
                            disabled
                          >
                            Adding..
                          </button>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-6 display-table" align="right">
                <div class="vertical-middle">
                  <div class="title-5-new2 text-color-black-shade5 mb-4px">
                    Contact #
                  </div>
                  <div class="title-5-new">
                    {{
                      this.ticket_approver
                        ? this.ticket_approver?.contact_number
                        : ""
                    }}
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="myhr2"></div>
          <div class="custom-padding5">
            <div class="row">
              <div class="col-md-12">
                <div class="input-div getinputfield {{this.ticket_description ? 'border-grey bg-transparent ':'bg-yellow '}}">
                  <div class="title-5-new2 text-color-black-shade5 text-left">
                    Description
                  </div>
                  <div class="myinput-new">
                    {{
                      this.ticket_description
                        ? this.ticket_description
                        : "Type here"
                    }}
                  </div>
                  <img
                    src="../../assets/icons/arrow-down-grey.svg"
                    class="icon-center-right"
                  />
                  <div class="input-popup-div">
                    <div class="title-5-new2 text-color-black-shade5 mb-4px">
                      Description
                    </div>
                    <div class="position-relative">
                      <input
                        type="text"
                        class="myinput-new myinput3"
                        placeholder="Type here"
                        id="description_input_selfticket"
                        (input)="setTicketData($event, 'description')"
                      />
                      <img
                        src="../../assets/icons/edit.png"
                        class="icon-bottom-right2"
                      />
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="border-all mb-8 br-8">
          <div class="custom-padding5">
            <div class="row">
              <div class="col-md-6">
                <span class="text-danger" *ngIf="this.trucking_error != ''">{{
                  this.trucking_error
                }}</span>
                <div class="input-div required_field getinputfield  {{this.ticket_trucking_company?.company_name ? 'border-grey  ':' '}}">
                  <div class="title-5-new2 text-color-black-shade5 text-left">
                    Trucking company
                  </div>
                  <div class="myinput-new">
                    {{
                      this.ticket_trucking_company?.company_name
                        ? this.ticket_trucking_company?.company_name
                        : "Select"
                    }}
                  </div>
                  <img
                    src="../../assets/icons/arrow-down-grey.svg"
                    class="icon-center-right"
                  />
                  <div class="input-popup-div" id="tc-popup">
                    <div class="title-5-new2 text-color-black-shade5 text-black mb-15px">
                      Trucking company
                    </div>
                    <ng-container *ngIf="this.ticket_data">
                      <div class="title-18 text-right mb-2px">Default</div>
                      <ng-container
                        *ngFor="
                          let trucking_company of this.ticket_data
                            ?.trucking_companies
                        "
                      >
                        <div class="d-flex justify-content-between list-item {{  this.ticket_trucking_company &&
                          trucking_company?.id ==
                            this.ticket_trucking_company?.id
                            ? 'active'
                            : ''}}"

                            (click)="
                              setTicketData(
                                trucking_company,
                                'trucking_company'
                              )
                            "
                            >
                          <div
                            [ngClass]="
                              this.ticket_trucking_company &&
                              trucking_company?.id ==
                                this.ticket_trucking_company?.id
                                ? 'title-5-new'
                                : 'title-5-new text-color-black-shade7'
                            "

                          >
                            {{ trucking_company?.company_name }}
                          </div>
                          <input
                            type="checkbox"
                            class="mycheckbox2"
                            value="1"
                            (click)="
                              markDefault(
                                $event,
                                'freelance_trucking_company',
                                trucking_company?.id
                              )
                            "
                            [checked]="trucking_company?.is_default == 1"
                          />
                        </div>
                      </ng-container>
                    </ng-container>

                      <!-- (click)="redirectTo('/freelance-driver-tc-settings')" -->
                    <div
                      class="position-relative getinputfield2 mb-10px"
                      (click)="setVisible('trucking')"
                    >
                      <input
                        type="text"
                        class="myinput-new myinput3"
                        placeholder="Add"
                      />
                      <img
                        src="../../assets/icons/edit.png"
                        class="icon-bottom-right2"
                      />
                    </div>
                    <div class="d-flex align-items-center justify-content-center mb-5px">
                      <button type="button" class="btn-set" (click)="this.closePopup('trucking_company')">
                        Set
                      </button>
                    </div>
                    <div
                      class="input-popup-div2"
                      *ngIf="is_visible == 'trucking'"
                    >
                      <form [formGroup]="addTC" (ngSubmit)="onAddTC()">
                        <div class="title-3 text-center text-black mb-19">
                          Add trucking company
                        </div>
                        <span
                          *ngIf="
                            addTC.get('company_name')?.invalid && form_clicked
                          "
                          class="text-danger"
                        >
                          Company name is required.
                        </span>
                        <div class="position-relative mb-15 required_field2">
                          <div
                            class="title-5-new2 text-color-black-shade5 mb-5px"
                          >
                            Company name
                          </div>
                          <input
                            type="text"
                            class="myinput-new myinput3"
                            formControlName="company_name"
                            placeholder="Type here"
                          />
                          <img
                            src="../../assets/icons/edit.png"
                            class="icon-bottom-right2"
                          />
                        </div>
                        <span
                          *ngIf="
                            addTC.get('contact_name')?.invalid && form_clicked
                          "
                          class="text-danger"
                        >
                          Contact person name is required.
                        </span>
                        <div class="position-relative mb-15 required_field2">
                          <div
                            class="title-5-new2 text-color-black-shade5 mb-5px"
                          >
                            Contact person
                          </div>
                          <input
                            type="text"
                            class="myinput-new myinput3"
                            formControlName="contact_name"
                            placeholder="Type here"
                          />
                          <img
                            src="../../assets/icons/edit.png"
                            class="icon-bottom-right2"
                          />
                        </div>

                        <div class="position-relative mb-15">
                          <div
                            class="title-5-new2 text-color-black-shade5 mb-5px"
                          >
                            Contact phone
                          </div>
                          <input
                            type="text"
                            class="myinput-new myinput3"
                            formControlName="contact_phone"
                            (input)="changeNumber2($event)"
                            placeholder="(---) --- ----"
                          />
                          <img
                            src="../../assets/icons/edit.png"
                            class="icon-bottom-right2"
                          />
                        </div>

                        <div class="position-relative mb-15">
                          <div
                            class="title-5-new2 text-color-black-shade5 mb-5px"
                          >
                            Contact email
                          </div>
                          <input
                            type="text"
                            class="myinput-new myinput3"
                            formControlName="contact_email"
                            placeholder="Type here"
                          />
                          <img
                            src="../../assets/icons/edit.png"
                            class="icon-bottom-right2"
                          />
                        </div>
                        <div align="center" class="mb-17">
                          <button
                            class="mybtn2 mybtn-back-pink custom-padding8"
                            *ngIf="
                              is_loading_add == '' ||
                              is_loading_add != 'trucking'
                            "
                          >
                            Add
                          </button>
                          <button
                            class="mybtn2 mybtn-back-pink custom-padding8"
                            type="button"
                            *ngIf="
                              is_loading_add != '' &&
                              is_loading_add == 'trucking'
                            "
                            disabled
                          >
                            Adding..
                          </button>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <span
                  class="text-danger"
                  *ngIf="this.paper_ticket_id_error != ''"
                  >{{ this.paper_ticket_id_error }}</span
                >

                <div class="input-div getinputfield {{this.paper_ticket_id ? 'border-grey  ':' '}}">
                  <div class="d-flex dflex">
                    <img src="../../assets/icons/driver-paperticket-icon.svg" />
                    <div class="ml-rem">
                      <div
                        class="title-5-new2 text-color-black-shade5 text-left"
                      >
                        Paper ticket ID
                      </div>
                      <div class="myinput-new">
                        {{
                          this.paper_ticket_id
                            ? this.paper_ticket_id
                            : "Type here"
                        }}
                      </div>
                      <img
                        src="../../assets/icons/edit.png"
                        class="icon-bottom-right"
                      />
                      <div class="input-popup-div" id="paperticketid-popup">
                        <div
                          class="title-5-new2 text-color-black-shade5  mb-15px"
                        >
                          Paper ticket ID
                        </div>
                        <div class="position-relative mb-15px">
                          <input
                            type="text"
                            class="myinput-new myinput3"
                            placeholder="Type here"
                            id="paperticketid_input_selfticket"
                            (input)="setTicketData($event, 'paper_ticket_id')"
                          />
                          <img
                            src="../../assets/icons/edit.png"
                            class="icon-bottom-right2"
                          />
                        </div>
                        <div class="d-flex align-items-center justify-content-center mb-5px">
                          <button type="button" class="btn-set" (click)="this.closePopup('paper_ticket_id')">
                            Set
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="myhr2"></div>
          <div class="custom-padding7">
            <div class="row">
              <div class="col-md-6">
                <div class="input-div getinputfield {{this.ticket_dispatcher ? 'border-grey  ':' '}}">
                  <div class="title-5-new2 text-color-black-shade5 text-left ">
                    Dispatcher
                  </div>
                  <div class="myinput-new">
                    {{
                      this.ticket_dispatcher
                        ? this.ticket_dispatcher?.name
                        : "Select"
                    }}
                  </div>
                  <img
                    src="../../assets/icons/arrow-down-grey.svg"
                    class="icon-center-right"
                  />
                  <div class="input-popup-div bg-white" id="dispatcher-popup">
                    <div class="title-5-new2 text-color-black-shade5 mb-18">
                      Dispatcher
                    </div>
                    <ng-container *ngIf="this.ticket_data">
                      <ng-container *ngFor="let dispatcher of this.dispatchers">
                        <div class="d-flex justify-content-between  {{  this.ticket_dispatcher &&
                          dispatcher?.id ==
                            this.ticket_dispatcher?.id
                            ? 'active'
                            : ''}}"
                            (click)="setTicketData(dispatcher, 'dispatcher')"
                            >
                          <div
                            [ngClass]="
                              this.ticket_dispatcher &&
                              dispatcher?.id == this.ticket_dispatcher?.id
                                ? 'title-5-new mb-6'
                                : 'title-5-new text-color-black-shade7 mb-6'
                            "

                          >
                            {{ dispatcher?.name }}
                          </div>
                        </div>
                      </ng-container>
                    </ng-container>
                    <div
                      class="position-relative getinputfield2 mb-10px"
                      (click)="setVisible('dispatcher')"
                    >
                      <input
                        type="text"
                        class="myinput-new myinput3"
                        placeholder="Add"
                      />
                      <img
                        src="../../assets/icons/edit.png"
                        class="icon-bottom-right2"
                      />
                    </div>

                    <div
                      class="input-popup-div2"
                      *ngIf="this.is_visible == 'dispatcher'"
                    >
                      <div class="title-3 text-left text-black mb-19">
                        Add dispatcher
                      </div>
                      <form
                        [formGroup]="addDispatcher"
                        (ngSubmit)="onAddDispatcher()"
                      >
                        <span
                          *ngIf="
                            addDispatcher.get('name')?.invalid && form_clicked
                          "
                          class="text-danger"
                        >
                          Name is required.
                        </span>
                        <div class="position-relative mb-15 required_field2">
                          <div
                            class="title-5-new2 text-color-black-shade5 mb-5px"
                          >
                            Name
                          </div>
                          <input
                            type="text"
                            class="myinput-new myinput3"
                            formControlName="name"
                            placeholder="Nicholas Truck"
                          />
                          <img
                            src="../../assets/icons/edit.png"
                            class="icon-bottom-right2"
                          />
                        </div>
                        <span
                          *ngIf="
                            addDispatcher.get('contact_number')?.invalid &&
                            form_clicked
                          "
                          class="text-danger"
                        >
                          Contact number is required.
                        </span>
                        <div class="position-relative mb-20 required_field2">
                          <div
                            class="title-5-new2 text-color-black-shade5 mb-5px"
                          >
                            Contact number
                          </div>
                          <input
                            type="text"
                            class="myinput-new myinput3"
                            formControlName="contact_number"
                            (input)="changeNumber($event)"
                            placeholder="(---) --- ----"
                          />
                          <img
                            src="../../assets/icons/edit.png"
                            class="icon-bottom-right2"
                          />
                        </div>
                        <div align="center" class="mb-17">
                          <button
                            class="mybtn2 mybtn-back-pink custom-padding8"
                            *ngIf="
                              is_loading_add == '' ||
                              is_loading_add != 'dispatcher'
                            "
                          >
                            Add
                          </button>
                          <button
                            class="mybtn2 mybtn-back-pink custom-padding8"
                            type="button"
                            *ngIf="
                              is_loading_add != '' &&
                              is_loading_add == 'dispatcher'
                            "
                            disabled
                          >
                            Adding..
                          </button>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-6 display-table" align="right">
                <div class="vertical-middle">
                  <div class="title-5-new2 text-color-black-shade5 mb-4px">
                    Contact number
                  </div>
                  <div class="title-5-new">
                    {{
                      this.ticket_dispatcher
                        ? this.ticket_dispatcher?.contact_number
                        : ""
                    }}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="mybtn-back-pink mb-8 br-8">
          <div class="custom-padding5">
            <div class="row">
              <div class="col-md-6">
                <span class="text-danger" *ngIf="this.truck_error != ''">{{
                  this.truck_error
                }}</span>
                <div class="input-div  required_field_pink getinputfield {{!this.ticket_truck? 'bg-light-pink': 'bg-transparent no-shadow border-white'}} ">
                  <div class="title-5-new2 text-color-black-shade5 text-left">
                    Truck Name
                  </div>
                  <div class="myinput-new">
                    {{ this.ticket_truck ? this.ticket_truck?.name : "Select" }}
                  </div>
                  <img
                    src="../../assets/icons/arrow-down-grey.svg"
                    class="icon-center-right"
                  />
                  <div class="input-popup-div" id="truck-popup">
                    <div class="title-5-new2 text-color-black-shade5 mb-4px">
                      Truck name
                    </div>
                    <ng-container *ngIf="this.ticket_data">
                      <div class="title-18 text-right mb-2px">Default</div>
                      <ng-container
                        *ngFor="let truck of this.ticket_data?.trucks"
                      >
                        <div class="d-flex justify-content-between mb-2px list-item {{  this.ticket_truck &&
                          truck?.id == this.ticket_truck?.id
                            ? 'active'
                            : ''}}"
                            (click)="setTicketData(truck, 'truck')"
                            >
                          <div
                            [ngClass]="
                              this.ticket_truck &&
                              truck?.id == this.ticket_truck?.id
                                ? 'title-5-new'
                                : 'title-5-new text-color-black-shade7'
                            "

                          >
                            {{ truck?.name }}
                          </div>
                          <input
                            type="checkbox"
                            class="mycheckbox2"
                            value="1"
                            (click)="
                              markDefault($event, 'freelance_trucks', truck?.id)
                            "
                            [checked]="truck?.is_default == 1"
                          />
                        </div>
                      </ng-container>
                    </ng-container>

                    <div
                      class="position-relative getinputfield2 mb-10px"
                      (click)="setVisible('truck')"
                    >
                      <input
                        type="text"
                        class="myinput-new myinput3"
                        placeholder="Add"
                      />
                      <img
                        src="../../assets/icons/edit.png"
                        class="icon-bottom-right2"
                      />
                    </div>
                    <div class="d-flex align-items-center justify-content-center mb-5px">
                      <button type="button" class="btn-set" (click)="this.closePopup('truck')">
                        Set
                      </button>
                    </div>
                    <div
                      class="input-popup-div2"
                      *ngIf="this.is_visible == 'truck'"
                    >
                      <div class="title-3 text-left  text-black mb-19">Add truck</div>
                      <form [formGroup]="addTruck" (ngSubmit)="onAddTruck()">
                        <span
                          *ngIf="addTruck.get('name')?.invalid && form_clicked"
                          class="text-danger"
                        >
                          Name is required.
                        </span>
                        <div class="position-relative mb-15 required_field2">
                          <div
                            class="title-5-new2 text-color-black-shade5 mb-5px"
                          >
                            Truck name
                          </div>
                          <input
                            type="text"
                            class="myinput-new myinput3"
                            formControlName="name"
                            placeholder="Type here"
                          />
                          <img
                            src="../../assets/icons/edit.png"
                            class="icon-bottom-right2"
                          />
                        </div>
                        <span
                          *ngIf="
                            addTruck.get('license_plate')?.invalid &&
                            form_clicked
                          "
                          class="text-danger"
                        >
                          Truck license plate is required.
                        </span>
                        <div class="position-relative mb-15 required_field2">
                          <div
                            class="title-5-new2 text-color-black-shade5 mb-5px"
                          >
                            Truck license plate
                          </div>
                          <input
                            type="text"
                            class="myinput-new myinput3"
                            formControlName="license_plate"
                            placeholder="Type here"
                          />
                          <img
                            src="../../assets/icons/edit.png"
                            class="icon-bottom-right2"
                          />
                        </div>
                        <span
                          *ngIf="addTruck.get('type')?.invalid && form_clicked"
                          class="text-danger"
                        >
                          Truck type is required.
                        </span>
                        <div class="position-relative mb-15 required_field2">
                          <div
                            class="title-5-new2 text-color-black-shade5 mb-5px"
                            formControlName="type"
                          >
                            Truck type
                          </div>
                          <select
                            class="myinput-new myinput3 icon-none"
                            formControlName="type"
                          >
                            <option value="">Select</option>
                            <option value="Single">Single</option>
                            <option value="Tandem">Tandem</option>
                            <option value="Tridem">Tridem</option>
                            <option value="Quad-Axle">Quad-Axle</option>
                          </select>
                          <img
                            src="../../assets/icons/arrow-down-grey.svg"
                            class="icon-bottom-right22"
                          />
                        </div>
                        <div class="position-relative mb-15">
                          <div
                            class="title-5-new2 text-color-black-shade5 mb-5px"
                          >
                            Truck capacity in weight
                          </div>
                          <div class="d-flex align-items-center justify-content-center ">
                            <div class="w-50">
                              <input type="number" placeholder="Enter"  step="1" min="0" formControlName="weight" class="capacity-input myinput-new myinput3 br-right-none">
                            </div>
                            <div class="w-50">
                              <select
                                class="myinput-new myinput3 icon-none br-left-none"
                                formControlName="weight_unit"
                              >
                                <option value="m3">m3</option>
                              </select>
                              <img
                                src="../../assets/icons/arrow-down-grey.svg"
                                class="icon-bottom-right22"
                              />
                            </div>
                          </div>
                        </div>

                        <div class="position-relative mb-15">
                          <div
                            class="title-5-new2 text-color-black-shade5 mb-5px"
                          >
                            Truck capacity in volume
                          </div>
                          <div class="d-flex align-items-center justify-content-center ">
                            <div class="w-50">
                              <input type="number" step="1" placeholder="Enter" min="0" formControlName="volume" class="capacity-input myinput-new myinput3 br-right-none">
                            </div>
                            <div class="w-50">
                              <select
                                class="myinput-new myinput3 icon-none br-left-none"
                                formControlName="volume_unit"
                              >
                                <option value="tons">tons</option>
                              </select>
                              <img
                                src="../../assets/icons/arrow-down-grey.svg"
                                class="icon-bottom-right22"
                              />
                            </div>
                          </div>
                        </div>
                        <div class="position-relative mb-15">
                          <div
                            class="title-5-new2 text-color-black-shade5 mb-5px"
                          >
                            Truck Color
                          </div>
                          <input
                            type="text"
                            class="myinput-new myinput3"
                            formControlName="color"
                            placeholder="Type here"
                          />
                          <img
                            src="../../assets/icons/edit.png"
                            class="icon-bottom-right2"
                          />
                        </div>
                        <div
                          class="d-flex justify-content-between  align-items-center mb-19 default-div text-black"
                        >
                          <div class="title-7 ml-10">Set as default</div>
                          <input
                            type="checkbox"
                            class="mycheckbox2 float-right"
                            value="1"
                            formControlName="is_default"
                          />

                        </div>
                        <div align="center" class="mb-17">
                          <button
                            class="mybtn2 mybtn-back-pink custom-padding8"
                            *ngIf="
                              is_loading_add == '' || is_loading_add != 'truck'
                            "
                          >
                            Add
                          </button>
                          <button
                            class="mybtn2 mybtn-back-pink custom-padding8"
                            type="button"
                            *ngIf="
                              is_loading_add != '' && is_loading_add == 'truck'
                            "
                            disabled
                          >
                            Adding..
                          </button>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="input-div {{!this.ticket_trailer? 'bg-light-pink': 'bg-transparent no-shadow border-white'}} getinputfield">
                  <div class="title-5-new2 text-color-black-shade5 text-left">
                    Trailer Name
                  </div>
                  <div class="myinput-new">
                    {{
                      this.ticket_trailer ? this.ticket_trailer?.name : "Select"
                    }}
                  </div>
                  <img
                    src="../../assets/icons/arrow-down-grey.svg"
                    class="icon-center-right"
                  />
                  <div class="input-popup-div" id="trailer-popup">
                    <div class="title-5-new2 text-color-black-shade5 mb-4px">
                      Trailer name
                    </div>
                    <ng-container *ngIf="this.ticket_data?.trailers">
                      <div class="title-18 text-right mb-2px">Default</div>
                      <ng-container
                        *ngFor="let trailer of this.ticket_data?.trailers"
                      >
                        <div class="d-flex justify-content-between mb-2px list-item {{   this.ticket_trailer &&
                          trailer?.id == this.ticket_trailer?.id
                            ? 'active'
                            : ''}}"

                            (click)="setTicketData(trailer, 'trailer')"
                            >
                          <div
                            [ngClass]="
                              this.ticket_trailer &&
                              trailer?.id == this.ticket_trailer?.id
                                ? 'title-5-new'
                                : 'title-5-new text-color-black-shade7'
                            "

                          >
                            {{ trailer?.name }}
                          </div>
                          <input
                            type="checkbox"
                            class="mycheckbox2"
                            value="1"
                            (click)="
                              markDefault(
                                $event,
                                'freelance_trucks',
                                trailer?.id
                              )
                            "
                            [checked]="trailer?.is_default == 1"
                          />
                        </div>
                      </ng-container>
                    </ng-container>

                    <div
                      class="position-relative getinputfield2 mb-10px"
                      (click)="setVisible('trailer')"
                    >
                      <input
                        type="text"
                        class="myinput-new myinput3"
                        placeholder="Add"
                      />
                      <img
                        src="../../assets/icons/edit.png"
                        class="icon-bottom-right2"
                      />
                    </div>
                    <div class="d-flex align-items-center justify-content-center mb-5px">
                      <button type="button" class="btn-set" (click)="this.closePopup('trailer')">
                        Set
                      </button>
                    </div>
                    <div
                      class="input-popup-div2"
                      *ngIf="this.is_visible == 'trailer'"
                    >
                      <div class="title-3 text-center mb-19">Add Trailer</div>
                      <form
                        [formGroup]="addTrailer"
                        (ngSubmit)="onAddTrailer()"
                      >
                        <span
                          *ngIf="
                            addTrailer.get('name')?.invalid && form_clicked
                          "
                          class="text-danger"
                        >
                          Name is required.
                        </span>
                        <div class="position-relative mb-15 required_field2">
                          <div
                            class="title-5-new2 text-color-black-shade5 mb-5px"
                          >
                            Trailer name
                          </div>
                          <input
                            type="text"
                            class="myinput-new myinput3"
                            formControlName="name"
                            placeholder="Type here"
                          />
                          <img
                            src="../../assets/icons/edit.png"
                            class="icon-bottom-right2"
                          />
                        </div>
                        <span
                          *ngIf="
                            addTrailer.get('license_plate')?.invalid &&
                            form_clicked
                          "
                          class="text-danger"
                        >
                          License plate is required.
                        </span>
                        <div class="position-relative mb-15 required_field2">
                          <div
                            class="title-5-new2 text-color-black-shade5 mb-5px"
                          >
                            Trailer license plate
                          </div>
                          <input
                            type="text"
                            class="myinput-new myinput3"
                            formControlName="license_plate"
                            placeholder="Type here"
                          />
                          <img
                            src="../../assets/icons/edit.png"
                            class="icon-bottom-right2"
                          />
                        </div>
                        <span
                          *ngIf="
                            addTrailer.get('name')?.invalid && form_clicked
                          "
                          class="text-danger"
                        >
                          Trailer type is required.
                        </span>
                        <div class="position-relative mb-15 required_field2">
                          <div
                            class="title-5-new2 text-color-black-shade5 mb-5px"
                          >
                            Trailer type
                          </div>
                          <select
                            class="myinput-new myinput3 icon-none"
                            formControlName="type"
                          >
                            <option value="Pony">Pony</option>
                            <option value="Tri Pony">Tri Pony</option>
                            <option value="Quad (wagon)">Quad (wagon)</option>
                            <option value="Transfer">Transfer</option>
                          </select>
                          <img
                            src="../../assets/icons/arrow-down-grey.svg"
                            class="icon-bottom-right22"
                          />
                        </div>
                        <div class="position-relative mb-15">
                          <div
                            class="title-5-new2 text-color-black-shade5 mb-5px"
                          >
                          Trailer capacity in weight
                          </div>
                          <div class="d-flex align-items-center justify-content-center ">
                            <div class="w-50">
                              <input type="number" placeholder="Enter"  step="1" min="0" formControlName="weight" class="capacity-input myinput-new myinput3 br-right-none">
                            </div>
                            <div class="w-50">
                              <select
                                class="myinput-new myinput3 icon-none br-left-none"
                                formControlName="weight_unit"
                              >
                                <option value="m3">m3</option>
                              </select>
                              <img
                                src="../../assets/icons/arrow-down-grey.svg"
                                class="icon-bottom-right22"
                              />
                            </div>
                          </div>
                        </div>

                        <div class="position-relative mb-15">
                          <div
                            class="title-5-new2 text-color-black-shade5 mb-5px"
                          >
                            Trailer capacity in volume
                          </div>
                          <div class="d-flex align-items-center justify-content-center ">
                            <div class="w-50">
                              <input type="number" step="1" placeholder="Enter" min="0" formControlName="volume" class="capacity-input myinput-new myinput3 br-right-none">
                            </div>
                            <div class="w-50">
                              <select
                                class="myinput-new myinput3 icon-none br-left-none"
                                formControlName="volume_unit"
                              >
                                <option value="tons">tons</option>
                              </select>
                              <img
                                src="../../assets/icons/arrow-down-grey.svg"
                                class="icon-bottom-right22"
                              />
                            </div>
                          </div>
                        </div>
                        <div class="position-relative mb-15">
                          <div
                            class="title-5-new2 text-color-black-shade5 mb-5px"
                          >
                          Trailer Color
                          </div>
                          <input
                            type="text"
                            class="myinput-new myinput3"
                            formControlName="color"
                            placeholder="Type here"
                          />
                          <img
                            src="../../assets/icons/edit.png"
                            class="icon-bottom-right2"
                          />
                        </div>
                        <div
                          class="d-flex justify-content-between  align-items-center mb-19 default-div text-black"
                        >
                          <div class="title-7 ml-10">Set as default</div>
                          <input
                            type="checkbox"
                            class="mycheckbox2 float-right"
                            value="1"
                            formControlName="is_default"
                          />

                        </div>

                        <div align="center" class="mb-17">
                          <button
                            class="mybtn2 mybtn-back-pink custom-padding8"
                            *ngIf="
                              is_loading_add == '' ||
                              is_loading_add != 'trailer'
                            "
                          >
                            Add
                          </button>
                          <button
                            class="mybtn2 mybtn-back-pink custom-padding8"
                            type="button"
                            *ngIf="
                              is_loading_add != '' &&
                              is_loading_add == 'trailer'
                            "
                            disabled
                          >
                            Adding..
                          </button>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="myhr2"></div>
          <div class="custom-padding5">
            <div class="row">
              <div class="col-md-6">
                <span class="text-danger" *ngIf="this.start_time_error != ''">{{
                  this.start_time_error
                }}</span>
                <div class="input-div {{!this.ticket_start_time ? 'bg-light-pink':'bg-transparent no-shadow border-white'}} required_field_pink">
                  <div class="title-5-new2 text-color-black-shade5 text-left">
                    Start time
                  </div>
                  <input
                    type="time"
                    class="myinput-new"
                    (change)="setTicketData($event, 'start_time')"
                  />
                </div>
              </div>
              <div class="col-md-6">
                <span
                  class="text-danger"
                  *ngIf="this.total_rounds_error != ''"
                  >{{ this.total_rounds_error }}</span
                >
                <div class="input-div {{!this.rounds ? 'bg-light-pink':'bg-transparent no-shadow border-white'}} required_field_pink getinputfield">
                  <div class="title-5-new2 text-color-black-shade5 text-left">
                    Number of rounds
                  </div>
                  <div class="myinput-new">{{ this.rounds }}</div>
                  <img
                    src="../../assets/icons/arrow-down-grey.svg"
                    class="icon-center-right"
                  />
                  <div class="input-popup-div br-14px bg-white">
                    <div class="title-5-new2 title-round text-center  text-color-black-shade5 mb-9">
                      Number of rounds
                    </div>
                    <div class="d-flex justify-content-between numbers-div">
                      <div
                        (click)="setRound(1)"
                        [ngClass]="this.rounds == 1 ? 'active' : ''"
                      >
                        1
                      </div>
                      <div
                        (click)="setRound(2)"
                        [ngClass]="this.rounds == 2 ? 'active' : ''"
                      >
                        2
                      </div>
                      <div
                        (click)="setRound(3)"
                        [ngClass]="this.rounds == 3 ? 'active' : ''"
                      >
                        3
                      </div>
                      <div
                        (click)="setRound(4)"
                        [ngClass]="this.rounds == 4 ? 'active' : ''"
                      >
                        4
                      </div>
                      <div
                        (click)="setRound(5)"
                        [ngClass]="this.rounds == 5 ? 'active' : ''"
                      >
                        5
                      </div>
                    </div>
                    <div class="d-flex justify-content-between numbers-div">
                      <div
                        (click)="setRound(6)"
                        [ngClass]="this.rounds == 6 ? 'active' : ''"
                      >
                        6
                      </div>
                      <div
                        (click)="setRound(7)"
                        [ngClass]="this.rounds == 7 ? 'active' : ''"
                      >
                        7
                      </div>
                      <div
                        (click)="setRound(8)"
                        [ngClass]="this.rounds == 8 ? 'active' : ''"
                      >
                        8
                      </div>
                      <div
                        (click)="setRound(9)"
                        [ngClass]="this.rounds == 9 ? 'active' : ''"
                      >
                        9
                      </div>
                      <div
                        (click)="setRound(10)"
                        [ngClass]="this.rounds == 10 ? 'active' : ''"
                      >
                        10
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <form
          [formGroup]="ticketForm"
          enctype="multipart/form-data"
          (ngSubmit)="dispatchTicket()"
        >
          <div class="mb-48 ">

            <ng-container formArrayName="ticket_rounds">
              <ng-container
                *ngFor="
                  let formItem of ticket_rounds().controls;
                  let idx = index;
                  let i = index
                ">
                <ng-container [formGroupName]="idx">
                  <div class="border-all br-8 mb-10px">
                    <div class="custom-padding5">
                      <div class="row mt-2">
                        <div class="col-md-5">
                          <span
                            *ngIf="
                              formItem.get('material_taken_out')?.invalid &&
                              form_clicked
                            "
                            class="text-danger"
                          >
                            Material taken out is required.
                          </span>
                          <div class="input-div required_field_pink getinputfield  no-shadow {{formItem.get('material_taken_out')?.value ? 'bg-transparent border-grey':''}}">
                            <div
                              class="title-5-new2 text-color-black-shade5 text-left"
                            >
                              Material out
                            </div>
                            <div class="myinput-new">
                              {{
                                formItem.get("material_taken_out")?.value
                                  ? formItem.get("material_taken_out")?.value
                                  : "Type here"
                              }}
                            </div>
                            <img
                              src="../../assets/icons/edit.png"
                              class="icon-bottom-right"
                            />
                            <div class="input-popup-div bg-white br-14px">
                              <div
                                class="title-5-new2 text-color-black-shade5 mb-4px"
                              >
                                Material out
                              </div>
                              <div class="position-relative">
                                <input
                                  type="text"
                                  class="myinput-new myinput3"
                                  value="{{
                                    formItem.get('material_taken_out')?.value
                                  }}"
                                  formControlName="material_taken_out"
                                  placeholder="Type here"
                                />
                                <img
                                  src="../../assets/icons/edit.png"
                                  class="icon-bottom-right2"
                                />
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="col-md-2 pl-0 pr-0">
                          <div
                            class="title-5-new2 pl-2 pr-2 pt-3 text-color-black-shade5 text-left round-text"
                          >
                            Round {{ i + 1 }}
                            <input
                              type="hidden"
                              formControlName="round_no"
                              value="{{ i + 1 }}"
                            />
                          </div>
                        </div>
                        <div class="col-md-5">
                          <span
                            *ngIf="
                              formItem.get('dump_site')?.invalid && form_clicked
                            "
                            class="text-danger"
                          >
                            Dumpsite is required.
                          </span>
                          <div class="input-div  required_field_pink getinputfield  no-shadow  {{formItem.get('dump_site')?.value ? 'bg-transparent border-grey':''}}">
                            <div
                              class="title-5-new2 text-color-black-shade5 text-left"
                            >
                              Dump site
                            </div>
                            <input
                              type="hidden"
                              formControlName="dump_site"
                              value="{{ formItem.get('dump_site')?.value }}"
                            />
                            <input
                              type="hidden"
                              formControlName="dump_site_name"
                              value="{{ formItem.get('dump_site_name')?.value }}"
                            />
                            <div class="myinput-new">
                              {{
                                formItem.get("dump_site_name")?.value
                                  ? formItem.get("dump_site_name")?.value
                                  : "Select"
                              }}
                            </div>
                            <img
                              src="../../assets/icons/edit.png"
                              class="icon-bottom-right"
                            />
                            <div class="input-popup-div br-14px bg-white">
                              <div
                                class="title-5-new2 text-color-black-shade5 mb-18"
                              >
                                Dump site
                              </div>
                              <ng-container *ngIf="this.dump_sites">
                                <ng-container
                                  *ngFor="let dumpsite of this.dump_sites"
                                >
                                  <div
                                    [ngClass]="
                                      formItem.get('dump_site')?.value ==
                                      dumpsite.id
                                        ? 'title-5-new mb-6 '
                                        : 'title-5-new text-color-black-shade7 mb-6'
                                    "
                                    (click)="setDumpsite(dumpsite, idx)"
                                  >
                                    {{ dumpsite.name }}
                                  </div>
                                </ng-container>
                              </ng-container>
                              <div
                                class="position-relative getinputfield2"
                                (click)="setVisible('dumpsite')"
                              >
                                <input
                                  type="text"
                                  class="myinput-new myinput3"
                                  placeholder="Add"
                                />
                                <img
                                  src="../../assets/icons/edit.png"
                                  class="icon-bottom-right2"
                                />
                              </div>
                              <div
                                class="input-popup-div2 br-11px bg-white"
                                *ngIf="this.is_visible == 'dumpsite'"
                              >
                                <div class="title-3 text-center text-black mb-19">
                                  Add dump site
                                </div>
                                <form [formGroup]="addDumpSite">
                                  <span
                                    *ngIf="this.dumpsite_name_error != ''"
                                    class="text-danger"
                                  >
                                    Name is required.
                                  </span>
                                  <div
                                    class="position-relative mb-15 required_field2"
                                  >
                                    <div
                                      class="title-5-new2 text-color-black-shade5 mb-5px"
                                    >
                                      Dump site name
                                    </div>
                                    <input
                                      type="text"
                                      class="myinput-new myinput3"
                                      placeholder="Trash 7"
                                      formControlName="name"
                                    />
                                    <img
                                      src="../../assets/icons/edit.png"
                                      class="icon-bottom-right2"
                                    />
                                  </div>
                                  <span
                                    *ngIf="this.address_error != ''"
                                    class="text-danger"
                                  >
                                    Address is required.
                                  </span>
                                  <div
                                    class="position-relative mb-15 required_field2"
                                  >
                                    <div
                                      class="title-5-new2 text-color-black-shade5 mb-5px"
                                    >
                                      Address
                                    </div>
                                    <input
                                      type="text"
                                      class="myinput-new myinput3"
                                      formControlName="address"
                                      placeholder="78 Grank Road"
                                    />
                                    <img
                                      src="../../assets/icons/edit.png"
                                      class="icon-bottom-right2"
                                    />
                                  </div>
                                  <div
                                    class="d-flex justify-content-center align-items-center mb-19"
                                  >
                                    <input
                                      type="checkbox"
                                      class="mycheckbox2"
                                      value="1"
                                      formControlName="is_default"
                                    />
                                    <div class="title-7 ml-10">
                                      Set as default
                                    </div>
                                  </div>
                                  <div align="center" class="mb-17">
                                    <button
                                      class="mybtn2 mybtn-back-pink custom-padding8"
                                      (click)="onAddDumpsite()"
                                      *ngIf="
                                        is_loading_add == '' ||
                                        is_loading_add != 'dumpsite'
                                      "
                                    >
                                      Add
                                    </button>
                                    <button
                                      class="mybtn2 mybtn-back-pink custom-padding8"
                                      type="button"
                                      *ngIf="
                                        is_loading_add != '' &&
                                        is_loading_add == 'dumpsite'
                                      "
                                      disabled
                                    >
                                      Adding..
                                    </button>
                                  </div>
                                </form>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </ng-container>
              </ng-container>
            </ng-container>

          </div>

          <div class="" align="center">
            <button
              class="mybtn2 mybtn-back-pink"
              *ngIf="
                is_loading_add == '' || is_loading_add != 'freelance_ticket'
              "
            >
              Dispatch
            </button>
            <button
              class="mybtn2 mybtn-back-pink"
              type="button"
              *ngIf="
                is_loading_add != '' && is_loading_add == 'freelance_ticket'
              "
              disabled
            >
              Dispatching...
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
